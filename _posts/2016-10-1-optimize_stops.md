---
layout: post
title: Optimizing Routes Using Mapzen Services
---
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwX2RiZjJjMzBhNTcwYzRiYjRhYzMxYTA0ZTc2OTJiYWI1IHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSA9IEwubWFwKCdtYXBfZGJmMmMzMGE1NzBjNGJiNGFjMzFhMDRlNzY5MmJhYjUnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfN2IxMDJmOWExM2FhNDFiMGE0NjkyOWU4Y2IyNzliMTQgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMzc3ZDg5ZTJmZDMzNDYzYmIxZThhYTk2ZDYyYmU5MDcgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZGJmMmMzMGE1NzBjNGJiNGFjMzFhMDRlNzY5MmJhYjUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fOWJkZmMwNGM3ZTE3NGU2MmI1MDMwZmQ3MWMzNTYwZTQgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzM3N2Q4OWUyZmQzMzQ2M2JiMWU4YWE5NmQ2MmJlOTA3LnNldEljb24oaWNvbl85YmRmYzA0YzdlMTc0ZTYyYjUwMzBmZDcxYzM1NjBlNCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBiZTRiMGNkOGFlMTQzMTU5NzVlYjI4YWU0ZWRiYmViID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzlhZDc1MDgyOGQzNTQ5MThhOTQ3NjNhMWI4NzhiMjAzID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF85YWQ3NTA4MjhkMzU0OTE4YTk0NzYzYTFiODc4YjIwMyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wYmU0YjBjZDhhZTE0MzE1OTc1ZWIyOGFlNGVkYmJlYi5zZXRDb250ZW50KGh0bWxfOWFkNzUwODI4ZDM1NDkxOGE5NDc2M2ExYjg3OGIyMDMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8zNzdkODllMmZkMzM0NjNiYjFlOGFhOTZkNjJiZTkwNy5iaW5kUG9wdXAocG9wdXBfMGJlNGIwY2Q4YWUxNDMxNTk3NWViMjhhZTRlZGJiZWIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8xNjU3MDAxNDM4MTI0YzlhYWUyOTg4YTdjZDhmNTExYyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NjIxLC0xMjIuNDUxODRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8xZDMxOTZlZjgyNWM0MjMzOWEyNTAxZTNjM2Y3MDU0YSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8xNjU3MDAxNDM4MTI0YzlhYWUyOTg4YTdjZDhmNTExYy5zZXRJY29uKGljb25fMWQzMTk2ZWY4MjVjNDIzMzlhMjUwMWUzYzNmNzA1NGEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zZTQ3OThjYzcxNjU0MjkxYjdjNTBkODJjODdkZWFmMSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82ZTc4NDcxMThiYTE0MjYwODFkM2Y0MGFkY2M0MmY5YyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNmU3ODQ3MTE4YmExNDI2MDgxZDNmNDBhZGNjNDJmOWMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDEgLSBOb2FoJiMzOTtzIEJhZ2VsczwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zZTQ3OThjYzcxNjU0MjkxYjdjNTBkODJjODdkZWFmMS5zZXRDb250ZW50KGh0bWxfNmU3ODQ3MTE4YmExNDI2MDgxZDNmNDBhZGNjNDJmOWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8xNjU3MDAxNDM4MTI0YzlhYWUyOTg4YTdjZDhmNTExYy5iaW5kUG9wdXAocG9wdXBfM2U0Nzk4Y2M3MTY1NDI5MWI3YzUwZDgyYzg3ZGVhZjEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl83OWRjZDI5NzhhZTg0NTE4YjU3OGFmODQwZjk3NGY3MyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTEzLC0xMjIuNDY5OTVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl85YWRlMDlkYWRhM2M0YzIzYjU1YzcxODk0Y2Y2NWRlOCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzc5ZGNkMjk3OGFlODQ1MThiNTc4YWY4NDBmOTc0ZjczLnNldEljb24oaWNvbl85YWRlMDlkYWRhM2M0YzIzYjU1YzcxODk0Y2Y2NWRlOCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Y1MjE0MjA0OTRiNjRkZDhiMjFhZmNhNzIxMzVjOTNkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzAxNzExNWQyNTgwZDQ2NzVhMWQ2OTA4NDcyODY4MjUwID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8wMTcxMTVkMjU4MGQ0Njc1YTFkNjkwODQ3Mjg2ODI1MCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMSAtIExhbXBzIFBsdXM8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjUyMTQyMDQ5NGI2NGRkOGIyMWFmY2E3MjEzNWM5M2Quc2V0Q29udGVudChodG1sXzAxNzExNWQyNTgwZDQ2NzVhMWQ2OTA4NDcyODY4MjUwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNzlkY2QyOTc4YWU4NDUxOGI1NzhhZjg0MGY5NzRmNzMuYmluZFBvcHVwKHBvcHVwX2Y1MjE0MjA0OTRiNjRkZDhiMjFhZmNhNzIxMzVjOTNkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNzUxNDI5YzgzNjhlNDNjNjk1ZjcxYWMwZTVmOTBmNDYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43ODM3MSwtMTIyLjQ4M10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2RiZjJjMzBhNTcwYzRiYjRhYzMxYTA0ZTc2OTJiYWI1KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzJhY2IxZjYyNzhiYTQ3YTRhNGM3ODFmMGM5OTJkNjVjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNzUxNDI5YzgzNjhlNDNjNjk1ZjcxYWMwZTVmOTBmNDYuc2V0SWNvbihpY29uXzJhY2IxZjYyNzhiYTQ3YTRhNGM3ODFmMGM5OTJkNjVjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTZiYzIyNGM0OTcwNDA0ZDhkOGFiNzQ4Yzc2NGQ1NjAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNjJmZmNjNWFmMzc4NGZhNjliMDNiN2NhMmNkN2RhNjcgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzYyZmZjYzVhZjM3ODRmYTY5YjAzYjdjYTJjZDdkYTY3IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAyIC0gUGl6emV0dGE8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTZiYzIyNGM0OTcwNDA0ZDhkOGFiNzQ4Yzc2NGQ1NjAuc2V0Q29udGVudChodG1sXzYyZmZjYzVhZjM3ODRmYTY5YjAzYjdjYTJjZDdkYTY3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNzUxNDI5YzgzNjhlNDNjNjk1ZjcxYWMwZTVmOTBmNDYuYmluZFBvcHVwKHBvcHVwX2E2YmMyMjRjNDk3MDQwNGQ4ZDhhYjc0OGM3NjRkNTYwKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYjFiODY5YThkZDllNDJjNWEzZWZkZjMyNDUyODRiZGEgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzAwMiwtMTIyLjQ2NTYxXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZGJmMmMzMGE1NzBjNGJiNGFjMzFhMDRlNzY5MmJhYjUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNTcwMDY5MDEyZDcwNDQyMWFlZmZmNWZiNjExZGViNzIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2dyZWVuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2IxYjg2OWE4ZGQ5ZTQyYzVhM2VmZGYzMjQ1Mjg0YmRhLnNldEljb24oaWNvbl81NzAwNjkwMTJkNzA0NDIxYWVmZmY1ZmI2MTFkZWI3Mik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2RhMmI3OTE5MDEzNjRlODFiNzg0NzI2OWJjY2U4ODUxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzZmYzMwNzFkMWFiODRkYmI5M2U3ZDliMzI5OWUyZjY1ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF82ZmMzMDcxZDFhYjg0ZGJiOTNlN2Q5YjMyOTllMmY2NSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMSAtIGRlIFlvdW5nIE11c2V1bTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kYTJiNzkxOTAxMzY0ZTgxYjc4NDcyNjliY2NlODg1MS5zZXRDb250ZW50KGh0bWxfNmZjMzA3MWQxYWI4NGRiYjkzZTdkOWIzMjk5ZTJmNjUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9iMWI4NjlhOGRkOWU0MmM1YTNlZmRmMzI0NTI4NGJkYS5iaW5kUG9wdXAocG9wdXBfZGEyYjc5MTkwMTM2NGU4MWI3ODQ3MjY5YmNjZTg4NTEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9hYTVhMzdlYmFjODc0ZmJkYjgwNTE2OTMwOTgzMGNmMCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3NTU4LC0xMjIuNDU4MzNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8yNzk0MWUxYmY5N2M0YWU2YWIxM2M2NDU3MTA0ZTBkNiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnZ3JlZW4nLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfYWE1YTM3ZWJhYzg3NGZiZGI4MDUxNjkzMDk4MzBjZjAuc2V0SWNvbihpY29uXzI3OTQxZTFiZjk3YzRhZTZhYjEzYzY0NTcxMDRlMGQ2KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMTA2NmYzODM0NTk5NDQwZDhjMmViMWY1MDNmZjQ1YjAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZmM3OWNlY2RmNTZkNDM1MDhlMjRmZjVjZTk4ZmNlZDEgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2ZjNzljZWNkZjU2ZDQzNTA4ZTI0ZmY1Y2U5OGZjZWQxIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAyIC0gQXJndWVsbG8gTWFya2V0PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzEwNjZmMzgzNDU5OTQ0MGQ4YzJlYjFmNTAzZmY0NWIwLnNldENvbnRlbnQoaHRtbF9mYzc5Y2VjZGY1NmQ0MzUwOGUyNGZmNWNlOThmY2VkMSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2FhNWEzN2ViYWM4NzRmYmRiODA1MTY5MzA5ODMwY2YwLmJpbmRQb3B1cChwb3B1cF8xMDY2ZjM4MzQ1OTk0NDBkOGMyZWIxZjUwM2ZmNDViMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2ZjMTFiNTc5YWIwNzQ2MDc5MjQ2NWM0OWFmMGM3NWVjID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgyNzgsLTEyMi40NjM1MV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2RiZjJjMzBhNTcwYzRiYjRhYzMxYTA0ZTc2OTJiYWI1KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzc0ZThkNWI3NzIzZjRhYjQ5NmFmNWYxZjMxNzZlYzZiID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdncmVlbicsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9mYzExYjU3OWFiMDc0NjA3OTI0NjVjNDlhZjBjNzVlYy5zZXRJY29uKGljb25fNzRlOGQ1Yjc3MjNmNGFiNDk2YWY1ZjFmMzE3NmVjNmIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83OWE4NmEzYTRhMTk0OGUyOTM0OGZiNTczM2I4MGIyYiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yOTZhMDU2OWJhMmM0ZDg2OGRkYWY5MGYyYjEwZjZhZSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMjk2YTA1NjliYTJjNGQ4NjhkZGFmOTBmMmIxMGY2YWUiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDMgLSBUb3kgQm9hdDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83OWE4NmEzYTRhMTk0OGUyOTM0OGZiNTczM2I4MGIyYi5zZXRDb250ZW50KGh0bWxfMjk2YTA1NjliYTJjNGQ4NjhkZGFmOTBmMmIxMGY2YWUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9mYzExYjU3OWFiMDc0NjA3OTI0NjVjNDlhZjBjNzVlYy5iaW5kUG9wdXAocG9wdXBfNzlhODZhM2E0YTE5NDhlMjkzNDhmYjU3MzNiODBiMmIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIHBvbHlfbGluZV9mNmJlZTMxNmQyNTE0MGQ0YTY4ZTk2NjYyNDhjN2QzYiA9IEwucG9seWxpbmUoCiAgICAgICAgICAgICAgICAgICAgW1szNy43NzkxMDYsIC0xMjIuNDY0MTU4XSwgWzM3Ljc4MDUyOSwgLTEyMi40NjQyNjRdLCBbMzcuNzgwOTY3LCAtMTIyLjQ2NDI5NV0sIFszNy43ODEwODksIC0xMjIuNDY0MzAzXSwgWzM3Ljc4MTUxMywgLTEyMi40NjQzMzNdLCBbMzcuNzgyMDkzLCAtMTIyLjQ2NDM3OV0sIFszNy43ODIyMzgsIC0xMjIuNDY0Mzg2XSwgWzM3Ljc4MjU0NiwgLTEyMi40NjQ0MDldLCBbMzcuNzgyOTUxLCAtMTIyLjQ2NDQ0XSwgWzM3Ljc4NDc5LCAtMTIyLjQ2NDU3XSwgWzM3Ljc4NTAwMywgLTEyMi40NjQ1ODVdLCBbMzcuNzg1MTM3LCAtMTIyLjQ2MzUyNF0sIFszNy43ODUyNzQsIC0xMjIuNDYyNDU2XSwgWzM3Ljc4NTQwOCwgLTEyMi40NjEzOTZdLCBbMzcuNzg1NTQ1LCAtMTIyLjQ2MDMyOF0sIFszNy43ODU2ODYsIC0xMjIuNDU5MjE0XSwgWzM3Ljc4NTgzMSwgLTEyMi40NTgwNjldLCBbMzcuNzg1OTcyLCAtMTIyLjQ1Njk3OF0sIFszNy43ODYwMDMsIC0xMjIuNDU2NzExXSwgWzM3Ljc4NjEwOSwgLTEyMi40NTU4ODddLCBbMzcuNzg2MjEyLCAtMTIyLjQ1NTA2M10sIFszNy43ODYyNTEsIC0xMjIuNDU0Nzg5XSwgWzM3Ljc4NjMxMiwgLTEyMi40NTQzXSwgWzM3Ljc4NjM4OCwgLTEyMi40NTM2OThdLCBbMzcuNzg2NDE4LCAtMTIyLjQ1MzQyM10sIFszNy43ODY0MywgLTEyMi40NTMzMjRdLCBbMzcuNzg2NjI0LCAtMTIyLjQ1MTc3NV0sIFszNy43ODY0NzYsIC0xMjIuNDUxNzQ1XSwgWzM3Ljc4NjIzOSwgLTEyMi40NTE2OTldLCBbMzcuNzg2MjM5LCAtMTIyLjQ1MTY5OV0sIFszNy43ODU5MzQsIC0xMjIuNDUxNjNdLCBbMzcuNzg1OTM0LCAtMTIyLjQ1MTYzOF0sIFszNy43ODU4NzcsIC0xMjIuNDUyMDhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1NzI0LCAtMTIyLjQ1MzI3OF0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcxMywgLTEyMi40NTM0MzFdLCBbMzcuNzg1NzA1LCAtMTIyLjQ1MzQ5OV0sIFszNy43ODU2OTQsIC0xMjIuNDUzNTZdLCBbMzcuNzg1NjgyLCAtMTIyLjQ1MzYxNF0sIFszNy43ODU2NTksIC0xMjIuNDUzNjZdLCBbMzcuNzg1NjMzLCAtMTIyLjQ1MzY5OF0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTU1NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg1NTExLCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTM1OCwgLTEyMi40NTM3NTldLCBbMzcuNzg1MjM2LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NDk3NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg0ODUxLCAtMTIyLjQ1Mzc0M10sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDYxNCwgLTEyMi40NTM3MjhdLCBbMzcuNzg0NDk2LCAtMTIyLjQ1MzcxM10sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDI2NywgLTEyMi40NTM2ODJdLCBbMzcuNzg0MTY4LCAtMTIyLjQ1MzY2N10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4Mzk1NCwgLTEyMi40NTM2MzddLCBbMzcuNzgxNzg3LCAtMTIyLjQ1MzIwMl0sIFszNy43ODE2NjksIC0xMjIuNDUzMTc5XSwgWzM3Ljc4MDM2NCwgLTEyMi40NTI5Ml0sIFszNy43ODAyNDIsIC0xMjIuNDUzODk2XSwgWzM3Ljc4MDEyLCAtMTIyLjQ1NDgzNF0sIFszNy43ODAwOTcsIC0xMjIuNDU1MDE4XSwgWzM3Ljc4MDAzNiwgLTEyMi40NTU0OTFdLCBbMzcuNzgwMDI5LCAtMTIyLjQ1NTU1OV0sIFszNy43ODAwMTcsIC0xMjIuNDU1NjJdLCBbMzcuNzgwMDA2LCAtMTIyLjQ1NTY4MV0sIFszNy43Nzk5OTEsIC0xMjIuNDU1NzM1XSwgWzM3Ljc3OTk0NSwgLTEyMi40NTU4NTddLCBbMzcuNzc5ODk5LCAtMTIyLjQ1NTk4N10sIFszNy43Nzk4MDgsIC0xMjIuNDU2MjM4XSwgWzM3Ljc3OTcwOCwgLTEyMi40NTY1MTNdLCBbMzcuNzc5NjcsIC0xMjIuNDU2NjEyXSwgWzM3Ljc3OTY0NCwgLTEyMi40NTY2ODhdLCBbMzcuNzc5NjIxLCAtMTIyLjQ1Njc1N10sIFszNy43Nzk2MDUsIC0xMjIuNDU2ODMzXSwgWzM3Ljc3OTU5NCwgLTEyMi40NTY5MDJdLCBbMzcuNzc5NTc5LCAtMTIyLjQ1NzAwMV0sIFszNy43Nzk0ODMsIC0xMjIuNDU3NzY0XSwgWzM3Ljc3OTQ3MiwgLTEyMi40NTc4NF0sIFszNy43NzkzNzMsIC0xMjIuNDU4NjE5XSwgWzM3Ljc3OTM1NywgLTEyMi40NTg3NTZdLCBbMzcuNzc5MzUsIC0xMjIuNDU4ODI1XSwgWzM3Ljc3OTM0MiwgLTEyMi40NTg4OTNdLCBbMzcuNzc5MywgLTEyMi40NTk4NzhdLCBbMzcuNzc5MjUxLCAtMTIyLjQ2MDk0Nl0sIFszNy43NzkyMDEsIC0xMjIuNDYyMDIxXSwgWzM3Ljc3OTE1MSwgLTEyMi40NjMwOTddLCBbMzcuNzc5MTA5LCAtMTIyLjQ2NDIwM11dLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNS5hZGRMYXllcihwb2x5X2xpbmVfZjZiZWUzMTZkMjUxNDBkNGE2OGU5NjY2MjQ4YzdkM2IpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lX2U2OTA2ZTkxMjM5MzQ4OGRhMDA4ZTgxMGVjODE1Mzc4ID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdLCBbMzcuNzgwNTI5LCAtMTIyLjQ2NDI2NF0sIFszNy43ODA5NjcsIC0xMjIuNDY0Mjk1XSwgWzM3Ljc4MDkxOCwgLTEyMi40NjUzNjNdLCBbMzcuNzgwOTAyLCAtMTIyLjQ2NTcxNF0sIFszNy43ODA4NjgsIC0xMjIuNDY2NDM5XSwgWzM3Ljc4MDg1MywgLTEyMi40NjY3OV0sIFszNy43ODA4MjIsIC0xMjIuNDY3NTA3XSwgWzM3Ljc4MDc3MywgLTEyMi40Njg1NzVdLCBbMzcuNzgwNzIzLCAtMTIyLjQ2OTY1MV0sIFszNy43ODA4NDUsIC0xMjIuNDY5NjU4XSwgWzM3Ljc4MTE1LCAtMTIyLjQ2OTcwNF0sIFszNy43ODExNSwgLTEyMi40Njk3MDRdLCBbMzcuNzgyMzgyLCAtMTIyLjQ2OTc2NV0sIFszNy43ODI3MDcsIC0xMjIuNDY5Nzg4XSwgWzM3Ljc4MjY2MSwgLTEyMi40NzA4NjRdLCBbMzcuNzgyNjExLCAtMTIyLjQ3MTkzMl0sIFszNy43ODI2MDQsIC0xMjIuNDcyMV0sIFszNy43ODI1OTIsIC0xMjIuNDcyMzk3XSwgWzM3Ljc4MjU4NSwgLTEyMi40NzI1NDJdLCBbMzcuNzgyNTY2LCAtMTIyLjQ3MzAwOF0sIFszNy43ODI1MTIsIC0xMjIuNDc0MTI5XSwgWzM3Ljc4MjQ1OSwgLTEyMi40NzUyNTFdLCBbMzcuNzgyNDA5LCAtMTIyLjQ3NjMxOV0sIFszNy43ODIzNjMsIC0xMjIuNDc3Mzk1XSwgWzM3Ljc4MjMxNCwgLTEyMi40Nzg0NjNdLCBbMzcuNzgyMjY0LCAtMTIyLjQ3OTUzMV0sIFszNy43ODIyMTUsIC0xMjIuNDgwNjA3XSwgWzM3Ljc4MjE2OSwgLTEyMi40ODE2NzVdLCBbMzcuNzgyMTE5LCAtMTIyLjQ4Mjc1XSwgWzM3Ljc4MzcxOCwgLTEyMi40ODI5MDNdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODIxMTksIC0xMjIuNDgyNzVdLCBbMzcuNzgxNzM4LCAtMTIyLjQ4MjcyXSwgWzM3Ljc4MDI1OCwgLTEyMi40ODI2MTNdLCBbMzcuNzgwMjc3LCAtMTIyLjQ4MjIzOV0sIFszNy43ODAzMDcsIC0xMjIuNDgxNTQ1XSwgWzM3Ljc4MDMyNiwgLTEyMi40ODExMzNdLCBbMzcuNzgwMzU3LCAtMTIyLjQ4MDQ3N10sIFszNy43ODA0MDMsIC0xMjIuNDc5NDAxXSwgWzM3Ljc4MDQ1MiwgLTEyMi40NzgzMzNdLCBbMzcuNzgwNDY3LCAtMTIyLjQ3Nzk3NF0sIFszNy43ODA1MDIsIC0xMjIuNDc3MjU3XSwgWzM3Ljc4MDUxMywgLTEyMi40NzY5MzddLCBbMzcuNzgwNTUxLCAtMTIyLjQ3NjE4OV0sIFszNy43ODA1OTcsIC0xMjIuNDc1MTEzXSwgWzM3Ljc4MDY1MSwgLTEyMi40NzM5OTJdLCBbMzcuNzgwNjcsIC0xMjIuNDczNTA0XSwgWzM3Ljc4MDcsIC0xMjIuNDcyODddLCBbMzcuNzgwNzE5LCAtMTIyLjQ3MjQ4OV0sIFszNy43ODA3MTksIC0xMjIuNDcyNDA1XSwgWzM3Ljc4MDU5NywgLTEyMi40NzIzOTddLCBbMzcuNzgwNjA1LCAtMTIyLjQ3MjI1Ml0sIFszNy43ODA2MDksIC0xMjIuNDcyMTc2XSwgWzM3Ljc4MDYxNiwgLTEyMi40NzE5ODVdLCBbMzcuNzgwNjI4LCAtMTIyLjQ3MTc5NV0sIFszNy43ODA2NTgsIC0xMjIuNDcxMDkzXSwgWzM3Ljc4MDY3MywgLTEyMi40NzA3MTldLCBbMzcuNzgwNzA4LCAtMTIyLjQ3MDAyNV0sIFszNy43ODA3MjMsIC0xMjIuNDY5NjUxXSwgWzM3Ljc4MDc3MywgLTEyMi40Njg1NzVdLCBbMzcuNzgwODIyLCAtMTIyLjQ2NzUwN10sIFszNy43ODA4NTMsIC0xMjIuNDY2NzldLCBbMzcuNzgwODY4LCAtMTIyLjQ2NjQzOV0sIFszNy43ODA5MDIsIC0xMjIuNDY1NzE0XSwgWzM3Ljc4MDkxOCwgLTEyMi40NjUzNjNdLCBbMzcuNzgwOTY3LCAtMTIyLjQ2NDI5NV0sIFszNy43ODA1MjksIC0xMjIuNDY0MjY0XSwgWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdXSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNS5hZGRMYXllcihwb2x5X2xpbmVfZTY5MDZlOTEyMzkzNDg4ZGEwMDhlODEwZWM4MTUzNzgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lXzVlMGMzZmVlNTQ3NDQ3NTg5MzI5ZjA4MTliNDcxZjRjID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdLCBbMzcuNzc3MjMzLCAtMTIyLjQ2NDAyOF0sIFszNy43NzU0NTksIC0xMjIuNDYzODk4XSwgWzM3Ljc3NTM3MSwgLTEyMi40NjM4OTFdLCBbMzcuNzc0MiwgLTEyMi40NjM4MDddLCBbMzcuNzczNjM1LCAtMTIyLjQ2Mzc2OV0sIFszNy43NzM2NTEsIC0xMjIuNDYzNjYyXSwgWzM3Ljc3MzUzNiwgLTEyMi40NjM2NjldLCBbMzcuNzczNDksIC0xMjIuNDYzNjY5XSwgWzM3Ljc3MzQ0OCwgLTEyMi40NjM2NjldLCBbMzcuNzczNDE0LCAtMTIyLjQ2MzcyM10sIFszNy43NzM0MDYsIC0xMjIuNDYzNzY5XSwgWzM3Ljc3MzI4MSwgLTEyMi40NjM3MzhdLCBbMzcuNzczMTg5LCAtMTIyLjQ2MzczOF0sIFszNy43NzMxMDUsIC0xMjIuNDYzNzQ2XSwgWzM3Ljc3Mjk5MSwgLTEyMi40NjM4MTRdLCBbMzcuNzcyOTMsIC0xMjIuNDYzODZdLCBbMzcuNzcyODcyLCAtMTIyLjQ2Mzg5OF0sIFszNy43NzI2MDksIC0xMjIuNDYzOTk3XSwgWzM3Ljc3MjUyOSwgLTEyMi40NjQwMjhdLCBbMzcuNzcyNDMsIC0xMjIuNDY0MDEzXSwgWzM3Ljc3MjM2OSwgLTEyMi40NjQwNDNdLCBbMzcuNzcyMzA4LCAtMTIyLjQ2NDA3NF0sIFszNy43NzIzNjUsIC0xMjIuNDY0MjcyXSwgWzM3Ljc3MjM5OSwgLTEyMi40NjQ0MDJdLCBbMzcuNzcyNDMsIC0xMjIuNDY0NTI0XSwgWzM3Ljc3MjQ2LCAtMTIyLjQ2NDY1NF0sIFszNy43NzIzODQsIC0xMjIuNDY0Njg0XSwgWzM3Ljc3MjMzMSwgLTEyMi40NjQ2OTldLCBbMzcuNzcyMjcsIC0xMjIuNDY0NzE1XSwgWzM3Ljc3MjE4MiwgLTEyMi40NjQ4MjldLCBbMzcuNzcyMTU5LCAtMTIyLjQ2NDk3NF0sIFszNy43NzIxMTMsIC0xMjIuNDY1MDY2XSwgWzM3Ljc3MTk2NSwgLTEyMi40NjUzMV0sIFszNy43NzE3NjYsIC0xMjIuNDY1Mjc5XSwgWzM3Ljc3MTU3NSwgLTEyMi40NjUyNjRdLCBbMzcuNzcxMzY2LCAtMTIyLjQ2NTE5NV0sIFszNy43NzEyMjQsIC0xMjIuNDY1MTg4XSwgWzM3Ljc3MTA2LCAtMTIyLjQ2NTE4OF0sIFszNy43NzA5NDYsIC0xMjIuNDY1MTk1XSwgWzM3Ljc3MDc5NywgLTEyMi40NjUxMzRdLCBbMzcuNzcwNjI2LCAtMTIyLjQ2NTA1XSwgWzM3Ljc3MDQyMywgLTEyMi40NjUxMDRdLCBbMzcuNzcwMzEzLCAtMTIyLjQ2NTA5Nl0sIFszNy43NzAyMzYsIC0xMjIuNDY0OTUxXSwgWzM3Ljc3MDA5MiwgLTEyMi40NjQ3NzZdLCBbMzcuNzY5OTUsIC0xMjIuNDY0NjA4XSwgWzM3Ljc2OTgwMiwgLTEyMi40NjQ0ODZdLCBbMzcuNzY5NzI1LCAtMTIyLjQ2NDQ3XSwgWzM3Ljc2OTY5NSwgLTEyMi40NjQ1N10sIFszNy43Njk3NiwgLTEyMi40NjQ2MDhdLCBbMzcuNzY5Nzk4LCAtMTIyLjQ2NDY2OV0sIFszNy43Njk4MzIsIC0xMjIuNDY0Nzk4XSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5OTU4LCAtMTIyLjQ2NTAxMl0sIFszNy43Njk5NTgsIC0xMjIuNDY1MDEyXSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5ODMyLCAtMTIyLjQ2NDc5OF0sIFszNy43Njk3OTgsIC0xMjIuNDY0NjY5XSwgWzM3Ljc2OTc2LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk2OTUsIC0xMjIuNDY0NTddLCBbMzcuNzY5NzI1LCAtMTIyLjQ2NDQ3XSwgWzM3Ljc2OTgwMiwgLTEyMi40NjQ0ODZdLCBbMzcuNzY5OTUsIC0xMjIuNDY0NjA4XSwgWzM3Ljc3MDA5MiwgLTEyMi40NjQ3NzZdLCBbMzcuNzcwMjM2LCAtMTIyLjQ2NDk1MV0sIFszNy43NzAzMTMsIC0xMjIuNDY1MDk2XSwgWzM3Ljc3MDQyMywgLTEyMi40NjUxMDRdLCBbMzcuNzcwNjI2LCAtMTIyLjQ2NTA1XSwgWzM3Ljc3MDkzMSwgLTEyMi40NjQ1NzddLCBbMzcuNzcxMDE4LCAtMTIyLjQ2NDMxOF0sIFszNy43NzExMTQsIC0xMjIuNDY0MTI3XSwgWzM3Ljc3MTE1NiwgLTEyMi40NjM5NTldLCBbMzcuNzcxMTcxLCAtMTIyLjQ2MzczOF0sIFszNy43NzExNzUsIC0xMjIuNDYzNTA5XSwgWzM3Ljc3MTIwOSwgLTEyMi40NjMyNV0sIFszNy43NzEyODYsIC0xMjIuNDYzMTJdLCBbMzcuNzcxNDI3LCAtMTIyLjQ2MzA3NF0sIFszNy43NzE0NDIsIC0xMjIuNDYyODUzXSwgWzM3Ljc3MTQ1NywgLTEyMi40NjI3XSwgWzM3Ljc3MTQ4LCAtMTIyLjQ2MjY1NV0sIFszNy43NzE2NTIsIC0xMjIuNDYyNTcxXSwgWzM3Ljc3MTczOSwgLTEyMi40NjI1MV0sIFszNy43NzE2ODYsIC0xMjIuNDYyMzU3XSwgWzM3Ljc3MTc1OSwgLTEyMi40NjIzNDJdLCBbMzcuNzcxODM1LCAtMTIyLjQ2MjMwNF0sIFszNy43NzE5MzQsIC0xMjIuNDYyMjY2XSwgWzM3Ljc3MTkxNSwgLTEyMi40NjIxODJdLCBbMzcuNzcxOTAzLCAtMTIyLjQ2MjE0M10sIFszNy43NzE5NjUsIC0xMjIuNDYyMDldLCBbMzcuNzcyMDgzLCAtMTIyLjQ2MTkzXSwgWzM3Ljc3MjE3OCwgLTEyMi40NjE3MTZdLCBbMzcuNzcyMjc0LCAtMTIyLjQ2MTUxXSwgWzM3Ljc3MjQwNywgLTEyMi40NjEzMzVdLCBbMzcuNzcyNTQ4LCAtMTIyLjQ2MTIyOF0sIFszNy43NzI1NzksIC0xMjIuNDYxMjEzXSwgWzM3Ljc3MjY1NSwgLTEyMi40NjExNzVdLCBbMzcuNzcyNzA4LCAtMTIyLjQ2MTE0NF0sIFszNy43NzI2NTksIC0xMjIuNDYxMDgzXSwgWzM3Ljc3MjcyLCAtMTIyLjQ2MTAzN10sIFszNy43NzI3NjYsIC0xMjIuNDYwOTk5XSwgWzM3Ljc3MjgxOSwgLTEyMi40NjA5NDZdLCBbMzcuNzcyODcyLCAtMTIyLjQ2MDg3N10sIFszNy43NzI5MTgsIC0xMjIuNDYwNzkzXSwgWzM3Ljc3Mjk1MywgLTEyMi40NjA3MTddLCBbMzcuNzcyOTg3LCAtMTIyLjQ2MDYxOF0sIFszNy43NzMwMTQsIC0xMjIuNDYwNTExXSwgWzM3Ljc3MzAzNiwgLTEyMi40NjAzOTZdLCBbMzcuNzczMTE3LCAtMTIyLjQ1OTgyNF0sIFszNy43NzMxNDcsIC0xMjIuNDU5NjFdLCBbMzcuNzczMTkzLCAtMTIyLjQ1OTI2N10sIFszNy43NzMyMDgsIC0xMjIuNDU5MTQ1XSwgWzM3Ljc3MzI3MywgLTEyMi40NTkxNTNdLCBbMzcuNzczNTcxLCAtMTIyLjQ1ODg5M10sIFszNy43NzM4NDUsIC0xMjIuNDU4NjI2XSwgWzM3Ljc3NDAwMiwgLTEyMi40NTg1MjddLCBbMzcuNzc0MTM5LCAtMTIyLjQ1ODQ5N10sIFszNy43NzQyOTksIC0xMjIuNDU4NTEyXSwgWzM3Ljc3NDI5OSwgLTEyMi40NTg0NThdLCBbMzcuNzc0Mjk5LCAtMTIyLjQ1ODM5XSwgWzM3Ljc3NDQxLCAtMTIyLjQ1ODQwNV0sIFszNy43NzQ3MDMsIC0xMjIuNDU4NDJdLCBbMzcuNzc0OTgyLCAtMTIyLjQ1ODQ0M10sIFszNy43NzUyNDUsIC0xMjIuNDU4NDU4XSwgWzM3Ljc3NTU2OSwgLTEyMi40NTg1MDRdLCBbMzcuNzc1NTY5LCAtMTIyLjQ1ODUwNF0sIFszNy43NzU2MTUsIC0xMjIuNDU4NDg5XSwgWzM3Ljc3NjExOSwgLTEyMi40NTg1MjddLCBbMzcuNzc2MTg3LCAtMTIyLjQ1ODUyN10sIFszNy43NzY4NDQsIC0xMjIuNDU4NTczXSwgWzM3Ljc3NzEyNiwgLTEyMi40NTg1OTZdLCBbMzcuNzc3Mjg2LCAtMTIyLjQ1ODYxMV0sIFszNy43NzczMzYsIC0xMjIuNDU4NzQxXSwgWzM3Ljc3NzQwOCwgLTEyMi40NTg5NDddLCBbMzcuNzc3NDMxLCAtMTIyLjQ1OTAxNV0sIFszNy43Nzc0NDYsIC0xMjIuNDU5MDc2XSwgWzM3Ljc3NzQ1NCwgLTEyMi40NTkxM10sIFszNy43Nzc0NTgsIC0xMjIuNDU5MTgzXSwgWzM3Ljc3NzQzNSwgLTEyMi40NTk2NDldLCBbMzcuNzc3NDI3LCAtMTIyLjQ1OTc0XSwgWzM3Ljc3NzQyMywgLTEyMi40NTk4MzldLCBbMzcuNzc3Mzc4LCAtMTIyLjQ2MDgwOF0sIFszNy43NzczMzIsIC0xMjIuNDYxODg0XSwgWzM3Ljc3NzI4MiwgLTEyMi40NjI5Nl0sIFszNy43NzkxNTEsIC0xMjIuNDYzMDk3XSwgWzM3Ljc4MTAxNywgLTEyMi40NjMyMjddLCBbMzcuNzgxMTM5LCAtMTIyLjQ2MzIzNF0sIFszNy43ODE1MzksIC0xMjIuNDYzMjY1XSwgWzM3Ljc4Mjc5MSwgLTEyMi40NjM0MDJdLCBbMzcuNzgyNzkxLCAtMTIyLjQ2MzQwMl0sIFszNy43ODE1MzksIC0xMjIuNDYzMjY1XSwgWzM3Ljc4MTEzOSwgLTEyMi40NjMyMzRdLCBbMzcuNzgxMDg5LCAtMTIyLjQ2NDMwM10sIFszNy43ODA5NjcsIC0xMjIuNDY0Mjk1XSwgWzM3Ljc4MDUyOSwgLTEyMi40NjQyNjRdLCBbMzcuNzc5MTA2LCAtMTIyLjQ2NDE1OF1dLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdncmVlbicsCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXBfZGJmMmMzMGE1NzBjNGJiNGFjMzFhMDRlNzY5MmJhYjUuYWRkTGF5ZXIocG9seV9saW5lXzVlMGMzZmVlNTQ3NDQ3NTg5MzI5ZjA4MTliNDcxZjRjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgPC9zY3JpcHQ+CiAgICAgICAg" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>

[Full Size]({{ site.baseurl }}/images/optimize_stops_3_people_drive.html)

### Traveling Salesman Problem
The traveling salesman problem is a classic optimization problem that seeks to find the most efficient route to connect a given set of points. I recently discovered a set of services built by the open-source mapping company, Mapzen that make this complex problem easy to approximate for a relatively small numbers of stops. Given a set of coordinates, the Mapzen [optimize route](https://mapzen.com/documentation/mobility/optimized/api-reference/) service uses road network data to produce a time-distance matrix between these points, and then uses an optimization algorithm to determine a route that minimizes total travel time. This can be done for one of three modes of transportation - pedestrian, bicycle, and automobile. They have a great [example](https://mapzen.com/blog/optimized-route/) with a cool map where they determine the optimal route to visit burrito 'dispensaries' in San Francisco.

This optimization tool can also be used in conjunction with Mapzen's [Search](https://mapzen.com/documentation/search/) Service, which uses open source data to geocode addresses, landmarks, and businesses. Using these two services together is really handy, because it means that one can pass a list of addresses or business names rather than lat / long coordinates.


### Building Off the Optimize Route Service
The Mapzen optimize route service takes a set of points and finds the optimal route that a person should take to visit all of these points. However, what if we have multiple "salesmen?” How should the stops be split up between people and in what order should each person visit their stops?

The idea for this was spurred by a project I'm involved with at work, in which we are sending out multiple research assistants to conduct surveys at a dozen or so different sites in Oakland. In this case, it doesn't matter if one person conducts more surveys than the others  or who goes to which site - the goal is just to minimize the total time to get them all done.

I decided to test these services in an application that hits closer to home (literally): the optimization of Sunday morning errands between my girlfriend, Celeste, and I. Say we're both starting and ending at our apartment in the Inner Richmond, SF and have 6 different places that we need to stop at. How should Celeste and I split up these errands so that we're finished as quickly as possible?

In the post below, I write a set of functions in Python that call the Mapzen Search and Mapzen Optimize Route API services, making it really easy to determine the most efficient route between a given set of locations. I also extend this function to determine the most efficient way to split the stops among multiple salesmen, and which route each person should take.

Additionally, I use the Python package ```folium``` to create leaflet.js slippy maps to display the results of this optimization problem. Folium has a number of built-in tilesets from OpenStreetMap, MapQuest, MapBox, and makes it really easy to build web maps using Python. I find this package to be really useful for data visualization – since I tend to generate data in Python anyway it’s nice to be able to do it all within one work environment.

### A Few Caveats
The purpose of this blog post is NOT to develop an efficient algorithm to approximate a solution to the vehicle routing problem at any large scale. It is instead to show-case an easy way to access and visualize Mapzen routing services, which I find to be very useful and fun to work with. This post only scratches the surface of the capabilities and range of these routing tools. My use of this service to optimize routes among multiple salesmen addresses a specific aspect of this service that they do not provide, but my approach is more of a 'quick and dirty' demonstration than anything else.

The number of unique ways that stops can be partitioned grows very quickly as the number of stops and salesmen increases, so my approach of testing these unique combinations using Mapzen’s optimize route tool will only work for relatively small numbers before exceeding API service limits. For my purposes right now, this is just fine. A better approach would perhaps be to address this problem more “up-stream”, using the Mapzen generated [Time-Distance Matrix](https://mapzen.com/documentation/mobility/matrix/api-reference/) rather than the results from a tool that uses that matrix behind the scenes anyway. However, my approach provides a relatively simple way to get an answer without having to develop my own traveling salesman optimization algorithm.

A Jupyter notebook with all of my code plus more details can be downloaded [here](/images/optimize_stops.ipynb) (or viewed in HTML format [here](/images/optimize_stops.html)). It can also be found on my [GitHub](https://github.com/agaidus/optimize_stops).

## Geocoding Locations with Mapzen's Search Tool
I first write a function that wraps Mapzen's Search tool in order to geocode (obtain the lat / long coordinates for) an address, landmark, or business. The function returns a dictionary containing the raw result output from Mapzen (including information such as data source, geocoding confidence, neighborhood data, etc), as well as the crucial piece of information for me: a formatted set of coordinates. By default, I return only 1 result (the best match), but if I were to use this tool in a different context, I would perhaps be interested in returning a set of results. Below I use this function to geocode two famous San Francisco landmarks - the Transamerica Pyramid and Sutro Tower.


```python
geocode_address_venue('Transamerica Pyramid, San Francisco, CA')['coords']
geocode_address_venue('Sutro Tower, San Francisco, CA')['coords']
```

    (-122.40303, 37.79465)
    (-122.45285, 37.755246)
    

## Displaying Points on Leaflet Maps
Now let's put these points on a map. I wrote a plotting function that uses folium to plot a set of points and polylines with labels on leaflet.js maps. By default, I use the Stamen Watercolor tiles because I think they look really cool, but if something like OpenStreetMap is more useful, that can also be specified. The full set of available tile layers can be found [here](https://github.com/python-visualization/folium). The function also takes an optional set of colors and point labels, a zoom-level, and a center location. My function calculates default values if not specified.

The function is written in a way that it accepts either a list of point coordinates, or a list of lists of point coordinates. If the latter is specified, each sublist is treated as a group of coordinates and will be symbolized in the same color. The function was ultimately written this way to distinguish the routes of each salesman in the optimization problem coming later. Additionally, I allow for the specification of polyline coordinates, which can be used to plot the optimized route between the points.

Below I map my two previously geocoded San Francisco landmarks along with the "as the crow flies" polyline that connects them. Note that on the 'live' map if you click on the points you will see that they are labeled appropriately.


```python
sf_landmarks = plot_stops([transamerica, sutro], labels = ['Transamerica Pyramid','Sutro Tower'], 
            zoom_level = 13, tiles = 'Stamen Toner', point_colors = ['red','blue'],
            line_coords = [transamerica, sutro], line_colors = 'purple')
sf_landmarks
```


<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwX2JiMTM2YmQ1ZDk3MTQ4YjNiNmQ5NGFlZTIxMWU1Mjg0IHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF9iYjEzNmJkNWQ5NzE0OGIzYjZkOTRhZWUyMTFlNTI4NCIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF9iYjEzNmJkNWQ5NzE0OGIzYjZkOTRhZWUyMTFlNTI4NCA9IEwubWFwKCdtYXBfYmIxMzZiZDVkOTcxNDhiM2I2ZDk0YWVlMjExZTUyODQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3NDk0OCwtMTIyLjQyNzk0XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IDEzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4Qm91bmRzOiBib3VuZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllcnM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyXzljZTk2NzAyYzcyNTQyZDQ5MDBiNzRjYzA4MDhjMGUyID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9zdGFtZW4tdGlsZXMte3N9LmEuc3NsLmZhc3RseS5uZXQvdG9uZXIve3p9L3t4fS97eX0ucG5nJywKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBtYXhab29tOiAxOCwKICAgICAgICAgICAgICAgICAgICBtaW5ab29tOiAxLAogICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uOiAnTWFwIHRpbGVzIGJ5IDxhIGhyZWY9Imh0dHA6Ly9zdGFtZW4uY29tIj5TdGFtZW4gRGVzaWduPC9hPiwgdW5kZXIgPGEgaHJlZj0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnkvMy4wIj5DQyBCWSAzLjA8L2E+LiBEYXRhIGJ5IDxhIGhyZWY9Imh0dHA6Ly9vcGVuc3RyZWV0bWFwLm9yZyI+T3BlblN0cmVldE1hcDwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0Ij5PRGJMPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9iYjEzNmJkNWQ5NzE0OGIzYjZkOTRhZWUyMTFlNTI4NCk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYjllNGRiODU1OWM3NDQyN2E4OTEwMTdiNmZiNTYzMzYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43OTQ2NSwtMTIyLjQwMzAzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmIxMzZiZDVkOTcxNDhiM2I2ZDk0YWVlMjExZTUyODQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYTMwOThjMDQyY2ZhNDdlNWIxNjY5ODE1ZjU2MmMzYmMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9iOWU0ZGI4NTU5Yzc0NDI3YTg5MTAxN2I2ZmI1NjMzNi5zZXRJY29uKGljb25fYTMwOThjMDQyY2ZhNDdlNWIxNjY5ODE1ZjU2MmMzYmMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81NTZkMDVkNTdkNGU0NGU0OWIwZGZiYzQwYjYyYzE0YSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lYmIwNWE3ZTVjNjE0YTI2OWFjZjc1ZThiZjU3NWRiYSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfZWJiMDVhN2U1YzYxNGEyNjlhY2Y3NWU4YmY1NzVkYmEiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFRyYW5zYW1lcmljYSBQeXJhbWlkPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzU1NmQwNWQ1N2Q0ZTQ0ZTQ5YjBkZmJjNDBiNjJjMTRhLnNldENvbnRlbnQoaHRtbF9lYmIwNWE3ZTVjNjE0YTI2OWFjZjc1ZThiZjU3NWRiYSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2I5ZTRkYjg1NTljNzQ0MjdhODkxMDE3YjZmYjU2MzM2LmJpbmRQb3B1cChwb3B1cF81NTZkMDVkNTdkNGU0NGU0OWIwZGZiYzQwYjYyYzE0YSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzk0Yjg4YmU0YjM4MjQzMWFiZjY1MDI0N2MxODFmMzgyID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzU1MjQ2LC0xMjIuNDUyODVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iYjEzNmJkNWQ5NzE0OGIzYjZkOTRhZWUyMTFlNTI4NCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9kNDRhZTMxNWE0Yzk0MGUyOWU2MmMwMTZlMTllZWIzNiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl85NGI4OGJlNGIzODI0MzFhYmY2NTAyNDdjMTgxZjM4Mi5zZXRJY29uKGljb25fZDQ0YWUzMTVhNGM5NDBlMjllNjJjMDE2ZTE5ZWViMzYpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lNTRiOGI3YmFkNTI0NDEwYTg4NjhjNThkMmJiOWMwZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xMzUwYTdiYTAwN2Y0NmZmODE4MWQ3ZTEyM2M2ZWUyZiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMTM1MGE3YmEwMDdmNDZmZjgxODFkN2UxMjNjNmVlMmYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFN1dHJvIFRvd2VyPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U1NGI4YjdiYWQ1MjQ0MTBhODg2OGM1OGQyYmI5YzBmLnNldENvbnRlbnQoaHRtbF8xMzUwYTdiYTAwN2Y0NmZmODE4MWQ3ZTEyM2M2ZWUyZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzk0Yjg4YmU0YjM4MjQzMWFiZjY1MDI0N2MxODFmMzgyLmJpbmRQb3B1cChwb3B1cF9lNTRiOGI3YmFkNTI0NDEwYTg4NjhjNThkMmJiOWMwZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lX2ExMDZjOTgzOTFhOTRkYzFhYWNmN2Q1MTFjN2Y0Y2Y3ID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc5NDY1LCAtMTIyLjQwMzAzXSwgWzM3Ljc1NTI0NiwgLTEyMi40NTI4NV1dLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdwdXJwbGUnLAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFwX2JiMTM2YmQ1ZDk3MTQ4YjNiNmQ5NGFlZTIxMWU1Mjg0LmFkZExheWVyKHBvbHlfbGluZV9hMTA2Yzk4MzkxYTk0ZGMxYWFjZjdkNTExYzdmNGNmNyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvc2NyaXB0PgogICAgICAgIA==" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>
[Full Size]({{ site.baseurl }}/images/sutro_transamerica.html)

## Determining Stop Order using Mapzen's Optimize Route Service 

Now that I have tools to geocode and visualize points, I’m ready to write a function that calls the Mapzen Optimize route service to calculate the optimal route that one person should use to visit a set of stops, starting and ending at a “home” location. Later on, I will build off of this function to optimize stops for multiple people, but this is an initial building-block. The  key pieces of information that this function returns are trip length, trip distance, optimize stop order, an ordered set of stop coordinates, and the polyline that connects these stops.

Note that Mapzen uses the [Google Maps encoded polyline format](https://developers.google.com/maps/documentation/utilities/polylinealgorithm) to store a series of latitude, longitude coordinates as a single string (this is done to reduce the size of the route response). Mapzen provides [code](https://mapzen.com/documentation/mobility/decoding/) that can be used to decode the string, which I use in order to get a set of lat / long coordinates that I can plot.

The decoding function is applied below to a sample coded string below.

```python
coded_polyline=decode('ciz`gAzxrqhF}wArEkZ|@`BvaA^|TbAhl@\\|T|@xk@`BvaAbBfbAsFLaRzA')
coded_polyline
```




    [[-122.464158, 37.779106],
     [-122.464264, 37.780529],
     [-122.464295, 37.780967],
     [-122.465363, 37.780918],
     [-122.465714, 37.780902],
     [-122.466439, 37.780868],
     [-122.46679, 37.780853],
     [-122.467507, 37.780822],
     [-122.468575, 37.780773],
     [-122.469651, 37.780723],
     [-122.469658, 37.780845],
     [-122.469704, 37.78115]]



My function also wraps the geocoding function I wrote above, so that the user can specify any combination of addresses, venues, and coordinates. It defaults to pedestrian mode of transportation, but the user can also specify driving or biking optimization. I also allow the user to specify a set of stop labels, which will be returned as the ordered list of stops. Otherwise, the function defaults to the raw input that was passed to the function

Before extending this function to multiple salesman, I’ll demonstrate the output of this initial function. Below I define my optimization parameters:
1. A list of 6 stops in my neighborhood that Celeste and I will need to visit as part of our Sunday morning errands (note that I use a combination of business names, addresses, and coordinates)
2. A set of names that correspond to these stops that will make the labeling clearer
3. A home location that will be the start and end point.

As much as I wish it were the case, our Sunday errands generally do not involve ice cream, pizza, bagels, and art museums. Nonetheless, for this example I've used some of our favorite neighborhood destinations despite the fact that they are somewhat unrealistic “errand” destinations.


```python
stops = ['Toy Boat Dessert Cafe, San Francisco, CA',
       'Pizzetta 211, San Francisco, CA', 
       'Arguello Super Market, San Francisco, CA',
       '4700 Geary Blvd, San Francisco, CA',
       (-122.465613, 37.770016),
       '3519 California St, San Francisco, CA 94118']

stop_labels = ['Toy Boat',
             'Pizzetta',
             'Arguello Market',
             'Lamps Plus',
             'de Young Museum',
             "Noah's Bagels"]

home = (-122.464186, 37.779111)
```

I then apply this function to my set of stops and return the optimized stop order, the route time, and the route distance. I first optimize the route as a pedestrian and then as a bicyclist. As you can see, the stop order is slightly different for these two modes of transit, likely keeping the bike route on roads and paths that are better for biking.

```python
walk_opt = optimize_stops(home, stops, stop_labels = stop_labels)
print walk_opt['order']
print str(walk_opt['time']) + ' minutes'
print str(walk_opt['length']) + ' km'
```

    ['Home', 'Lamps Plus', 'Pizzetta', 'Toy Boat', "Noah's Bagels", 'Arguello Market', 'de Young Museum', 'Home']
    116 minutes
    9.625 km
    


```python
walk_1_map=plot_stops(walk_opt['points'][:-1], zoom_level = 14, tiles = 'Stamen Watercolor', \
                labels = walk_opt['order'][:-1], line_coords = walk_opt['line'], point_colors=['black']+len(stops)*['red'])
walk_1_map
```


<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwXzk1MWVlMTBkNTQ2ZTQ5NzI5ZWY2ZTczMzYzMjM0M2Y5IHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF85NTFlZTEwZDU0NmU0OTcyOWVmNmU3MzM2MzIzNDNmOSIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF85NTFlZTEwZDU0NmU0OTcyOWVmNmU3MzM2MzIzNDNmOSA9IEwubWFwKCdtYXBfOTUxZWUxMGQ1NDZlNDk3MjllZjZlNzMzNjMyMzQzZjknLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfNTk4Y2ZkMzM1NjMxNDVhZTk4YmZmMjM4OWU5NzZiNjkgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85NTFlZTEwZDU0NmU0OTcyOWVmNmU3MzM2MzIzNDNmOSk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYzVmMGE0MWVlYmRhNDk2ZTk1M2IwNzRhNzQ2OGRjMzAgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfOTUxZWUxMGQ1NDZlNDk3MjllZjZlNzMzNjMyMzQzZjkpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fOWU4OTk1ZWI2ZGQ5NDA2ZjkxMTdjYWM0YzJlMTliMmMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2M1ZjBhNDFlZWJkYTQ5NmU5NTNiMDc0YTc0NjhkYzMwLnNldEljb24oaWNvbl85ZTg5OTVlYjZkZDk0MDZmOTExN2NhYzRjMmUxOWIyYyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzgwNDVjM2M0NTAyZTQ1OGFiMWU4Yjc4MWRjYmJlNDhkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2RlNWQzM2RlODhhMzQzMzJiMWJlOTY1ZDNlMTc3NTg1ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9kZTVkMzNkZTg4YTM0MzMyYjFiZTk2NWQzZTE3NzU4NSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84MDQ1YzNjNDUwMmU0NThhYjFlOGI3ODFkY2JiZTQ4ZC5zZXRDb250ZW50KGh0bWxfZGU1ZDMzZGU4OGEzNDMzMmIxYmU5NjVkM2UxNzc1ODUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9jNWYwYTQxZWViZGE0OTZlOTUzYjA3NGE3NDY4ZGMzMC5iaW5kUG9wdXAocG9wdXBfODA0NWMzYzQ1MDJlNDU4YWIxZThiNzgxZGNiYmU0OGQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl85NDczNjY3N2QzYjU0NTQzOGUyZDZmMWE2YTZkOTdhYSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTEzLC0xMjIuNDY5OTVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF85NTFlZTEwZDU0NmU0OTcyOWVmNmU3MzM2MzIzNDNmOSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8zZjRmYjkyYzVhMzY0YzRmOTgzZjNhYzE5ZjZmY2UwNyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzk0NzM2Njc3ZDNiNTQ1NDM4ZTJkNmYxYTZhNmQ5N2FhLnNldEljb24oaWNvbl8zZjRmYjkyYzVhMzY0YzRmOTgzZjNhYzE5ZjZmY2UwNyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzA2NDY1YTg2ZTk2OTRjYmU5MThmNzE0ZDUwMzU2Mzg4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzhiNTE4YmZkYzFlMzQ5ZDhiNGUzNDk3YTgxZjg2NGVmID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF84YjUxOGJmZGMxZTM0OWQ4YjRlMzQ5N2E4MWY4NjRlZiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgTGFtcHMgUGx1czwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wNjQ2NWE4NmU5Njk0Y2JlOTE4ZjcxNGQ1MDM1NjM4OC5zZXRDb250ZW50KGh0bWxfOGI1MThiZmRjMWUzNDlkOGI0ZTM0OTdhODFmODY0ZWYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl85NDczNjY3N2QzYjU0NTQzOGUyZDZmMWE2YTZkOTdhYS5iaW5kUG9wdXAocG9wdXBfMDY0NjVhODZlOTY5NGNiZTkxOGY3MTRkNTAzNTYzODgpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9jZjYxOWUyNDgxZTY0MTNhOGY1OGM5NWRjMzhmZTA4ZSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MzcxLC0xMjIuNDgzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfOTUxZWUxMGQ1NDZlNDk3MjllZjZlNzMzNjMyMzQzZjkpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNTdmMTYzODExNzk5NDAwNzk4YWVhMGJhNWQ4ODg0MzYgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9jZjYxOWUyNDgxZTY0MTNhOGY1OGM5NWRjMzhmZTA4ZS5zZXRJY29uKGljb25fNTdmMTYzODExNzk5NDAwNzk4YWVhMGJhNWQ4ODg0MzYpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hNDVhYjlhZWFhNWQ0MjllYTRiN2E5NDc5YWIwNzU4MyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hODI3OTQ2MWZlNGI0N2U4YmIwMDMzYmViMGQ3ZjZhZCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYTgyNzk0NjFmZTRiNDdlOGJiMDAzM2JlYjBkN2Y2YWQiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFBpenpldHRhPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2E0NWFiOWFlYWE1ZDQyOWVhNGI3YTk0NzlhYjA3NTgzLnNldENvbnRlbnQoaHRtbF9hODI3OTQ2MWZlNGI0N2U4YmIwMDMzYmViMGQ3ZjZhZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2NmNjE5ZTI0ODFlNjQxM2E4ZjU4Yzk1ZGMzOGZlMDhlLmJpbmRQb3B1cChwb3B1cF9hNDVhYjlhZWFhNWQ0MjllYTRiN2E5NDc5YWIwNzU4Myk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzU2MzFjMzI4Mzk1NzQ1MDBiOWZmMjk0YTE1M2ZlZmNjID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgyNzgsLTEyMi40NjM1MV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzk1MWVlMTBkNTQ2ZTQ5NzI5ZWY2ZTczMzYzMjM0M2Y5KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2I2YWFlNjhjYjI5YTRlMzJiYjBjODVmMDY4Y2NmMzNhID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNTYzMWMzMjgzOTU3NDUwMGI5ZmYyOTRhMTUzZmVmY2Muc2V0SWNvbihpY29uX2I2YWFlNjhjYjI5YTRlMzJiYjBjODVmMDY4Y2NmMzNhKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMGIzZTc5NzZhMDE5NDgwYWJlNzY3OGNlZTczY2NhYjYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMTFiZTA4NzFjODUyNGJmNDg4ODYwYjIwNGFlMjFhMjggPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzExYmUwODcxYzg1MjRiZjQ4ODg2MGIyMDRhZTIxYTI4IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBUb3kgQm9hdDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wYjNlNzk3NmEwMTk0ODBhYmU3Njc4Y2VlNzNjY2FiNi5zZXRDb250ZW50KGh0bWxfMTFiZTA4NzFjODUyNGJmNDg4ODYwYjIwNGFlMjFhMjgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl81NjMxYzMyODM5NTc0NTAwYjlmZjI5NGExNTNmZWZjYy5iaW5kUG9wdXAocG9wdXBfMGIzZTc5NzZhMDE5NDgwYWJlNzY3OGNlZTczY2NhYjYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9hMGE4YzI0NzU1Mjk0MDc5OWI3ODk0Y2JiYmEwNzYzYyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NjIxLC0xMjIuNDUxODRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF85NTFlZTEwZDU0NmU0OTcyOWVmNmU3MzM2MzIzNDNmOSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl80OWJhZmE4ZTRiMmU0YmEzOTk5YmMzMTRiNDJjMmFlNyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2EwYThjMjQ3NTUyOTQwNzk5Yjc4OTRjYmJiYTA3NjNjLnNldEljb24oaWNvbl80OWJhZmE4ZTRiMmU0YmEzOTk5YmMzMTRiNDJjMmFlNyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzJkNzk1NjA1YWMxMDQ4Y2Y5N2EyOGRjN2MxZGIwM2IxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Y2NjQzMjZmNmM4NTQwYzRhNzg5MzA1NjU0MmJiMGRhID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9mNjY0MzI2ZjZjODU0MGM0YTc4OTMwNTY1NDJiYjBkYSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgTm9haCYjMzk7cyBCYWdlbHM8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMmQ3OTU2MDVhYzEwNDhjZjk3YTI4ZGM3YzFkYjAzYjEuc2V0Q29udGVudChodG1sX2Y2NjQzMjZmNmM4NTQwYzRhNzg5MzA1NjU0MmJiMGRhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfYTBhOGMyNDc1NTI5NDA3OTliNzg5NGNiYmJhMDc2M2MuYmluZFBvcHVwKHBvcHVwXzJkNzk1NjA1YWMxMDQ4Y2Y5N2EyOGRjN2MxZGIwM2IxKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMWZhMTliMDAxMDFmNGU2N2I4YmNlYjZjZDc5Y2ZiNjIgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzU1OCwtMTIyLjQ1ODMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfOTUxZWUxMGQ1NDZlNDk3MjllZjZlNzMzNjMyMzQzZjkpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fOWU2M2NkMjdmYTVmNDdjNjkzZGMxMzUxMzJmZjllYjMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8xZmExOWIwMDEwMWY0ZTY3YjhiY2ViNmNkNzljZmI2Mi5zZXRJY29uKGljb25fOWU2M2NkMjdmYTVmNDdjNjkzZGMxMzUxMzJmZjllYjMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mNTYyNTljZWQ1ZDg0OTZkOTI2NjM2ZWQxMTRkYTllMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84YTkzMzc1NWRmNWI0OTBmYjkxOGI2NGFlZTU5ZWZjZSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOGE5MzM3NTVkZjViNDkwZmI5MThiNjRhZWU1OWVmY2UiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEFyZ3VlbGxvIE1hcmtldDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mNTYyNTljZWQ1ZDg0OTZkOTI2NjM2ZWQxMTRkYTllMi5zZXRDb250ZW50KGh0bWxfOGE5MzM3NTVkZjViNDkwZmI5MThiNjRhZWU1OWVmY2UpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8xZmExOWIwMDEwMWY0ZTY3YjhiY2ViNmNkNzljZmI2Mi5iaW5kUG9wdXAocG9wdXBfZjU2MjU5Y2VkNWQ4NDk2ZDkyNjYzNmVkMTE0ZGE5ZTIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl85ZjYxN2JhNTJjNGU0MWVjOGQ0ZWVjOGM2YmUzZTYzZSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3MDAyLC0xMjIuNDY1NjFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF85NTFlZTEwZDU0NmU0OTcyOWVmNmU3MzM2MzIzNDNmOSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8yOTdlMzQwZThmOGU0NDE0OWNmYzI5ZDc5MGY5Mzk5NSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzlmNjE3YmE1MmM0ZTQxZWM4ZDRlZWM4YzZiZTNlNjNlLnNldEljb24oaWNvbl8yOTdlMzQwZThmOGU0NDE0OWNmYzI5ZDc5MGY5Mzk5NSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzRjYjI3MzY4ZGM1ZjQ1NDNhNGRiZGQyZTQ5MTQ3M2ViID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzdhYzQ3YmI5MTY3NTRkYjJiMDlkNjE1MTE3YzYyNjYzID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF83YWM0N2JiOTE2NzU0ZGIyYjA5ZDYxNTExN2M2MjY2MyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgZGUgWW91bmcgTXVzZXVtPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzRjYjI3MzY4ZGM1ZjQ1NDNhNGRiZGQyZTQ5MTQ3M2ViLnNldENvbnRlbnQoaHRtbF83YWM0N2JiOTE2NzU0ZGIyYjA5ZDYxNTExN2M2MjY2Myk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzlmNjE3YmE1MmM0ZTQxZWM4ZDRlZWM4YzZiZTNlNjNlLmJpbmRQb3B1cChwb3B1cF80Y2IyNzM2OGRjNWY0NTQzYTRkYmRkMmU0OTE0NzNlYik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lXzhhZDg4MThkM2FmNDQ4MzE4MWZmY2FlMTUyNjM5NGEwID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdLCBbMzcuNzgwNTI5LCAtMTIyLjQ2NDI2NF0sIFszNy43ODA5NjcsIC0xMjIuNDY0Mjk1XSwgWzM3Ljc4MDkxOCwgLTEyMi40NjUzNjNdLCBbMzcuNzgwOTAyLCAtMTIyLjQ2NTcxNF0sIFszNy43ODA4NjgsIC0xMjIuNDY2NDM5XSwgWzM3Ljc4MDg1MywgLTEyMi40NjY3OV0sIFszNy43ODA4MjIsIC0xMjIuNDY3NTA3XSwgWzM3Ljc4MDc3MywgLTEyMi40Njg1NzVdLCBbMzcuNzgwNzIzLCAtMTIyLjQ2OTY1MV0sIFszNy43ODA4NDUsIC0xMjIuNDY5NjU4XSwgWzM3Ljc4MTE1LCAtMTIyLjQ2OTcwNF0sIFszNy43ODExNSwgLTEyMi40Njk3MDRdLCBbMzcuNzgyMzgyLCAtMTIyLjQ2OTc2NV0sIFszNy43ODI3MDcsIC0xMjIuNDY5Nzg4XSwgWzM3Ljc4MjY2MSwgLTEyMi40NzA4NjRdLCBbMzcuNzgyNjExLCAtMTIyLjQ3MTkzMl0sIFszNy43ODI2MDQsIC0xMjIuNDcyMV0sIFszNy43ODI1OTIsIC0xMjIuNDcyMzk3XSwgWzM3Ljc4MjU4NSwgLTEyMi40NzI1NDJdLCBbMzcuNzgyNTY2LCAtMTIyLjQ3MzAwOF0sIFszNy43ODI1MTIsIC0xMjIuNDc0MTI5XSwgWzM3Ljc4MjQ1OSwgLTEyMi40NzUyNTFdLCBbMzcuNzgyNDA5LCAtMTIyLjQ3NjMxOV0sIFszNy43ODIzNjMsIC0xMjIuNDc3Mzk1XSwgWzM3Ljc4MjMxNCwgLTEyMi40Nzg0NjNdLCBbMzcuNzgyMjY0LCAtMTIyLjQ3OTUzMV0sIFszNy43ODIyMTUsIC0xMjIuNDgwNjA3XSwgWzM3Ljc4MjE2OSwgLTEyMi40ODE2NzVdLCBbMzcuNzgyMTE5LCAtMTIyLjQ4Mjc1XSwgWzM3Ljc4MzcxOCwgLTEyMi40ODI5MDNdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODIxMTksIC0xMjIuNDgyNzVdLCBbMzcuNzgyMTY5LCAtMTIyLjQ4MTY3NV0sIFszNy43ODIyMTUsIC0xMjIuNDgwNjA3XSwgWzM3Ljc4MjI2NCwgLTEyMi40Nzk1MzFdLCBbMzcuNzgyMzE0LCAtMTIyLjQ3ODQ2M10sIFszNy43ODIzNjMsIC0xMjIuNDc3Mzk1XSwgWzM3Ljc4MjQwOSwgLTEyMi40NzYzMTldLCBbMzcuNzgyNDU5LCAtMTIyLjQ3NTI1MV0sIFszNy43ODI1MTIsIC0xMjIuNDc0MTI5XSwgWzM3Ljc4MjU2NiwgLTEyMi40NzMwMDhdLCBbMzcuNzgyNTg1LCAtMTIyLjQ3MjU0Ml0sIFszNy43ODI1OTIsIC0xMjIuNDcyMzk3XSwgWzM3Ljc4MjYwNCwgLTEyMi40NzIxXSwgWzM3Ljc4MjYxMSwgLTEyMi40NzE5MzJdLCBbMzcuNzgyNjYxLCAtMTIyLjQ3MDg2NF0sIFszNy43ODI3MDcsIC0xMjIuNDY5Nzg4XSwgWzM3Ljc4Mjc1NiwgLTEyMi40Njg3Ml0sIFszNy43ODI4MDYsIC0xMjIuNDY3NjUyXSwgWzM3Ljc4Mjg1NSwgLTEyMi40NjY1ODRdLCBbMzcuNzgyOTAxLCAtMTIyLjQ2NTUwOF0sIFszNy43ODI5NTEsIC0xMjIuNDY0NDRdLCBbMzcuNzgzLCAtMTIyLjQ2MzM3Ml0sIFszNy43ODI3OTEsIC0xMjIuNDYzNDAyXSwgWzM3Ljc4Mjc5MSwgLTEyMi40NjM0MDJdLCBbMzcuNzgzLCAtMTIyLjQ2MzM3Ml0sIFszNy43ODQ4NjYsIC0xMjIuNDYzNTAxXSwgWzM3Ljc4NTEzNywgLTEyMi40NjM1MjRdLCBbMzcuNzg1Mjc0LCAtMTIyLjQ2MjQ1Nl0sIFszNy43ODU0MDgsIC0xMjIuNDYxMzk2XSwgWzM3Ljc4NTU0NSwgLTEyMi40NjAzMjhdLCBbMzcuNzg1Njg2LCAtMTIyLjQ1OTIxNF0sIFszNy43ODU4MzEsIC0xMjIuNDU4MDY5XSwgWzM3Ljc4NTk3MiwgLTEyMi40NTY5NzhdLCBbMzcuNzg2MDAzLCAtMTIyLjQ1NjcxMV0sIFszNy43ODYxMDksIC0xMjIuNDU1ODg3XSwgWzM3Ljc4NjIxMiwgLTEyMi40NTUwNjNdLCBbMzcuNzg2MjUxLCAtMTIyLjQ1NDc4OV0sIFszNy43ODYzMTIsIC0xMjIuNDU0M10sIFszNy43ODYzODgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NjQxOCwgLTEyMi40NTM0MjNdLCBbMzcuNzg2NDMsIC0xMjIuNDUzMzI0XSwgWzM3Ljc4NjYyNCwgLTEyMi40NTE3NzVdLCBbMzcuNzg2NDc2LCAtMTIyLjQ1MTc0NV0sIFszNy43ODYyMzksIC0xMjIuNDUxNjk5XSwgWzM3Ljc4NjIzOSwgLTEyMi40NTE2OTldLCBbMzcuNzg1OTM0LCAtMTIyLjQ1MTYzXSwgWzM3Ljc4NTkzNCwgLTEyMi40NTE2MzhdLCBbMzcuNzg1ODc3LCAtMTIyLjQ1MjA4XSwgWzM3Ljc4NTc3LCAtMTIyLjQ1MjkyXSwgWzM3Ljc4NTcyNCwgLTEyMi40NTMyNzhdLCBbMzcuNzg1NzE3LCAtMTIyLjQ1MzM3N10sIFszNy43ODU3MTMsIC0xMjIuNDUzNDMxXSwgWzM3Ljc4NTcwNSwgLTEyMi40NTM0OTldLCBbMzcuNzg1Njk0LCAtMTIyLjQ1MzU2XSwgWzM3Ljc4NTY4MiwgLTEyMi40NTM2MTRdLCBbMzcuNzg1NjU5LCAtMTIyLjQ1MzY2XSwgWzM3Ljc4NTYzMywgLTEyMi40NTM2OThdLCBbMzcuNzg1NTk0LCAtMTIyLjQ1MzcyOF0sIFszNy43ODU1NTYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NTUxMSwgLTEyMi40NTM3NTldLCBbMzcuNzg1NDY1LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODUzNTgsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTIzNiwgLTEyMi40NTM3NTldLCBbMzcuNzg1MTA2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODQ5NzYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NDg1MSwgLTEyMi40NTM3NDNdLCBbMzcuNzg0NzMyLCAtMTIyLjQ1MzczNl0sIFszNy43ODQ2MTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NDQ5NiwgLTEyMi40NTM3MTNdLCBbMzcuNzg0Mzc4LCAtMTIyLjQ1MzY5OF0sIFszNy43ODQyNjcsIC0xMjIuNDUzNjgyXSwgWzM3Ljc4NDE2OCwgLTEyMi40NTM2NjddLCBbMzcuNzg0MDU3LCAtMTIyLjQ1MzY1Ml0sIFszNy43ODM5NTQsIC0xMjIuNDUzNjM3XSwgWzM3Ljc4MTc4NywgLTEyMi40NTMyMDJdLCBbMzcuNzgxNjY5LCAtMTIyLjQ1MzE3OV0sIFszNy43ODAzNjQsIC0xMjIuNDUyOTJdLCBbMzcuNzgwMjQyLCAtMTIyLjQ1Mzg5Nl0sIFszNy43ODAxMiwgLTEyMi40NTQ4MzRdLCBbMzcuNzgwMDk3LCAtMTIyLjQ1NTAxOF0sIFszNy43ODAwMzYsIC0xMjIuNDU1NDkxXSwgWzM3Ljc4MDAyOSwgLTEyMi40NTU1NTldLCBbMzcuNzgwMDE3LCAtMTIyLjQ1NTYyXSwgWzM3Ljc4MDAwNiwgLTEyMi40NTU2ODFdLCBbMzcuNzc5OTkxLCAtMTIyLjQ1NTczNV0sIFszNy43Nzk5NDUsIC0xMjIuNDU1ODU3XSwgWzM3Ljc3OTg5OSwgLTEyMi40NTU5ODddLCBbMzcuNzc5ODA4LCAtMTIyLjQ1NjIzOF0sIFszNy43Nzk3MDgsIC0xMjIuNDU2NTEzXSwgWzM3Ljc3OTY3LCAtMTIyLjQ1NjYxMl0sIFszNy43Nzk2NDQsIC0xMjIuNDU2Njg4XSwgWzM3Ljc3OTYyMSwgLTEyMi40NTY3NTddLCBbMzcuNzc5NjA1LCAtMTIyLjQ1NjgzM10sIFszNy43Nzk1OTQsIC0xMjIuNDU2OTAyXSwgWzM3Ljc3OTU3OSwgLTEyMi40NTcwMDFdLCBbMzcuNzc5NDY4LCAtMTIyLjQ1Njk3OF0sIFszNy43Nzk0MDcsIC0xMjIuNDU2OTcxXSwgWzM3Ljc3OTM4LCAtMTIyLjQ1Njk3MV0sIFszNy43NzkzNSwgLTEyMi40NTY5NzFdLCBbMzcuNzc5MzE5LCAtMTIyLjQ1Njk3OF0sIFszNy43NzkyOTMsIC0xMjIuNDU2OTk0XSwgWzM3Ljc3OTI1MSwgLTEyMi40NTcwMTZdLCBbMzcuNzc5MjE2LCAtMTIyLjQ1NzA1NV0sIFszNy43NzkxNzQsIC0xMjIuNDU3MV0sIFszNy43NzkxMzIsIC0xMjIuNDU3MTQ2XSwgWzM3Ljc3OTA5OCwgLTEyMi40NTcxOTJdLCBbMzcuNzc5MDcxLCAtMTIyLjQ1NzIzXSwgWzM3Ljc3OTA1NiwgLTEyMi40NTcyNjFdLCBbMzcuNzc5MDMzLCAtMTIyLjQ1NzMyMl0sIFszNy43NzkwMTQsIC0xMjIuNDU3Mzc1XSwgWzM3Ljc3ODk0NSwgLTEyMi40NTc5MzJdLCBbMzcuNzc4OTM4LCAtMTIyLjQ1Nzk3XSwgWzM3Ljc3ODkzLCAtMTIyLjQ1ODAwOF0sIFszNy43Nzg5MTUsIC0xMjIuNDU4MDU0XSwgWzM3Ljc3ODg5MiwgLTEyMi40NTgwOTJdLCBbMzcuNzc4ODczLCAtMTIyLjQ1ODEwN10sIFszNy43Nzg4NSwgLTEyMi40NTgxMjNdLCBbMzcuNzc4ODI3LCAtMTIyLjQ1ODEzXSwgWzM3Ljc3ODc5NywgLTEyMi40NTgxMjNdLCBbMzcuNzc4NzI4LCAtMTIyLjQ1ODEzXSwgWzM3Ljc3ODA5MSwgLTEyMi40NTgwMDFdLCBbMzcuNzc4MDExLCAtMTIyLjQ1ODY1N10sIFszNy43Nzc3MzYsIC0xMjIuNDU4NjQyXSwgWzM3Ljc3NzU5NSwgLTEyMi40NTg2MzRdLCBbMzcuNzc3Mjg2LCAtMTIyLjQ1ODYxMV0sIFszNy43NzcxMjYsIC0xMjIuNDU4NTk2XSwgWzM3Ljc3Njg0NCwgLTEyMi40NTg1NzNdLCBbMzcuNzc2MTg3LCAtMTIyLjQ1ODUyN10sIFszNy43NzYxMTksIC0xMjIuNDU4NTI3XSwgWzM3Ljc3NTYxNSwgLTEyMi40NTg0ODldLCBbMzcuNzc1NTY5LCAtMTIyLjQ1ODUwNF0sIFszNy43NzU1NjksIC0xMjIuNDU4NTA0XSwgWzM3Ljc3NTI0NSwgLTEyMi40NTg0NThdLCBbMzcuNzc0OTgyLCAtMTIyLjQ1ODQ0M10sIFszNy43NzQ3MDMsIC0xMjIuNDU4NDJdLCBbMzcuNzc0NDEsIC0xMjIuNDU4NDA1XSwgWzM3Ljc3NDI5OSwgLTEyMi40NTgzOV0sIFszNy43NzQyOTksIC0xMjIuNDU4NDU4XSwgWzM3Ljc3NDI5OSwgLTEyMi40NTg1MTJdLCBbMzcuNzc0MTM5LCAtMTIyLjQ1ODQ5N10sIFszNy43NzQwMDIsIC0xMjIuNDU4NTI3XSwgWzM3Ljc3Mzg0NSwgLTEyMi40NTg2MjZdLCBbMzcuNzczNTcxLCAtMTIyLjQ1ODg5M10sIFszNy43NzMyNzMsIC0xMjIuNDU5MTUzXSwgWzM3Ljc3MzIwOCwgLTEyMi40NTkxNDVdLCBbMzcuNzczMTkzLCAtMTIyLjQ1OTI2N10sIFszNy43NzMxNDcsIC0xMjIuNDU5NjFdLCBbMzcuNzczMTE3LCAtMTIyLjQ1OTgyNF0sIFszNy43NzMwMzYsIC0xMjIuNDYwMzk2XSwgWzM3Ljc3MzAxNCwgLTEyMi40NjA1MTFdLCBbMzcuNzcyOTg3LCAtMTIyLjQ2MDYxOF0sIFszNy43NzI5NTMsIC0xMjIuNDYwNzE3XSwgWzM3Ljc3MjkxOCwgLTEyMi40NjA3OTNdLCBbMzcuNzcyODcyLCAtMTIyLjQ2MDg3N10sIFszNy43NzI4MTksIC0xMjIuNDYwOTQ2XSwgWzM3Ljc3Mjc2NiwgLTEyMi40NjA5OTldLCBbMzcuNzcyNzIsIC0xMjIuNDYxMDM3XSwgWzM3Ljc3MjY1OSwgLTEyMi40NjEwODNdLCBbMzcuNzcyNzA4LCAtMTIyLjQ2MTE0NF0sIFszNy43NzI2NTUsIC0xMjIuNDYxMTc1XSwgWzM3Ljc3MjU3OSwgLTEyMi40NjEyMTNdLCBbMzcuNzcyNTQ4LCAtMTIyLjQ2MTIyOF0sIFszNy43NzI0MDcsIC0xMjIuNDYxMzM1XSwgWzM3Ljc3MjI3NCwgLTEyMi40NjE1MV0sIFszNy43NzIxNzgsIC0xMjIuNDYxNzE2XSwgWzM3Ljc3MjA4MywgLTEyMi40NjE5M10sIFszNy43NzE5NjUsIC0xMjIuNDYyMDldLCBbMzcuNzcxOTAzLCAtMTIyLjQ2MjE0M10sIFszNy43NzE5MTUsIC0xMjIuNDYyMTgyXSwgWzM3Ljc3MTkzNCwgLTEyMi40NjIyNjZdLCBbMzcuNzcxODM1LCAtMTIyLjQ2MjMwNF0sIFszNy43NzE3NTksIC0xMjIuNDYyMzQyXSwgWzM3Ljc3MTY4NiwgLTEyMi40NjIzNTddLCBbMzcuNzcxNzM5LCAtMTIyLjQ2MjUxXSwgWzM3Ljc3MTY1MiwgLTEyMi40NjI1NzFdLCBbMzcuNzcxNDgsIC0xMjIuNDYyNjU1XSwgWzM3Ljc3MTQ1NywgLTEyMi40NjI3XSwgWzM3Ljc3MTQ0MiwgLTEyMi40NjI4NTNdLCBbMzcuNzcxNDI3LCAtMTIyLjQ2MzA3NF0sIFszNy43NzEyODYsIC0xMjIuNDYzMTJdLCBbMzcuNzcxMjA5LCAtMTIyLjQ2MzI1XSwgWzM3Ljc3MTE3NSwgLTEyMi40NjM1MDldLCBbMzcuNzcxMTcxLCAtMTIyLjQ2MzczOF0sIFszNy43NzExNTYsIC0xMjIuNDYzOTU5XSwgWzM3Ljc3MTExNCwgLTEyMi40NjQxMjddLCBbMzcuNzcxMDE4LCAtMTIyLjQ2NDMxOF0sIFszNy43NzA5MzEsIC0xMjIuNDY0NTc3XSwgWzM3Ljc3MDYyNiwgLTEyMi40NjUwNV0sIFszNy43NzA0MjMsIC0xMjIuNDY1MTA0XSwgWzM3Ljc3MDMxMywgLTEyMi40NjUwOTZdLCBbMzcuNzcwMjM2LCAtMTIyLjQ2NDk1MV0sIFszNy43NzAwOTIsIC0xMjIuNDY0Nzc2XSwgWzM3Ljc2OTk1LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk4MDIsIC0xMjIuNDY0NDg2XSwgWzM3Ljc2OTcyNSwgLTEyMi40NjQ0N10sIFszNy43Njk2OTUsIC0xMjIuNDY0NTddLCBbMzcuNzY5NzYsIC0xMjIuNDY0NjA4XSwgWzM3Ljc2OTc5OCwgLTEyMi40NjQ2NjldLCBbMzcuNzY5ODMyLCAtMTIyLjQ2NDc5OF0sIFszNy43Njk4NjMsIC0xMjIuNDY0ODgyXSwgWzM3Ljc2OTk1OCwgLTEyMi40NjUwMTJdLCBbMzcuNzY5OTU4LCAtMTIyLjQ2NTAxMl0sIFszNy43Njk4NjMsIC0xMjIuNDY0ODgyXSwgWzM3Ljc2OTgzMiwgLTEyMi40NjQ3OThdLCBbMzcuNzY5Nzk4LCAtMTIyLjQ2NDY2OV0sIFszNy43Njk3NiwgLTEyMi40NjQ2MDhdLCBbMzcuNzY5Njk1LCAtMTIyLjQ2NDU3XSwgWzM3Ljc2OTcyNSwgLTEyMi40NjQ0N10sIFszNy43Njk4MDIsIC0xMjIuNDY0NDg2XSwgWzM3Ljc2OTk1LCAtMTIyLjQ2NDYwOF0sIFszNy43NzAwOTIsIC0xMjIuNDY0Nzc2XSwgWzM3Ljc3MDIzNiwgLTEyMi40NjQ5NTFdLCBbMzcuNzcwMzEzLCAtMTIyLjQ2NTA5Nl0sIFszNy43NzA0MjMsIC0xMjIuNDY1MTA0XSwgWzM3Ljc3MDYyNiwgLTEyMi40NjUwNV0sIFszNy43NzA3OTcsIC0xMjIuNDY1MTM0XSwgWzM3Ljc3MDk0NiwgLTEyMi40NjUxOTVdLCBbMzcuNzcxMDYsIC0xMjIuNDY1MTg4XSwgWzM3Ljc3MTIyNCwgLTEyMi40NjUxODhdLCBbMzcuNzcxMzY2LCAtMTIyLjQ2NTE5NV0sIFszNy43NzE1NzUsIC0xMjIuNDY1MjY0XSwgWzM3Ljc3MTc2NiwgLTEyMi40NjUyNzldLCBbMzcuNzcxOTY1LCAtMTIyLjQ2NTMxXSwgWzM3Ljc3MjExMywgLTEyMi40NjUwNjZdLCBbMzcuNzcyMTU5LCAtMTIyLjQ2NDk3NF0sIFszNy43NzIxODIsIC0xMjIuNDY0ODI5XSwgWzM3Ljc3MjI3LCAtMTIyLjQ2NDcxNV0sIFszNy43NzIzMzEsIC0xMjIuNDY0Njk5XSwgWzM3Ljc3MjM4NCwgLTEyMi40NjQ2ODRdLCBbMzcuNzcyNDYsIC0xMjIuNDY0NjU0XSwgWzM3Ljc3MjQzLCAtMTIyLjQ2NDUyNF0sIFszNy43NzIzOTksIC0xMjIuNDY0NDAyXSwgWzM3Ljc3MjM2NSwgLTEyMi40NjQyNzJdLCBbMzcuNzcyMzA4LCAtMTIyLjQ2NDA3NF0sIFszNy43NzIzNjksIC0xMjIuNDY0MDQzXSwgWzM3Ljc3MjQzLCAtMTIyLjQ2NDAxM10sIFszNy43NzI1MjksIC0xMjIuNDY0MDI4XSwgWzM3Ljc3MjYwOSwgLTEyMi40NjM5OTddLCBbMzcuNzcyODcyLCAtMTIyLjQ2Mzg5OF0sIFszNy43NzI5MywgLTEyMi40NjM4Nl0sIFszNy43NzI5OTEsIC0xMjIuNDYzODE0XSwgWzM3Ljc3MzEwNSwgLTEyMi40NjM3NDZdLCBbMzcuNzczMTg5LCAtMTIyLjQ2MzczOF0sIFszNy43NzMyODEsIC0xMjIuNDYzNzM4XSwgWzM3Ljc3MzQwNiwgLTEyMi40NjM3NjldLCBbMzcuNzczNDE0LCAtMTIyLjQ2MzcyM10sIFszNy43NzM0NDgsIC0xMjIuNDYzNjY5XSwgWzM3Ljc3MzQ5LCAtMTIyLjQ2MzY2OV0sIFszNy43NzM1MzYsIC0xMjIuNDYzNjY5XSwgWzM3Ljc3MzY1MSwgLTEyMi40NjM2NjJdLCBbMzcuNzczNjM1LCAtMTIyLjQ2Mzc2OV0sIFszNy43NzQyLCAtMTIyLjQ2MzgwN10sIFszNy43NzUzNzEsIC0xMjIuNDYzODkxXSwgWzM3Ljc3NTQ1OSwgLTEyMi40NjM4OThdLCBbMzcuNzc3MjMzLCAtMTIyLjQ2NDAyOF0sIFszNy43NzkxMDYsIC0xMjIuNDY0MTU4XV0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFwXzk1MWVlMTBkNTQ2ZTQ5NzI5ZWY2ZTczMzYzMjM0M2Y5LmFkZExheWVyKHBvbHlfbGluZV84YWQ4ODE4ZDNhZjQ0ODMxODFmZmNhZTE1MjYzOTRhMCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvc2NyaXB0PgogICAgICAgIA==" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>
[Full Size]({{ site.baseurl }}/images/optimize_stops_1_person_walk.html)




```python
bike_opt = optimize_stops(home, stops, stop_labels = stop_labels,costing = 'bicycle')
print bike_opt['order']
print str(bike_opt['time']) + ' minutes'
print str(bike_opt['length']) + ' km'
```

    ['Home', 'Pizzetta', 'Lamps Plus', 'Toy Boat', "Noah's Bagels", 'Arguello Market', 'de Young Museum', 'Home']
    29 minutes
    11.097 km
    


```python
bike_1_map=plot_stops(bike_opt['points'][:-1], zoom_level = 14, tiles = 'Stamen Watercolor', \
                labels = bike_opt['order'][:-1], line_coords = bike_opt['line'], point_colors=['black']+len(stops)*['red'])
bike_1_map
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwXzFiNzI2MjZmM2JlYTQxMDFiMGRhNTJjNWMxNjUwOWNjIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF8xYjcyNjI2ZjNiZWE0MTAxYjBkYTUyYzVjMTY1MDljYyIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF8xYjcyNjI2ZjNiZWE0MTAxYjBkYTUyYzVjMTY1MDljYyA9IEwubWFwKCdtYXBfMWI3MjYyNmYzYmVhNDEwMWIwZGE1MmM1YzE2NTA5Y2MnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfMzY2MWQ5M2E2NzIxNDcwNjllZmY0ZmI5NTllMDg5MjkgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF8xYjcyNjI2ZjNiZWE0MTAxYjBkYTUyYzVjMTY1MDljYyk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfZjUwZGNkMDM3YTM5NDJmNWE2YTljMjViNGZjMDM4YmYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMWI3MjYyNmYzYmVhNDEwMWIwZGE1MmM1YzE2NTA5Y2MpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZTI0MTg2OThmOTYwNGU1NmJmNDM0MmQzNWM4NTE3ZmYgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2Y1MGRjZDAzN2EzOTQyZjVhNmE5YzI1YjRmYzAzOGJmLnNldEljb24oaWNvbl9lMjQxODY5OGY5NjA0ZTU2YmY0MzQyZDM1Yzg1MTdmZik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2FhMzVjODEyNzQxYTQ3Y2U4ZjMxYjM4MmJjNDhjYWFhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzkzMDE3YzQ2Njg4OTRiYTg4YjFkZGM1ZjVmZTY2YWE2ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF85MzAxN2M0NjY4ODk0YmE4OGIxZGRjNWY1ZmU2NmFhNiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hYTM1YzgxMjc0MWE0N2NlOGYzMWIzODJiYzQ4Y2FhYS5zZXRDb250ZW50KGh0bWxfOTMwMTdjNDY2ODg5NGJhODhiMWRkYzVmNWZlNjZhYTYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9mNTBkY2QwMzdhMzk0MmY1YTZhOWMyNWI0ZmMwMzhiZi5iaW5kUG9wdXAocG9wdXBfYWEzNWM4MTI3NDFhNDdjZThmMzFiMzgyYmM0OGNhYWEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl82ODQzOGU0YzE2N2U0OGE4YjU5NjQzNDMwNDBlYTA0ZiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MzcxLC0xMjIuNDgzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMWI3MjYyNmYzYmVhNDEwMWIwZGE1MmM1YzE2NTA5Y2MpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMWYwZTE4NjBhZDczNGU3NGFjMzI2NmU5YWY2MzNkMWYgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl82ODQzOGU0YzE2N2U0OGE4YjU5NjQzNDMwNDBlYTA0Zi5zZXRJY29uKGljb25fMWYwZTE4NjBhZDczNGU3NGFjMzI2NmU5YWY2MzNkMWYpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lMWIxMWRkMDBjZTE0MjhhYmNjMzBmOGQwNWYxZjVlZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81Yzc3YWE4MjY1NTU0ZWI2OTYxNzI1M2QxZTc5OGIwOSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNWM3N2FhODI2NTU1NGViNjk2MTcyNTNkMWU3OThiMDkiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFBpenpldHRhPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2UxYjExZGQwMGNlMTQyOGFiY2MzMGY4ZDA1ZjFmNWVmLnNldENvbnRlbnQoaHRtbF81Yzc3YWE4MjY1NTU0ZWI2OTYxNzI1M2QxZTc5OGIwOSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzY4NDM4ZTRjMTY3ZTQ4YThiNTk2NDM0MzA0MGVhMDRmLmJpbmRQb3B1cChwb3B1cF9lMWIxMWRkMDBjZTE0MjhhYmNjMzBmOGQwNWYxZjVlZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzMzZWI5NWRiMjFhMDRhMzJhNjUwODJiZTEwNDZkMWQ3ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgxMTMsLTEyMi40Njk5NV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzFiNzI2MjZmM2JlYTQxMDFiMGRhNTJjNWMxNjUwOWNjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzY0Y2QwYmZmMmI1OTQwMzA5ZmIzYjBkNGU2ZTlhNmM1ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfMzNlYjk1ZGIyMWEwNGEzMmE2NTA4MmJlMTA0NmQxZDcuc2V0SWNvbihpY29uXzY0Y2QwYmZmMmI1OTQwMzA5ZmIzYjBkNGU2ZTlhNmM1KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmZiOTU4NWQwZmI3NDcxYjkzOTQwNDk2ZmY2NWU1NWYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYWQ5MTJiNWRhYmYxNDdjNjg0M2Q1ODg4NTVjMTVmMTUgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2FkOTEyYjVkYWJmMTQ3YzY4NDNkNTg4ODU1YzE1ZjE1IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBMYW1wcyBQbHVzPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJmYjk1ODVkMGZiNzQ3MWI5Mzk0MDQ5NmZmNjVlNTVmLnNldENvbnRlbnQoaHRtbF9hZDkxMmI1ZGFiZjE0N2M2ODQzZDU4ODg1NWMxNWYxNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzMzZWI5NWRiMjFhMDRhMzJhNjUwODJiZTEwNDZkMWQ3LmJpbmRQb3B1cChwb3B1cF8yZmI5NTg1ZDBmYjc0NzFiOTM5NDA0OTZmZjY1ZTU1Zik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzU4N2MzNGEyY2MyMzRlZTI5ZmJiYWEwMmUxZjhiMDU5ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgyNzgsLTEyMi40NjM1MV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzFiNzI2MjZmM2JlYTQxMDFiMGRhNTJjNWMxNjUwOWNjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzFlMTgyYzJhZTQwOTQ4MzhhOGRhOWNiZDU3NzhiODBkID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNTg3YzM0YTJjYzIzNGVlMjlmYmJhYTAyZTFmOGIwNTkuc2V0SWNvbihpY29uXzFlMTgyYzJhZTQwOTQ4MzhhOGRhOWNiZDU3NzhiODBkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMWQxYTE2ZGIwNWI2NDVkMzkyNDgwYmQxYWEwNmVjMTIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZGFiZDExZWEyODhmNDBlZGJlMmJmMzAzNDU2Mjc0N2QgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2RhYmQxMWVhMjg4ZjQwZWRiZTJiZjMwMzQ1NjI3NDdkIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBUb3kgQm9hdDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xZDFhMTZkYjA1YjY0NWQzOTI0ODBiZDFhYTA2ZWMxMi5zZXRDb250ZW50KGh0bWxfZGFiZDExZWEyODhmNDBlZGJlMmJmMzAzNDU2Mjc0N2QpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl81ODdjMzRhMmNjMjM0ZWUyOWZiYmFhMDJlMWY4YjA1OS5iaW5kUG9wdXAocG9wdXBfMWQxYTE2ZGIwNWI2NDVkMzkyNDgwYmQxYWEwNmVjMTIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl83NzlhZDk3N2QyOGE0NzY1YmYwN2RhZTg1YzkxNTViNiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NjIxLC0xMjIuNDUxODRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8xYjcyNjI2ZjNiZWE0MTAxYjBkYTUyYzVjMTY1MDljYyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9kNzFkMDg5OWFhYmU0NGVmODljZTFlMGM0MjBiYzE3YiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzc3OWFkOTc3ZDI4YTQ3NjViZjA3ZGFlODVjOTE1NWI2LnNldEljb24oaWNvbl9kNzFkMDg5OWFhYmU0NGVmODljZTFlMGM0MjBiYzE3Yik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2E3NjI5OGUzMmM3MTQ4MTQ5MzMxMGQ2MWJiNGFlY2E2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q1ZmJlOWUxOWVhODRiNzg4YTRjNDJmNjJiZGYyZThlID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9kNWZiZTllMTllYTg0Yjc4OGE0YzQyZjYyYmRmMmU4ZSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgTm9haCYjMzk7cyBCYWdlbHM8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTc2Mjk4ZTMyYzcxNDgxNDkzMzEwZDYxYmI0YWVjYTYuc2V0Q29udGVudChodG1sX2Q1ZmJlOWUxOWVhODRiNzg4YTRjNDJmNjJiZGYyZThlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNzc5YWQ5NzdkMjhhNDc2NWJmMDdkYWU4NWM5MTU1YjYuYmluZFBvcHVwKHBvcHVwX2E3NjI5OGUzMmM3MTQ4MTQ5MzMxMGQ2MWJiNGFlY2E2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYTc0ZTBmNDk4ODBiNGQxZTk2MWY0YmE3ZDU2M2QwNjAgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzU1OCwtMTIyLjQ1ODMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMWI3MjYyNmYzYmVhNDEwMWIwZGE1MmM1YzE2NTA5Y2MpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYzliYjU1M2UyZGI4NGQ0ODlmMjUxNDYyZTdhYTExMTIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9hNzRlMGY0OTg4MGI0ZDFlOTYxZjRiYTdkNTYzZDA2MC5zZXRJY29uKGljb25fYzliYjU1M2UyZGI4NGQ0ODlmMjUxNDYyZTdhYTExMTIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yNTk4NjFiMmIwYTk0YjljODcxOGE0ZGY3ZTlhMjhhYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iODU3OTVlYWRlNjk0N2Y1OWZlOTM2OGE2OGNlMmZhMiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYjg1Nzk1ZWFkZTY5NDdmNTlmZTkzNjhhNjhjZTJmYTIiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEFyZ3VlbGxvIE1hcmtldDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yNTk4NjFiMmIwYTk0YjljODcxOGE0ZGY3ZTlhMjhhYy5zZXRDb250ZW50KGh0bWxfYjg1Nzk1ZWFkZTY5NDdmNTlmZTkzNjhhNjhjZTJmYTIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9hNzRlMGY0OTg4MGI0ZDFlOTYxZjRiYTdkNTYzZDA2MC5iaW5kUG9wdXAocG9wdXBfMjU5ODYxYjJiMGE5NGI5Yzg3MThhNGRmN2U5YTI4YWMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl82ZmE1ZDVlNzRkMmE0MTI1YjQyOWNjMWU2YzM1N2NiYSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3MDAyLC0xMjIuNDY1NjFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8xYjcyNjI2ZjNiZWE0MTAxYjBkYTUyYzVjMTY1MDljYyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9jNDRlZTFhNDEzZjk0NjRiYTE0OGYzNWE4MmZlZTYwMSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzZmYTVkNWU3NGQyYTQxMjViNDI5Y2MxZTZjMzU3Y2JhLnNldEljb24oaWNvbl9jNDRlZTFhNDEzZjk0NjRiYTE0OGYzNWE4MmZlZTYwMSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzgyNmI1NGEyMzdhODQ5MjBhNzAzNzljNWIwZGU5YmYyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ZlOGRmZTJmZjA4NDRkOTJhZmFmZDY4YTc4YTY5MmFiID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9mZThkZmUyZmYwODQ0ZDkyYWZhZmQ2OGE3OGE2OTJhYiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgZGUgWW91bmcgTXVzZXVtPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzgyNmI1NGEyMzdhODQ5MjBhNzAzNzljNWIwZGU5YmYyLnNldENvbnRlbnQoaHRtbF9mZThkZmUyZmYwODQ0ZDkyYWZhZmQ2OGE3OGE2OTJhYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzZmYTVkNWU3NGQyYTQxMjViNDI5Y2MxZTZjMzU3Y2JhLmJpbmRQb3B1cChwb3B1cF84MjZiNTRhMjM3YTg0OTIwYTcwMzc5YzViMGRlOWJmMik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lXzY5NDU4MjEzNWY4NjQ3OWM5NTc0ZjI0MjFiMTU1MDI1ID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdLCBbMzcuNzc5MDU2LCAtMTIyLjQ2NTIzM10sIFszNy43NzkwMDYsIC0xMjIuNDY2MzAxXSwgWzM3Ljc3ODk1NywgLTEyMi40NjczNzddLCBbMzcuNzc4OTA3LCAtMTIyLjQ2ODQ0NV0sIFszNy43Nzg4NjEsIC0xMjIuNDY5NTEzXSwgWzM3Ljc3ODgxMiwgLTEyMi40NzA1ODldLCBbMzcuNzc4NzgxLCAtMTIyLjQ3MTIzXSwgWzM3Ljc3ODc2MiwgLTEyMi40NzE2NTddLCBbMzcuNzc4NzU1LCAtMTIyLjQ3MTg0XSwgWzM3Ljc3ODc0MywgLTEyMi40NzIxMjNdLCBbMzcuNzc4NzM2LCAtMTIyLjQ3MjI2XSwgWzM3Ljc3ODcxMywgLTEyMi40NzI3MjVdLCBbMzcuNzc4NjYzLCAtMTIyLjQ3Mzg0N10sIFszNy43Nzg2MSwgLTEyMi40NzQ5NzZdLCBbMzcuNzc4NTY0LCAtMTIyLjQ3NjA0NF0sIFszNy43Nzg1MTQsIC0xMjIuNDc3MTEyXSwgWzM3Ljc3ODQ2NSwgLTEyMi40NzgxODhdLCBbMzcuNzc4NDE1LCAtMTIyLjQ3OTI1Nl0sIFszNy43NzgzNjksIC0xMjIuNDgwMzMyXSwgWzM3Ljc3ODMyLCAtMTIyLjQ4MTRdLCBbMzcuNzc4MjcsIC0xMjIuNDgyNDY4XSwgWzM3Ljc4MDEzMiwgLTEyMi40ODI2MDVdLCBbMzcuNzgwMjU4LCAtMTIyLjQ4MjYxM10sIFszNy43ODE3MzgsIC0xMjIuNDgyNzJdLCBbMzcuNzgyMTE5LCAtMTIyLjQ4Mjc1XSwgWzM3Ljc4MzcxOCwgLTEyMi40ODI5MDNdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODIxMTksIC0xMjIuNDgyNzVdLCBbMzcuNzgyMTY5LCAtMTIyLjQ4MTY3NV0sIFszNy43ODIyMTUsIC0xMjIuNDgwNjA3XSwgWzM3Ljc4MjI2NCwgLTEyMi40Nzk1MzFdLCBbMzcuNzgyMzE0LCAtMTIyLjQ3ODQ2M10sIFszNy43ODIzNjMsIC0xMjIuNDc3Mzk1XSwgWzM3Ljc4MjQwOSwgLTEyMi40NzYzMTldLCBbMzcuNzgyNDU5LCAtMTIyLjQ3NTI1MV0sIFszNy43ODI1MTIsIC0xMjIuNDc0MTI5XSwgWzM3Ljc4MjU2NiwgLTEyMi40NzMwMDhdLCBbMzcuNzgyNTg1LCAtMTIyLjQ3MjU0Ml0sIFszNy43ODI1OTIsIC0xMjIuNDcyMzk3XSwgWzM3Ljc4MjYwNCwgLTEyMi40NzIxXSwgWzM3Ljc4MjYxMSwgLTEyMi40NzE5MzJdLCBbMzcuNzgyNjYxLCAtMTIyLjQ3MDg2NF0sIFszNy43ODI3MDcsIC0xMjIuNDY5Nzg4XSwgWzM3Ljc4MjM4MiwgLTEyMi40Njk3NjVdLCBbMzcuNzgxMTUsIC0xMjIuNDY5NzA0XSwgWzM3Ljc4MTE1LCAtMTIyLjQ2OTcwNF0sIFszNy43ODIzODIsIC0xMjIuNDY5NzY1XSwgWzM3Ljc4MjcwNywgLTEyMi40Njk3ODhdLCBbMzcuNzgyNzU2LCAtMTIyLjQ2ODcyXSwgWzM3Ljc4MjgwNiwgLTEyMi40Njc2NTJdLCBbMzcuNzgyODU1LCAtMTIyLjQ2NjU4NF0sIFszNy43ODI5MDEsIC0xMjIuNDY1NTA4XSwgWzM3Ljc4Mjk1MSwgLTEyMi40NjQ0NF0sIFszNy43ODMsIC0xMjIuNDYzMzcyXSwgWzM3Ljc4Mjc5MSwgLTEyMi40NjM0MDJdLCBbMzcuNzgyNzkxLCAtMTIyLjQ2MzQwMl0sIFszNy43ODMsIC0xMjIuNDYzMzcyXSwgWzM3Ljc4MzA1LCAtMTIyLjQ2MjI5Nl0sIFszNy43ODMwOTYsIC0xMjIuNDYxMjI4XSwgWzM3Ljc4MzE0NSwgLTEyMi40NjAxNTJdLCBbMzcuNzgzMTk1LCAtMTIyLjQ1OTAzMV0sIFszNy43ODM2MTUsIC0xMjIuNDU5MDYxXSwgWzM3Ljc4MzgyNCwgLTEyMi40NTkwNzZdLCBbMzcuNzgzODc4LCAtMTIyLjQ1Nzk0XSwgWzM3Ljc4MzkyNywgLTEyMi40NTY4MzNdLCBbMzcuNzgzOTc3LCAtMTIyLjQ1NTczNV0sIFszNy43ODQwMywgLTEyMi40NTQ2MjhdLCBbMzcuNzg0MDM4LCAtMTIyLjQ1NDQxNV0sIFszNy43ODQwNDksIC0xMjIuNDU0MjI0XSwgWzM3Ljc4NDA1MywgLTEyMi40NTQwMzNdLCBbMzcuNzg0MDU3LCAtMTIyLjQ1Mzg0M10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4NDE2OCwgLTEyMi40NTM2NjddLCBbMzcuNzg0MjY3LCAtMTIyLjQ1MzY4Ml0sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDQ5NiwgLTEyMi40NTM3MTNdLCBbMzcuNzg0NjE0LCAtMTIyLjQ1MzcyOF0sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDg1MSwgLTEyMi40NTM3NDNdLCBbMzcuNzg0OTc2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NTIzNiwgLTEyMi40NTM3NTldLCBbMzcuNzg1MzU4LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTUxMSwgLTEyMi40NTM3NTldLCBbMzcuNzg1NTU2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTYzMywgLTEyMi40NTM2OThdLCBbMzcuNzg1NjU5LCAtMTIyLjQ1MzY2XSwgWzM3Ljc4NTY4MiwgLTEyMi40NTM2MTRdLCBbMzcuNzg1Njk0LCAtMTIyLjQ1MzU2XSwgWzM3Ljc4NTcwNSwgLTEyMi40NTM0OTldLCBbMzcuNzg1NzEzLCAtMTIyLjQ1MzQzMV0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcyNCwgLTEyMi40NTMyNzhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1ODc3LCAtMTIyLjQ1MjA4XSwgWzM3Ljc4NTkxMSwgLTEyMi40NTE3OThdLCBbMzcuNzg1OTExLCAtMTIyLjQ1MTc5OF0sIFszNy43ODU4NzcsIC0xMjIuNDUyMDhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1NzI0LCAtMTIyLjQ1MzI3OF0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcxMywgLTEyMi40NTM0MzFdLCBbMzcuNzg1NzA1LCAtMTIyLjQ1MzQ5OV0sIFszNy43ODU2OTQsIC0xMjIuNDUzNTZdLCBbMzcuNzg1NjgyLCAtMTIyLjQ1MzYxNF0sIFszNy43ODU2NTksIC0xMjIuNDUzNjZdLCBbMzcuNzg1NjMzLCAtMTIyLjQ1MzY5OF0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTU1NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg1NTExLCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTM1OCwgLTEyMi40NTM3NTldLCBbMzcuNzg1MjM2LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NDk3NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg0ODUxLCAtMTIyLjQ1Mzc0M10sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDYxNCwgLTEyMi40NTM3MjhdLCBbMzcuNzg0NDk2LCAtMTIyLjQ1MzcxM10sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDI2NywgLTEyMi40NTM2ODJdLCBbMzcuNzg0MTY4LCAtMTIyLjQ1MzY2N10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4NDA1NywgLTEyMi40NTM4NDNdLCBbMzcuNzg0MDUzLCAtMTIyLjQ1NDAzM10sIFszNy43ODQwNDksIC0xMjIuNDU0MjI0XSwgWzM3Ljc4NDAzOCwgLTEyMi40NTQ0MTVdLCBbMzcuNzg0MDMsIC0xMjIuNDU0NjI4XSwgWzM3Ljc4Mzk3NywgLTEyMi40NTU3MzVdLCBbMzcuNzgzOTI3LCAtMTIyLjQ1NjgzM10sIFszNy43ODM4NzgsIC0xMjIuNDU3OTRdLCBbMzcuNzgzODI0LCAtMTIyLjQ1OTA3Nl0sIFszNy43ODM2MTUsIC0xMjIuNDU5MDYxXSwgWzM3Ljc4MzE5NSwgLTEyMi40NTkwMzFdLCBbMzcuNzgyNzk4LCAtMTIyLjQ1OTAwOF0sIFszNy43ODI3NiwgLTEyMi40NTldLCBbMzcuNzgxODQ4LCAtMTIyLjQ1ODkzOV0sIFszNy43ODEzMzMsIC0xMjIuNDU4OTAxXSwgWzM3Ljc4MTIxMSwgLTEyMi40NTg4OTNdLCBbMzcuNzgwNTc0LCAtMTIyLjQ1ODg0OF0sIFszNy43Nzk3MzEsIC0xMjIuNDU4Nzg3XSwgWzM3Ljc3OTM1NywgLTEyMi40NTg3NTZdLCBbMzcuNzc4ODU4LCAtMTIyLjQ1ODcxOF0sIFszNy43Nzg3NzQsIC0xMjIuNDU4NzE4XSwgWzM3Ljc3ODAxMSwgLTEyMi40NTg2NTddLCBbMzcuNzc3NzM2LCAtMTIyLjQ1ODY0Ml0sIFszNy43Nzc1OTUsIC0xMjIuNDU4NjM0XSwgWzM3Ljc3NzI4NiwgLTEyMi40NTg2MTFdLCBbMzcuNzc3MTI2LCAtMTIyLjQ1ODU5Nl0sIFszNy43NzY4NDQsIC0xMjIuNDU4NTczXSwgWzM3Ljc3NjE4NywgLTEyMi40NTg1MjddLCBbMzcuNzc2MTE5LCAtMTIyLjQ1ODUyN10sIFszNy43NzU2MTUsIC0xMjIuNDU4NDg5XSwgWzM3Ljc3NTU2OSwgLTEyMi40NTg1MDRdLCBbMzcuNzc1NTY5LCAtMTIyLjQ1ODUwNF0sIFszNy43NzUyNDUsIC0xMjIuNDU4NDU4XSwgWzM3Ljc3NDk4MiwgLTEyMi40NTg0NDNdLCBbMzcuNzc0NzAzLCAtMTIyLjQ1ODQyXSwgWzM3Ljc3NDQxLCAtMTIyLjQ1ODQwNV0sIFszNy43NzQyOTksIC0xMjIuNDU4MzldLCBbMzcuNzc0MjE1LCAtMTIyLjQ1ODM4Ml0sIFszNy43NzQxNzMsIC0xMjIuNDU4Mzc1XSwgWzM3Ljc3NDExNiwgLTEyMi40NTgzODJdLCBbMzcuNzc0MDY2LCAtMTIyLjQ1ODM5XSwgWzM3Ljc3NDAxNywgLTEyMi40NTg0MDVdLCBbMzcuNzczOTYzLCAtMTIyLjQ1ODQyOF0sIFszNy43NzM5MDIsIC0xMjIuNDU4NDY2XSwgWzM3Ljc3Mzg0MSwgLTEyMi40NTg1MTJdLCBbMzcuNzczNzg4LCAtMTIyLjQ1ODU1OF0sIFszNy43NzM2NDMsIC0xMjIuNDU4Njk1XSwgWzM3Ljc3MzUzMiwgLTEyMi40NTg4MDJdLCBbMzcuNzczNDQxLCAtMTIyLjQ1ODg4Nl0sIFszNy43NzMzNDksIC0xMjIuNDU4OTc3XSwgWzM3Ljc3MzI5NiwgLTEyMi40NTkwMTVdLCBbMzcuNzczMjYyLCAtMTIyLjQ1OTAzMV0sIFszNy43NzMyMjcsIC0xMjIuNDU5MDM4XSwgWzM3Ljc3MzIwOCwgLTEyMi40NTkxNDVdLCBbMzcuNzczMTkzLCAtMTIyLjQ1OTI2N10sIFszNy43NzMxNDcsIC0xMjIuNDU5NjFdLCBbMzcuNzczMTE3LCAtMTIyLjQ1OTgyNF0sIFszNy43NzMwMzYsIC0xMjIuNDYwMzk2XSwgWzM3Ljc3MzAxNCwgLTEyMi40NjA1MTFdLCBbMzcuNzcyOTg3LCAtMTIyLjQ2MDYxOF0sIFszNy43NzI5NTMsIC0xMjIuNDYwNzE3XSwgWzM3Ljc3MjkxOCwgLTEyMi40NjA3OTNdLCBbMzcuNzcyODcyLCAtMTIyLjQ2MDg3N10sIFszNy43NzI4MTksIC0xMjIuNDYwOTQ2XSwgWzM3Ljc3Mjc2NiwgLTEyMi40NjA5OTldLCBbMzcuNzcyNzIsIC0xMjIuNDYxMDM3XSwgWzM3Ljc3MjY1OSwgLTEyMi40NjEwODNdLCBbMzcuNzcyNTk4LCAtMTIyLjQ2MTEyMV0sIFszNy43NzI1MzcsIC0xMjIuNDYxMTU5XSwgWzM3Ljc3MjQ2NCwgLTEyMi40NjEyMTNdLCBbMzcuNzcyNDAzLCAtMTIyLjQ2MTI2Nl0sIFszNy43NzIzNDYsIC0xMjIuNDYxMzE5XSwgWzM3Ljc3MjI4NSwgLTEyMi40NjEzODhdLCBbMzcuNzcyMjI4LCAtMTIyLjQ2MTQ3Ml0sIFszNy43NzIxNzEsIC0xMjIuNDYxNTY0XSwgWzM3Ljc3MjEyMSwgLTEyMi40NjE2NjNdLCBbMzcuNzcyMDM3LCAtMTIyLjQ2MTgzMV0sIFszNy43NzIwMDMsIC0xMjIuNDYxODkyXSwgWzM3Ljc3MTk2OCwgLTEyMi40NjE5MzddLCBbMzcuNzcxOTE1LCAtMTIyLjQ2MTk4M10sIFszNy43NzE4NzMsIC0xMjIuNDYyMDA2XSwgWzM3Ljc3MTgzMSwgLTEyMi40NjIwMjldLCBbMzcuNzcxNzc4LCAtMTIyLjQ2MjA1Ml0sIFszNy43NzE3NTUsIC0xMjIuNDYxOTIyXSwgWzM3Ljc3MTcyNCwgLTEyMi40NjE3MzldLCBbMzcuNzcxNTc1LCAtMTIyLjQ2MDgzMV0sIFszNy43NzE1NDUsIC0xMjIuNDYwNjMzXSwgWzM3Ljc3MTQ0MiwgLTEyMi40NTk5NTRdLCBbMzcuNzcxNDE5LCAtMTIyLjQ1OTgyNF0sIFszNy43NzEzMzksIC0xMjIuNDU5MzQzXSwgWzM3Ljc3MTMxNiwgLTEyMi40NTkxNzZdLCBbMzcuNzcxMjgyLCAtMTIyLjQ1OTE4M10sIFszNy43NzEyNTEsIC0xMjIuNDU5MTk4XSwgWzM3Ljc3MTIyNCwgLTEyMi40NTkyMDZdLCBbMzcuNzcxMTI1LCAtMTIyLjQ1OTI0NF0sIFszNy43NzEwNDEsIC0xMjIuNDU5MjgyXSwgWzM3Ljc3MDk2OSwgLTEyMi40NTkzMjFdLCBbMzcuNzcwODk2LCAtMTIyLjQ1OTM1OV0sIFszNy43NzA4MjgsIC0xMjIuNDU5NDA0XSwgWzM3Ljc3MDc2NywgLTEyMi40NTk0NV0sIFszNy43NzA3MDYsIC0xMjIuNDU5NTExXSwgWzM3Ljc3MDY1MiwgLTEyMi40NTk1NzJdLCBbMzcuNzcwNjI2LCAtMTIyLjQ1OTYwM10sIFszNy43NzA1OTksIC0xMjIuNDU5NjQxXSwgWzM3Ljc3MDU1MywgLTEyMi40NTk3MV0sIFszNy43NzA1MTEsIC0xMjIuNDU5Nzk0XSwgWzM3Ljc3MDQ3MywgLTEyMi40NTk4ODVdLCBbMzcuNzcwNDM5LCAtMTIyLjQ1OTk4NF0sIFszNy43NzA0MTYsIC0xMjIuNDYwMDc2XSwgWzM3Ljc3MDM5NywgLTEyMi40NjAxOV0sIFszNy43NzAzNzgsIC0xMjIuNDYwMzA1XSwgWzM3Ljc3MDM2MiwgLTEyMi40NjA0NV0sIFszNy43NzAzNTEsIC0xMjIuNDYwNTk1XSwgWzM3Ljc3MDMzOSwgLTEyMi40NjA3NF0sIFszNy43NzAzMzIsIC0xMjIuNDYwODc3XSwgWzM3Ljc3MDMzNiwgLTEyMi40NjEwMTRdLCBbMzcuNzcwMzQzLCAtMTIyLjQ2MTE1Ml0sIFszNy43NzAzNDMsIC0xMjIuNDYxMjg5XSwgWzM3Ljc3MDMzOSwgLTEyMi40NjE0MTldLCBbMzcuNzcwMzI4LCAtMTIyLjQ2MTU0MV0sIFszNy43NzAzMTMsIC0xMjIuNDYxNjc4XSwgWzM3Ljc3MDI5LCAtMTIyLjQ2MThdLCBbMzcuNzcwMjYzLCAtMTIyLjQ2MTkzN10sIFszNy43NzAyMzYsIC0xMjIuNDYyMDUyXSwgWzM3Ljc2OTk5NiwgLTEyMi40NjMwNTldLCBbMzcuNzY5OTc3LCAtMTIyLjQ2MzE0M10sIFszNy43Njk3MTgsIC0xMjIuNDY0MjY0XSwgWzM3Ljc2OTY4LCAtMTIyLjQ2NDQwMl0sIFszNy43Njk2NjgsIC0xMjIuNDY0NDQ4XSwgWzM3Ljc2OTYzOCwgLTEyMi40NjQ1MjRdLCBbMzcuNzY5Njk1LCAtMTIyLjQ2NDU3XSwgWzM3Ljc2OTc2LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk3OTgsIC0xMjIuNDY0NjY5XSwgWzM3Ljc2OTgzMiwgLTEyMi40NjQ3OThdLCBbMzcuNzY5ODYzLCAtMTIyLjQ2NDg4Ml0sIFszNy43Njk5NTgsIC0xMjIuNDY1MDEyXSwgWzM3Ljc2OTk1OCwgLTEyMi40NjUwMTJdLCBbMzcuNzY5ODYzLCAtMTIyLjQ2NDg4Ml0sIFszNy43Njk4MzIsIC0xMjIuNDY0Nzk4XSwgWzM3Ljc2OTc5OCwgLTEyMi40NjQ2NjldLCBbMzcuNzY5NzYsIC0xMjIuNDY0NjA4XSwgWzM3Ljc2OTY5NSwgLTEyMi40NjQ1N10sIFszNy43Njk2MzgsIC0xMjIuNDY0NTI0XSwgWzM3Ljc2OTY2OCwgLTEyMi40NjQ0NDhdLCBbMzcuNzY5NjgsIC0xMjIuNDY0NDAyXSwgWzM3Ljc2OTcxOCwgLTEyMi40NjQyNjRdLCBbMzcuNzY5OTc3LCAtMTIyLjQ2MzE0M10sIFszNy43Njk5OTYsIC0xMjIuNDYzMDU5XSwgWzM3Ljc3MDIzNiwgLTEyMi40NjIwNTJdLCBbMzcuNzcwMjYzLCAtMTIyLjQ2MTkzN10sIFszNy43NzAyOSwgLTEyMi40NjE4XSwgWzM3Ljc3MDMxMywgLTEyMi40NjE2NzhdLCBbMzcuNzcwMzI4LCAtMTIyLjQ2MTU0MV0sIFszNy43NzAzMzksIC0xMjIuNDYxNDE5XSwgWzM3Ljc3MDM0MywgLTEyMi40NjEyODldLCBbMzcuNzcwMzQzLCAtMTIyLjQ2MTE1Ml0sIFszNy43NzAzMzYsIC0xMjIuNDYxMDE0XSwgWzM3Ljc3MDMzMiwgLTEyMi40NjA4NzddLCBbMzcuNzcwMzM5LCAtMTIyLjQ2MDc0XSwgWzM3Ljc3MDM1MSwgLTEyMi40NjA1OTVdLCBbMzcuNzcwMzYyLCAtMTIyLjQ2MDQ1XSwgWzM3Ljc3MDM3OCwgLTEyMi40NjAzMDVdLCBbMzcuNzcwMzk3LCAtMTIyLjQ2MDE5XSwgWzM3Ljc3MDQxNiwgLTEyMi40NjAwNzZdLCBbMzcuNzcwNDM5LCAtMTIyLjQ1OTk4NF0sIFszNy43NzA0NzMsIC0xMjIuNDU5ODg1XSwgWzM3Ljc3MDUxMSwgLTEyMi40NTk3OTRdLCBbMzcuNzcwNTUzLCAtMTIyLjQ1OTcxXSwgWzM3Ljc3MDU5OSwgLTEyMi40NTk2NDFdLCBbMzcuNzcwNjI2LCAtMTIyLjQ1OTYwM10sIFszNy43NzA2NTIsIC0xMjIuNDU5NTcyXSwgWzM3Ljc3MDcwNiwgLTEyMi40NTk1MTFdLCBbMzcuNzcwNzY3LCAtMTIyLjQ1OTQ1XSwgWzM3Ljc3MDgyOCwgLTEyMi40NTk0MDRdLCBbMzcuNzcwODk2LCAtMTIyLjQ1OTM1OV0sIFszNy43NzA5NjksIC0xMjIuNDU5MzIxXSwgWzM3Ljc3MTA0MSwgLTEyMi40NTkyODJdLCBbMzcuNzcxMTI1LCAtMTIyLjQ1OTI0NF0sIFszNy43NzEyMjQsIC0xMjIuNDU5MjA2XSwgWzM3Ljc3MTI1MSwgLTEyMi40NTkxOThdLCBbMzcuNzcxMjgyLCAtMTIyLjQ1OTE4M10sIFszNy43NzEzMTYsIC0xMjIuNDU5MTc2XSwgWzM3Ljc3MTMzOSwgLTEyMi40NTkzNDNdLCBbMzcuNzcxNDE5LCAtMTIyLjQ1OTgyNF0sIFszNy43NzE0NDIsIC0xMjIuNDU5OTU0XSwgWzM3Ljc3MTU0NSwgLTEyMi40NjA2MzNdLCBbMzcuNzcxNTc1LCAtMTIyLjQ2MDgzMV0sIFszNy43NzE3MjQsIC0xMjIuNDYxNzM5XSwgWzM3Ljc3MTc1NSwgLTEyMi40NjE5MjJdLCBbMzcuNzcxNzc4LCAtMTIyLjQ2MjA1Ml0sIFszNy43NzE4MDgsIC0xMjIuNDYyMTgyXSwgWzM3Ljc3MTgzNSwgLTEyMi40NjIzMDRdLCBbMzcuNzcxOTc2LCAtMTIyLjQ2Mjg1M10sIFszNy43NzIwMjksIC0xMjIuNDYzMDUxXSwgWzM3Ljc3MjA4MywgLTEyMi40NjMyNV0sIFszNy43NzIxNDgsIC0xMjIuNDYzNDk0XSwgWzM3Ljc3MjI2NiwgLTEyMi40NjM5MTNdLCBbMzcuNzcyMzA4LCAtMTIyLjQ2NDA3NF0sIFszNy43NzIzNjUsIC0xMjIuNDY0MjcyXSwgWzM3Ljc3MjM5OSwgLTEyMi40NjQ0MDJdLCBbMzcuNzcyNDMsIC0xMjIuNDY0NTI0XSwgWzM3Ljc3MjQ2LCAtMTIyLjQ2NDY1NF0sIFszNy43NzI0ODcsIC0xMjIuNDY0NzkxXSwgWzM3Ljc3MjUxLCAtMTIyLjQ2NDkyMV0sIFszNy43NzI1MzMsIC0xMjIuNDY1MDVdLCBbMzcuNzcyNTU2LCAtMTIyLjQ2NTE4XSwgWzM3Ljc3MjU2MywgLTEyMi40NjUyMjZdLCBbMzcuNzcyNTc1LCAtMTIyLjQ2NTMxXSwgWzM3Ljc3MjU5LCAtMTIyLjQ2NTQyNF0sIFszNy43NzI2MDIsIC0xMjIuNDY1NTM5XSwgWzM3Ljc3MjYwOSwgLTEyMi40NjU2NTNdLCBbMzcuNzcyNjEzLCAtMTIyLjQ2NTc0NV0sIFszNy43NzI2MTMsIC0xMjIuNDY1ODQ0XSwgWzM3Ljc3MjcxMiwgLTEyMi40NjU4NTFdLCBbMzcuNzcyNzg1LCAtMTIyLjQ2NTg1OV0sIFszNy43NzI5NTMsIC0xMjIuNDY1ODY3XSwgWzM3Ljc3MzE3LCAtMTIyLjQ2NTg4Ml0sIFszNy43NzM0MDMsIC0xMjIuNDY1ODk3XSwgWzM3Ljc3NTI3MiwgLTEyMi40NjYwMzRdLCBbMzcuNzc3MTM3LCAtMTIyLjQ2NjE2NF0sIFszNy43Nzg5MTUsIC0xMjIuNDY2Mjk0XSwgWzM3Ljc3OTAwNiwgLTEyMi40NjYzMDFdLCBbMzcuNzc5MDU2LCAtMTIyLjQ2NTIzM10sIFszNy43NzkxMDYsIC0xMjIuNDY0MTU4XV0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFwXzFiNzI2MjZmM2JlYTQxMDFiMGRhNTJjNWMxNjUwOWNjLmFkZExheWVyKHBvbHlfbGluZV82OTQ1ODIxMzVmODY0NzljOTU3NGYyNDIxYjE1NTAyNSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvc2NyaXB0PgogICAgICAgIA==" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>
[Full Size]({{ site.baseurl }}/images/optimize_stops_1_person_bike.html)



## Determining Stops and Order with Multiple People

Now that I have a working function that wraps Mapzen's optimize route service, I am ready to extend it to work with multiple people. The general approach I take is to first find the unique combinations that a list of stops can be split among a given number of people, and then determine which of these combinations minimizes the maximum time of any one person.

Note that there are many different minimization criteria that can be used when optimizing a set of routes between multiple people. In this case, I’m assuming that Celeste and I start our errands at the same time and that they are completed when the last person is done. The length of time until all the errands are done (the max time of any person) is what I am trying to minimize. However, a more typical usage would perhaps be to minimize the sum or cumulative amount of time that it takes for all of the salesman to visit the stops. Nonetheless, the function can pretty easily be tweaked for any optimization criteria.

### Unique ways that stops can be split
I use a function adapted from [here](http://stackoverflow.com/a/39199937/3776938) to find the unique ways in that a list of N elements can be partitioned into K groups. This function is written so that the order of groups or of elements within a group does not matter, as this is what the optimize route tool is going to determine! By this I mean that in terms of the input, ```[['A','B'],['C','D']]``` is considered identical to ```[['C','D'],['A','B']]``` as well as to ```[['B','A'],['C','D']]```.

For example, here the 7 unique ways that 4 stops can be split among 2 salesmen:

```python
for c in sorted_k_partitions(['A', 'B', 'C', 'D'], 2):
    print c
```

    [('A',), ('B', 'C', 'D')]
    [('B',), ('A', 'C', 'D')]
    [('C',), ('A', 'B', 'D')]
    [('D',), ('A', 'B', 'C')]
    [('A', 'B'), ('C', 'D')]
    [('A', 'C'), ('B', 'D')]
    [('A', 'D'), ('B', 'C')]
    

### Optimizing Stops Among K People

I then write a function that wraps my single-person route optimization function. The function applies the original function to each unique way that the stops can be partitioned, and determines the partition that minimizes the maximum time of the travelers. The input is identical to the original function except for the ability to specify the number of salesmen. The output too, is nearly identical to the previous function returning trip length, optimized stop order, etc. However, now for each of these pieces of information, the function returns a list of values, where the length of the list is equal to the number of salesmen.

I use the same set of 6 stops in the Inner Richmond that I used earlier, but now specify that there will be 2 travelers. I extract the ordered set of stops for each of the 2 travelers and the travel time for each, and then plot the stops and routes on a leaflet map.

As you can see, the stop order is returned as a list of two ordered sublists, indicating that the first person should go to Pizzetta and Lamps Plus and the second person should go to Toy Boat, Noah's Bagels, Arguello, Market, and the de Young Museum (in that order). One person is going to less  stops than the other, but some of the stops are also much further from home. The person that makes the two stop trip will spend 53 minutes and the person that makes the four stop trip will spend 68 minutes. 68 minutes is the minimum amount of time that the person with the longer trip takes in any combination ways that these stops can be partitioned.

In the map, the home location is shown in black, and each person's stops are shown in a different color. Stops are labeled with the stop name as well as the stop number (showing the order that the stops should be visited by each person).


```python
opt_2_people_walk = optimize_stops_mult(home, stops, num_travelers = 2, stop_labels = stop_labels)
```

```python
for i in opt_2_people_walk['order']:
    print i
```

    ['Lamps Plus', 'Pizzetta']
    ['Toy Boat', "Noah's Bagels", 'Arguello Market', 'de Young Museum']
    


```python
opt_2_people_walk['time']
```




    [53, 71]




```python
points = [[opt_2_people_walk['home_point']]] + opt_2_people_walk['points']
labels = [['Home']] + [[' - '.join((str(i), x)) for i, x in enumerate(l, 1)] for l in opt_2_people_walk['order']]


m1 = plot_stops(points, zoom_level = 14, tiles = 'Stamen Watercolor', labels = labels, line_coords = opt_2_people_walk['lines'])
m1
```



<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwXzFlYTUxOWU2YzhhZDQ3NTY5ZmUyNTk2YzI3NTgxMTQ5IHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF8xZWE1MTllNmM4YWQ0NzU2OWZlMjU5NmMyNzU4MTE0OSIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF8xZWE1MTllNmM4YWQ0NzU2OWZlMjU5NmMyNzU4MTE0OSA9IEwubWFwKCdtYXBfMWVhNTE5ZTZjOGFkNDc1NjlmZTI1OTZjMjc1ODExNDknLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfZmU4NDIyZDgwMjZkNGVhYzhmOWFkMWMyZGI0YTNiOTQgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF8xZWE1MTllNmM4YWQ0NzU2OWZlMjU5NmMyNzU4MTE0OSk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYjU0ODg4OTliODkwNDcyNDllMGYwNmZkZDFjZGE5MDIgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMWVhNTE5ZTZjOGFkNDc1NjlmZTI1OTZjMjc1ODExNDkpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMzMxN2Y0OGRlMGUwNDJlMTkyYTM2MzI5ODhmZTBkOGEgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2I1NDg4ODk5Yjg5MDQ3MjQ5ZTBmMDZmZGQxY2RhOTAyLnNldEljb24oaWNvbl8zMzE3ZjQ4ZGUwZTA0MmUxOTJhMzYzMjk4OGZlMGQ4YSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzY1MDFiNmQ1NzE5NjRjMGQ5NDZlNzdjZjlhYTIwNDlmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFkODIzNWMwMTUwYzQ2YzhiM2RiYzhjN2YyZDhiNzI5ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8xZDgyMzVjMDE1MGM0NmM4YjNkYmM4YzdmMmQ4YjcyOSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82NTAxYjZkNTcxOTY0YzBkOTQ2ZTc3Y2Y5YWEyMDQ5Zi5zZXRDb250ZW50KGh0bWxfMWQ4MjM1YzAxNTBjNDZjOGIzZGJjOGM3ZjJkOGI3MjkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9iNTQ4ODg5OWI4OTA0NzI0OWUwZjA2ZmRkMWNkYTkwMi5iaW5kUG9wdXAocG9wdXBfNjUwMWI2ZDU3MTk2NGMwZDk0NmU3N2NmOWFhMjA0OWYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9jZTBmMmIxNzFkNTA0OWYyYTFiOGNhMWU4NzI1MjYzNCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTEzLC0xMjIuNDY5OTVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8xZWE1MTllNmM4YWQ0NzU2OWZlMjU5NmMyNzU4MTE0OSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8yZTE2YzdmMjJmMTY0MzA4YjBmYjE0YjE0MTNjMzgwMCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9jZTBmMmIxNzFkNTA0OWYyYTFiOGNhMWU4NzI1MjYzNC5zZXRJY29uKGljb25fMmUxNmM3ZjIyZjE2NDMwOGIwZmIxNGIxNDEzYzM4MDApOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81YWI4ZGE5MzJhY2M0MDBiOTgxMDBjZTMzODIyOWU5ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80MmQ4YjczYjI3MTY0ZDUzYjNlNTAzZTQ2M2U1MzI2NiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNDJkOGI3M2IyNzE2NGQ1M2IzZTUwM2U0NjNlNTMyNjYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDEgLSBMYW1wcyBQbHVzPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzVhYjhkYTkzMmFjYzQwMGI5ODEwMGNlMzM4MjI5ZTllLnNldENvbnRlbnQoaHRtbF80MmQ4YjczYjI3MTY0ZDUzYjNlNTAzZTQ2M2U1MzI2Nik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2NlMGYyYjE3MWQ1MDQ5ZjJhMWI4Y2ExZTg3MjUyNjM0LmJpbmRQb3B1cChwb3B1cF81YWI4ZGE5MzJhY2M0MDBiOTgxMDBjZTMzODIyOWU5ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2U2OTNmMjc2OGJkMTQ4OTlhMDFiYTRhYjZiYjRkNGFkID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgzNzEsLTEyMi40ODNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8xZWE1MTllNmM4YWQ0NzU2OWZlMjU5NmMyNzU4MTE0OSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl82MTU2YmVjZGQyMWM0MTBkOTY0OTgzOWU3NWY1ZTRjMiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9lNjkzZjI3NjhiZDE0ODk5YTAxYmE0YWI2YmI0ZDRhZC5zZXRJY29uKGljb25fNjE1NmJlY2RkMjFjNDEwZDk2NDk4MzllNzVmNWU0YzIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80NzJhN2I1NWQyNTQ0NzYzODg5MWE3NDgxYjA1NjU3ZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85MThkYmE3ODE2ZTQ0NzBhYjNlOGJiMDU3NzBhZjhhMyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOTE4ZGJhNzgxNmU0NDcwYWIzZThiYjA1NzcwYWY4YTMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDIgLSBQaXp6ZXR0YTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80NzJhN2I1NWQyNTQ0NzYzODg5MWE3NDgxYjA1NjU3Zi5zZXRDb250ZW50KGh0bWxfOTE4ZGJhNzgxNmU0NDcwYWIzZThiYjA1NzcwYWY4YTMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9lNjkzZjI3NjhiZDE0ODk5YTAxYmE0YWI2YmI0ZDRhZC5iaW5kUG9wdXAocG9wdXBfNDcyYTdiNTVkMjU0NDc2Mzg4OTFhNzQ4MWIwNTY1N2YpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9hNWUwZjFhZThkYzA0MGUxYmJlYTkwYzhhM2FkNDVlNyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4Mjc4LC0xMjIuNDYzNTFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8xZWE1MTllNmM4YWQ0NzU2OWZlMjU5NmMyNzU4MTE0OSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8wOTY1NGM2YmE0NGE0ODMzYmFlZGFjNjFhZWY0YzZiNSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2E1ZTBmMWFlOGRjMDQwZTFiYmVhOTBjOGEzYWQ0NWU3LnNldEljb24oaWNvbl8wOTY1NGM2YmE0NGE0ODMzYmFlZGFjNjFhZWY0YzZiNSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2UzMjlmN2UzYzQwZTQwODRiMjQ4ZGIxYWI5ODY4YTI2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA3NzJjMzc5M2UyYTRjYmI5M2NkZmMyMjQ3ZjNmM2ZiID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8wNzcyYzM3OTNlMmE0Y2JiOTNjZGZjMjI0N2YzZjNmYiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMSAtIFRveSBCb2F0PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2UzMjlmN2UzYzQwZTQwODRiMjQ4ZGIxYWI5ODY4YTI2LnNldENvbnRlbnQoaHRtbF8wNzcyYzM3OTNlMmE0Y2JiOTNjZGZjMjI0N2YzZjNmYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2E1ZTBmMWFlOGRjMDQwZTFiYmVhOTBjOGEzYWQ0NWU3LmJpbmRQb3B1cChwb3B1cF9lMzI5ZjdlM2M0MGU0MDg0YjI0OGRiMWFiOTg2OGEyNik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzRmNWM4MjIzNzU0MzRmNDM4NjJlZjY0ODQzM2I5YTEzID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzg2MjEsLTEyMi40NTE4NF0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzFlYTUxOWU2YzhhZDQ3NTY5ZmUyNTk2YzI3NTgxMTQ5KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzhhYmEzODM1MzJiYTQ4OWViOWI1NDFmODc3N2YyZmQ4ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNGY1YzgyMjM3NTQzNGY0Mzg2MmVmNjQ4NDMzYjlhMTMuc2V0SWNvbihpY29uXzhhYmEzODM1MzJiYTQ4OWViOWI1NDFmODc3N2YyZmQ4KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzg4ZTEyNjg5OTRkNGM2NjgzY2ViNDhlOWZkMWI1ZWUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfN2ZlNmZmZjhkNGQ4NDA0NTkwYzRkN2IwYzlkZGRiN2EgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzdmZTZmZmY4ZDRkODQwNDU5MGM0ZDdiMGM5ZGRkYjdhIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAyIC0gTm9haCYjMzk7cyBCYWdlbHM8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzg4ZTEyNjg5OTRkNGM2NjgzY2ViNDhlOWZkMWI1ZWUuc2V0Q29udGVudChodG1sXzdmZTZmZmY4ZDRkODQwNDU5MGM0ZDdiMGM5ZGRkYjdhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNGY1YzgyMjM3NTQzNGY0Mzg2MmVmNjQ4NDMzYjlhMTMuYmluZFBvcHVwKHBvcHVwXzM4OGUxMjY4OTk0ZDRjNjY4M2NlYjQ4ZTlmZDFiNWVlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfZGVjNWVjNWZlNzFjNDA5MDhiMzM5MzdiODc2MWY2NTkgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzU1OCwtMTIyLjQ1ODMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMWVhNTE5ZTZjOGFkNDc1NjlmZTI1OTZjMjc1ODExNDkpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fOTUzNDBjNjQxNTdjNDFkMzg4N2NmMjE2OTRkNjk4NDcgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9kZWM1ZWM1ZmU3MWM0MDkwOGIzMzkzN2I4NzYxZjY1OS5zZXRJY29uKGljb25fOTUzNDBjNjQxNTdjNDFkMzg4N2NmMjE2OTRkNjk4NDcpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yNzY4ZjE4NTc1YjM0MzI3YmY3Y2NmMWVhZTZmZGFlYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xNTNmMmI1NWZmMDg0ODA5YWQ4MThmNDZmZTA5NDJiZSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMTUzZjJiNTVmZjA4NDgwOWFkODE4ZjQ2ZmUwOTQyYmUiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDMgLSBBcmd1ZWxsbyBNYXJrZXQ8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMjc2OGYxODU3NWIzNDMyN2JmN2NjZjFlYWU2ZmRhZWMuc2V0Q29udGVudChodG1sXzE1M2YyYjU1ZmYwODQ4MDlhZDgxOGY0NmZlMDk0MmJlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfZGVjNWVjNWZlNzFjNDA5MDhiMzM5MzdiODc2MWY2NTkuYmluZFBvcHVwKHBvcHVwXzI3NjhmMTg1NzViMzQzMjdiZjdjY2YxZWFlNmZkYWVjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYTg2ZjY4YjViYzlhNDZmZWI4MGRiNmI3YThiNzkyMGMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzAwMiwtMTIyLjQ2NTYxXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMWVhNTE5ZTZjOGFkNDc1NjlmZTI1OTZjMjc1ODExNDkpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fM2E1MTU3ZWYwMWM1NDc3Mzg0OTMyY2IyMDAyN2FmZDMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9hODZmNjhiNWJjOWE0NmZlYjgwZGI2YjdhOGI3OTIwYy5zZXRJY29uKGljb25fM2E1MTU3ZWYwMWM1NDc3Mzg0OTMyY2IyMDAyN2FmZDMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xYTZlYjcyODg3NGU0MGVlYWM1ZDViMmE4MjkyYzYxMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xZTFjZTkxMWJmMzk0OGQ3OGE0ZjgyN2I4Y2I4NWIxYSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMWUxY2U5MTFiZjM5NDhkNzhhNGY4MjdiOGNiODViMWEiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDQgLSBkZSBZb3VuZyBNdXNldW08L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMWE2ZWI3Mjg4NzRlNDBlZWFjNWQ1YjJhODI5MmM2MTIuc2V0Q29udGVudChodG1sXzFlMWNlOTExYmYzOTQ4ZDc4YTRmODI3YjhjYjg1YjFhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfYTg2ZjY4YjViYzlhNDZmZWI4MGRiNmI3YThiNzkyMGMuYmluZFBvcHVwKHBvcHVwXzFhNmViNzI4ODc0ZTQwZWVhYzVkNWIyYTgyOTJjNjEyKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBwb2x5X2xpbmVfMzE1M2Y3ZjE5YmQ5NGE0MGFiZmE1M2NjMzhmMDk0NWUgPSBMLnBvbHlsaW5lKAogICAgICAgICAgICAgICAgICAgIFtbMzcuNzc5MTA2LCAtMTIyLjQ2NDE1OF0sIFszNy43ODA1MjksIC0xMjIuNDY0MjY0XSwgWzM3Ljc4MDk2NywgLTEyMi40NjQyOTVdLCBbMzcuNzgwOTE4LCAtMTIyLjQ2NTM2M10sIFszNy43ODA5MDIsIC0xMjIuNDY1NzE0XSwgWzM3Ljc4MDg2OCwgLTEyMi40NjY0MzldLCBbMzcuNzgwODUzLCAtMTIyLjQ2Njc5XSwgWzM3Ljc4MDgyMiwgLTEyMi40Njc1MDddLCBbMzcuNzgwNzczLCAtMTIyLjQ2ODU3NV0sIFszNy43ODA3MjMsIC0xMjIuNDY5NjUxXSwgWzM3Ljc4MDg0NSwgLTEyMi40Njk2NThdLCBbMzcuNzgxMTUsIC0xMjIuNDY5NzA0XSwgWzM3Ljc4MTE1LCAtMTIyLjQ2OTcwNF0sIFszNy43ODIzODIsIC0xMjIuNDY5NzY1XSwgWzM3Ljc4MjcwNywgLTEyMi40Njk3ODhdLCBbMzcuNzgyNjYxLCAtMTIyLjQ3MDg2NF0sIFszNy43ODI2MTEsIC0xMjIuNDcxOTMyXSwgWzM3Ljc4MjYwNCwgLTEyMi40NzIxXSwgWzM3Ljc4MjU5MiwgLTEyMi40NzIzOTddLCBbMzcuNzgyNTg1LCAtMTIyLjQ3MjU0Ml0sIFszNy43ODI1NjYsIC0xMjIuNDczMDA4XSwgWzM3Ljc4MjUxMiwgLTEyMi40NzQxMjldLCBbMzcuNzgyNDU5LCAtMTIyLjQ3NTI1MV0sIFszNy43ODI0MDksIC0xMjIuNDc2MzE5XSwgWzM3Ljc4MjM2MywgLTEyMi40NzczOTVdLCBbMzcuNzgyMzE0LCAtMTIyLjQ3ODQ2M10sIFszNy43ODIyNjQsIC0xMjIuNDc5NTMxXSwgWzM3Ljc4MjIxNSwgLTEyMi40ODA2MDddLCBbMzcuNzgyMTY5LCAtMTIyLjQ4MTY3NV0sIFszNy43ODIxMTksIC0xMjIuNDgyNzVdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODM3MTgsIC0xMjIuNDgyOTAzXSwgWzM3Ljc4MjExOSwgLTEyMi40ODI3NV0sIFszNy43ODE3MzgsIC0xMjIuNDgyNzJdLCBbMzcuNzgwMjU4LCAtMTIyLjQ4MjYxM10sIFszNy43ODAyNzcsIC0xMjIuNDgyMjM5XSwgWzM3Ljc4MDMwNywgLTEyMi40ODE1NDVdLCBbMzcuNzgwMzI2LCAtMTIyLjQ4MTEzM10sIFszNy43ODAzNTcsIC0xMjIuNDgwNDc3XSwgWzM3Ljc4MDQwMywgLTEyMi40Nzk0MDFdLCBbMzcuNzgwNDUyLCAtMTIyLjQ3ODMzM10sIFszNy43ODA0NjcsIC0xMjIuNDc3OTc0XSwgWzM3Ljc4MDUwMiwgLTEyMi40NzcyNTddLCBbMzcuNzgwNTEzLCAtMTIyLjQ3NjkzN10sIFszNy43ODA1NTEsIC0xMjIuNDc2MTg5XSwgWzM3Ljc4MDU5NywgLTEyMi40NzUxMTNdLCBbMzcuNzgwNjUxLCAtMTIyLjQ3Mzk5Ml0sIFszNy43ODA2NywgLTEyMi40NzM1MDRdLCBbMzcuNzgwNywgLTEyMi40NzI4N10sIFszNy43ODA3MTksIC0xMjIuNDcyNDg5XSwgWzM3Ljc4MDcxOSwgLTEyMi40NzI0MDVdLCBbMzcuNzgwNTk3LCAtMTIyLjQ3MjM5N10sIFszNy43ODA2MDUsIC0xMjIuNDcyMjUyXSwgWzM3Ljc4MDYwOSwgLTEyMi40NzIxNzZdLCBbMzcuNzgwNjE2LCAtMTIyLjQ3MTk4NV0sIFszNy43ODA2MjgsIC0xMjIuNDcxNzk1XSwgWzM3Ljc4MDY1OCwgLTEyMi40NzEwOTNdLCBbMzcuNzgwNjczLCAtMTIyLjQ3MDcxOV0sIFszNy43ODA3MDgsIC0xMjIuNDcwMDI1XSwgWzM3Ljc4MDcyMywgLTEyMi40Njk2NTFdLCBbMzcuNzgwNzczLCAtMTIyLjQ2ODU3NV0sIFszNy43ODA4MjIsIC0xMjIuNDY3NTA3XSwgWzM3Ljc4MDg1MywgLTEyMi40NjY3OV0sIFszNy43ODA4NjgsIC0xMjIuNDY2NDM5XSwgWzM3Ljc4MDkwMiwgLTEyMi40NjU3MTRdLCBbMzcuNzgwOTE4LCAtMTIyLjQ2NTM2M10sIFszNy43ODA5NjcsIC0xMjIuNDY0Mjk1XSwgWzM3Ljc4MDUyOSwgLTEyMi40NjQyNjRdLCBbMzcuNzc5MTA2LCAtMTIyLjQ2NDE1OF1dLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcF8xZWE1MTllNmM4YWQ0NzU2OWZlMjU5NmMyNzU4MTE0OS5hZGRMYXllcihwb2x5X2xpbmVfMzE1M2Y3ZjE5YmQ5NGE0MGFiZmE1M2NjMzhmMDk0NWUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lXzU4MTFhN2NkZTYxNTQ4Y2I4NzM5M2UzZWM5ZmU5NTAyID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdLCBbMzcuNzgwNTI5LCAtMTIyLjQ2NDI2NF0sIFszNy43ODA5NjcsIC0xMjIuNDY0Mjk1XSwgWzM3Ljc4MTA4OSwgLTEyMi40NjQzMDNdLCBbMzcuNzgxMTM5LCAtMTIyLjQ2MzIzNF0sIFszNy43ODE1MzksIC0xMjIuNDYzMjY1XSwgWzM3Ljc4Mjc5MSwgLTEyMi40NjM0MDJdLCBbMzcuNzgyNzkxLCAtMTIyLjQ2MzQwMl0sIFszNy43ODMsIC0xMjIuNDYzMzcyXSwgWzM3Ljc4NDg2NiwgLTEyMi40NjM1MDFdLCBbMzcuNzg1MTM3LCAtMTIyLjQ2MzUyNF0sIFszNy43ODUyNzQsIC0xMjIuNDYyNDU2XSwgWzM3Ljc4NTQwOCwgLTEyMi40NjEzOTZdLCBbMzcuNzg1NTQ1LCAtMTIyLjQ2MDMyOF0sIFszNy43ODU2ODYsIC0xMjIuNDU5MjE0XSwgWzM3Ljc4NTgzMSwgLTEyMi40NTgwNjldLCBbMzcuNzg1OTcyLCAtMTIyLjQ1Njk3OF0sIFszNy43ODYwMDMsIC0xMjIuNDU2NzExXSwgWzM3Ljc4NjEwOSwgLTEyMi40NTU4ODddLCBbMzcuNzg2MjEyLCAtMTIyLjQ1NTA2M10sIFszNy43ODYyNTEsIC0xMjIuNDU0Nzg5XSwgWzM3Ljc4NjMxMiwgLTEyMi40NTQzXSwgWzM3Ljc4NjM4OCwgLTEyMi40NTM2OThdLCBbMzcuNzg2NDE4LCAtMTIyLjQ1MzQyM10sIFszNy43ODY0MywgLTEyMi40NTMzMjRdLCBbMzcuNzg2NjI0LCAtMTIyLjQ1MTc3NV0sIFszNy43ODY0NzYsIC0xMjIuNDUxNzQ1XSwgWzM3Ljc4NjIzOSwgLTEyMi40NTE2OTldLCBbMzcuNzg2MjM5LCAtMTIyLjQ1MTY5OV0sIFszNy43ODU5MzQsIC0xMjIuNDUxNjNdLCBbMzcuNzg1OTM0LCAtMTIyLjQ1MTYzOF0sIFszNy43ODU4NzcsIC0xMjIuNDUyMDhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1NzI0LCAtMTIyLjQ1MzI3OF0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcxMywgLTEyMi40NTM0MzFdLCBbMzcuNzg1NzA1LCAtMTIyLjQ1MzQ5OV0sIFszNy43ODU2OTQsIC0xMjIuNDUzNTZdLCBbMzcuNzg1NjgyLCAtMTIyLjQ1MzYxNF0sIFszNy43ODU2NTksIC0xMjIuNDUzNjZdLCBbMzcuNzg1NjMzLCAtMTIyLjQ1MzY5OF0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTU1NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg1NTExLCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTM1OCwgLTEyMi40NTM3NTldLCBbMzcuNzg1MjM2LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NDk3NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg0ODUxLCAtMTIyLjQ1Mzc0M10sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDYxNCwgLTEyMi40NTM3MjhdLCBbMzcuNzg0NDk2LCAtMTIyLjQ1MzcxM10sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDI2NywgLTEyMi40NTM2ODJdLCBbMzcuNzg0MTY4LCAtMTIyLjQ1MzY2N10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4Mzk1NCwgLTEyMi40NTM2MzddLCBbMzcuNzgxNzg3LCAtMTIyLjQ1MzIwMl0sIFszNy43ODE2NjksIC0xMjIuNDUzMTc5XSwgWzM3Ljc4MDM2NCwgLTEyMi40NTI5Ml0sIFszNy43ODAyNDIsIC0xMjIuNDUzODk2XSwgWzM3Ljc4MDEyLCAtMTIyLjQ1NDgzNF0sIFszNy43ODAwOTcsIC0xMjIuNDU1MDE4XSwgWzM3Ljc4MDAzNiwgLTEyMi40NTU0OTFdLCBbMzcuNzgwMDI5LCAtMTIyLjQ1NTU1OV0sIFszNy43ODAwMTcsIC0xMjIuNDU1NjJdLCBbMzcuNzgwMDA2LCAtMTIyLjQ1NTY4MV0sIFszNy43Nzk5OTEsIC0xMjIuNDU1NzM1XSwgWzM3Ljc3OTk0NSwgLTEyMi40NTU4NTddLCBbMzcuNzc5ODk5LCAtMTIyLjQ1NTk4N10sIFszNy43Nzk4MDgsIC0xMjIuNDU2MjM4XSwgWzM3Ljc3OTcwOCwgLTEyMi40NTY1MTNdLCBbMzcuNzc5NjcsIC0xMjIuNDU2NjEyXSwgWzM3Ljc3OTY0NCwgLTEyMi40NTY2ODhdLCBbMzcuNzc5NjIxLCAtMTIyLjQ1Njc1N10sIFszNy43Nzk2MDUsIC0xMjIuNDU2ODMzXSwgWzM3Ljc3OTU5NCwgLTEyMi40NTY5MDJdLCBbMzcuNzc5NTc5LCAtMTIyLjQ1NzAwMV0sIFszNy43Nzk0NjgsIC0xMjIuNDU2OTc4XSwgWzM3Ljc3OTQwNywgLTEyMi40NTY5NzFdLCBbMzcuNzc5MzgsIC0xMjIuNDU2OTcxXSwgWzM3Ljc3OTM1LCAtMTIyLjQ1Njk3MV0sIFszNy43NzkzMTksIC0xMjIuNDU2OTc4XSwgWzM3Ljc3OTI5MywgLTEyMi40NTY5OTRdLCBbMzcuNzc5MjUxLCAtMTIyLjQ1NzAxNl0sIFszNy43NzkyMTYsIC0xMjIuNDU3MDU1XSwgWzM3Ljc3OTE3NCwgLTEyMi40NTcxXSwgWzM3Ljc3OTEzMiwgLTEyMi40NTcxNDZdLCBbMzcuNzc5MDk4LCAtMTIyLjQ1NzE5Ml0sIFszNy43NzkwNzEsIC0xMjIuNDU3MjNdLCBbMzcuNzc5MDU2LCAtMTIyLjQ1NzI2MV0sIFszNy43NzkwMzMsIC0xMjIuNDU3MzIyXSwgWzM3Ljc3OTAxNCwgLTEyMi40NTczNzVdLCBbMzcuNzc4OTQ1LCAtMTIyLjQ1NzkzMl0sIFszNy43Nzg5MzgsIC0xMjIuNDU3OTddLCBbMzcuNzc4OTMsIC0xMjIuNDU4MDA4XSwgWzM3Ljc3ODkxNSwgLTEyMi40NTgwNTRdLCBbMzcuNzc4ODkyLCAtMTIyLjQ1ODA5Ml0sIFszNy43Nzg4NzMsIC0xMjIuNDU4MTA3XSwgWzM3Ljc3ODg1LCAtMTIyLjQ1ODEyM10sIFszNy43Nzg4MjcsIC0xMjIuNDU4MTNdLCBbMzcuNzc4Nzk3LCAtMTIyLjQ1ODEyM10sIFszNy43Nzg3MjgsIC0xMjIuNDU4MTNdLCBbMzcuNzc4MDkxLCAtMTIyLjQ1ODAwMV0sIFszNy43NzgwMTEsIC0xMjIuNDU4NjU3XSwgWzM3Ljc3NzczNiwgLTEyMi40NTg2NDJdLCBbMzcuNzc3NTk1LCAtMTIyLjQ1ODYzNF0sIFszNy43NzcyODYsIC0xMjIuNDU4NjExXSwgWzM3Ljc3NzEyNiwgLTEyMi40NTg1OTZdLCBbMzcuNzc2ODQ0LCAtMTIyLjQ1ODU3M10sIFszNy43NzYxODcsIC0xMjIuNDU4NTI3XSwgWzM3Ljc3NjExOSwgLTEyMi40NTg1MjddLCBbMzcuNzc1NjE1LCAtMTIyLjQ1ODQ4OV0sIFszNy43NzU1NjksIC0xMjIuNDU4NTA0XSwgWzM3Ljc3NTU2OSwgLTEyMi40NTg1MDRdLCBbMzcuNzc1MjQ1LCAtMTIyLjQ1ODQ1OF0sIFszNy43NzQ5ODIsIC0xMjIuNDU4NDQzXSwgWzM3Ljc3NDcwMywgLTEyMi40NTg0Ml0sIFszNy43NzQ0MSwgLTEyMi40NTg0MDVdLCBbMzcuNzc0Mjk5LCAtMTIyLjQ1ODM5XSwgWzM3Ljc3NDI5OSwgLTEyMi40NTg0NThdLCBbMzcuNzc0Mjk5LCAtMTIyLjQ1ODUxMl0sIFszNy43NzQxMzksIC0xMjIuNDU4NDk3XSwgWzM3Ljc3NDAwMiwgLTEyMi40NTg1MjddLCBbMzcuNzczODQ1LCAtMTIyLjQ1ODYyNl0sIFszNy43NzM1NzEsIC0xMjIuNDU4ODkzXSwgWzM3Ljc3MzI3MywgLTEyMi40NTkxNTNdLCBbMzcuNzczMjA4LCAtMTIyLjQ1OTE0NV0sIFszNy43NzMxOTMsIC0xMjIuNDU5MjY3XSwgWzM3Ljc3MzE0NywgLTEyMi40NTk2MV0sIFszNy43NzMxMTcsIC0xMjIuNDU5ODI0XSwgWzM3Ljc3MzAzNiwgLTEyMi40NjAzOTZdLCBbMzcuNzczMDE0LCAtMTIyLjQ2MDUxMV0sIFszNy43NzI5ODcsIC0xMjIuNDYwNjE4XSwgWzM3Ljc3Mjk1MywgLTEyMi40NjA3MTddLCBbMzcuNzcyOTE4LCAtMTIyLjQ2MDc5M10sIFszNy43NzI4NzIsIC0xMjIuNDYwODc3XSwgWzM3Ljc3MjgxOSwgLTEyMi40NjA5NDZdLCBbMzcuNzcyNzY2LCAtMTIyLjQ2MDk5OV0sIFszNy43NzI3MiwgLTEyMi40NjEwMzddLCBbMzcuNzcyNjU5LCAtMTIyLjQ2MTA4M10sIFszNy43NzI3MDgsIC0xMjIuNDYxMTQ0XSwgWzM3Ljc3MjY1NSwgLTEyMi40NjExNzVdLCBbMzcuNzcyNTc5LCAtMTIyLjQ2MTIxM10sIFszNy43NzI1NDgsIC0xMjIuNDYxMjI4XSwgWzM3Ljc3MjQwNywgLTEyMi40NjEzMzVdLCBbMzcuNzcyMjc0LCAtMTIyLjQ2MTUxXSwgWzM3Ljc3MjE3OCwgLTEyMi40NjE3MTZdLCBbMzcuNzcyMDgzLCAtMTIyLjQ2MTkzXSwgWzM3Ljc3MTk2NSwgLTEyMi40NjIwOV0sIFszNy43NzE5MDMsIC0xMjIuNDYyMTQzXSwgWzM3Ljc3MTkxNSwgLTEyMi40NjIxODJdLCBbMzcuNzcxOTM0LCAtMTIyLjQ2MjI2Nl0sIFszNy43NzE4MzUsIC0xMjIuNDYyMzA0XSwgWzM3Ljc3MTc1OSwgLTEyMi40NjIzNDJdLCBbMzcuNzcxNjg2LCAtMTIyLjQ2MjM1N10sIFszNy43NzE3MzksIC0xMjIuNDYyNTFdLCBbMzcuNzcxNjUyLCAtMTIyLjQ2MjU3MV0sIFszNy43NzE0OCwgLTEyMi40NjI2NTVdLCBbMzcuNzcxNDU3LCAtMTIyLjQ2MjddLCBbMzcuNzcxNDQyLCAtMTIyLjQ2Mjg1M10sIFszNy43NzE0MjcsIC0xMjIuNDYzMDc0XSwgWzM3Ljc3MTI4NiwgLTEyMi40NjMxMl0sIFszNy43NzEyMDksIC0xMjIuNDYzMjVdLCBbMzcuNzcxMTc1LCAtMTIyLjQ2MzUwOV0sIFszNy43NzExNzEsIC0xMjIuNDYzNzM4XSwgWzM3Ljc3MTE1NiwgLTEyMi40NjM5NTldLCBbMzcuNzcxMTE0LCAtMTIyLjQ2NDEyN10sIFszNy43NzEwMTgsIC0xMjIuNDY0MzE4XSwgWzM3Ljc3MDkzMSwgLTEyMi40NjQ1NzddLCBbMzcuNzcwNjI2LCAtMTIyLjQ2NTA1XSwgWzM3Ljc3MDQyMywgLTEyMi40NjUxMDRdLCBbMzcuNzcwMzEzLCAtMTIyLjQ2NTA5Nl0sIFszNy43NzAyMzYsIC0xMjIuNDY0OTUxXSwgWzM3Ljc3MDA5MiwgLTEyMi40NjQ3NzZdLCBbMzcuNzY5OTUsIC0xMjIuNDY0NjA4XSwgWzM3Ljc2OTgwMiwgLTEyMi40NjQ0ODZdLCBbMzcuNzY5NzI1LCAtMTIyLjQ2NDQ3XSwgWzM3Ljc2OTY5NSwgLTEyMi40NjQ1N10sIFszNy43Njk3NiwgLTEyMi40NjQ2MDhdLCBbMzcuNzY5Nzk4LCAtMTIyLjQ2NDY2OV0sIFszNy43Njk4MzIsIC0xMjIuNDY0Nzk4XSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5OTU4LCAtMTIyLjQ2NTAxMl0sIFszNy43Njk5NTgsIC0xMjIuNDY1MDEyXSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5ODMyLCAtMTIyLjQ2NDc5OF0sIFszNy43Njk3OTgsIC0xMjIuNDY0NjY5XSwgWzM3Ljc2OTc2LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk2OTUsIC0xMjIuNDY0NTddLCBbMzcuNzY5NzI1LCAtMTIyLjQ2NDQ3XSwgWzM3Ljc2OTgwMiwgLTEyMi40NjQ0ODZdLCBbMzcuNzY5OTUsIC0xMjIuNDY0NjA4XSwgWzM3Ljc3MDA5MiwgLTEyMi40NjQ3NzZdLCBbMzcuNzcwMjM2LCAtMTIyLjQ2NDk1MV0sIFszNy43NzAzMTMsIC0xMjIuNDY1MDk2XSwgWzM3Ljc3MDQyMywgLTEyMi40NjUxMDRdLCBbMzcuNzcwNjI2LCAtMTIyLjQ2NTA1XSwgWzM3Ljc3MDc5NywgLTEyMi40NjUxMzRdLCBbMzcuNzcwOTQ2LCAtMTIyLjQ2NTE5NV0sIFszNy43NzEwNiwgLTEyMi40NjUxODhdLCBbMzcuNzcxMjI0LCAtMTIyLjQ2NTE4OF0sIFszNy43NzEzNjYsIC0xMjIuNDY1MTk1XSwgWzM3Ljc3MTU3NSwgLTEyMi40NjUyNjRdLCBbMzcuNzcxNzY2LCAtMTIyLjQ2NTI3OV0sIFszNy43NzE5NjUsIC0xMjIuNDY1MzFdLCBbMzcuNzcyMTEzLCAtMTIyLjQ2NTA2Nl0sIFszNy43NzIxNTksIC0xMjIuNDY0OTc0XSwgWzM3Ljc3MjE4MiwgLTEyMi40NjQ4MjldLCBbMzcuNzcyMjcsIC0xMjIuNDY0NzE1XSwgWzM3Ljc3MjMzMSwgLTEyMi40NjQ2OTldLCBbMzcuNzcyMzg0LCAtMTIyLjQ2NDY4NF0sIFszNy43NzI0NiwgLTEyMi40NjQ2NTRdLCBbMzcuNzcyNDMsIC0xMjIuNDY0NTI0XSwgWzM3Ljc3MjM5OSwgLTEyMi40NjQ0MDJdLCBbMzcuNzcyMzY1LCAtMTIyLjQ2NDI3Ml0sIFszNy43NzIzMDgsIC0xMjIuNDY0MDc0XSwgWzM3Ljc3MjM2OSwgLTEyMi40NjQwNDNdLCBbMzcuNzcyNDMsIC0xMjIuNDY0MDEzXSwgWzM3Ljc3MjUyOSwgLTEyMi40NjQwMjhdLCBbMzcuNzcyNjA5LCAtMTIyLjQ2Mzk5N10sIFszNy43NzI4NzIsIC0xMjIuNDYzODk4XSwgWzM3Ljc3MjkzLCAtMTIyLjQ2Mzg2XSwgWzM3Ljc3Mjk5MSwgLTEyMi40NjM4MTRdLCBbMzcuNzczMTA1LCAtMTIyLjQ2Mzc0Nl0sIFszNy43NzMxODksIC0xMjIuNDYzNzM4XSwgWzM3Ljc3MzI4MSwgLTEyMi40NjM3MzhdLCBbMzcuNzczNDA2LCAtMTIyLjQ2Mzc2OV0sIFszNy43NzM0MTQsIC0xMjIuNDYzNzIzXSwgWzM3Ljc3MzQ0OCwgLTEyMi40NjM2NjldLCBbMzcuNzczNDksIC0xMjIuNDYzNjY5XSwgWzM3Ljc3MzUzNiwgLTEyMi40NjM2NjldLCBbMzcuNzczNjUxLCAtMTIyLjQ2MzY2Ml0sIFszNy43NzM2MzUsIC0xMjIuNDYzNzY5XSwgWzM3Ljc3NDIsIC0xMjIuNDYzODA3XSwgWzM3Ljc3NTM3MSwgLTEyMi40NjM4OTFdLCBbMzcuNzc1NDU5LCAtMTIyLjQ2Mzg5OF0sIFszNy43NzcyMzMsIC0xMjIuNDY0MDI4XSwgWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdXSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcF8xZWE1MTllNmM4YWQ0NzU2OWZlMjU5NmMyNzU4MTE0OS5hZGRMYXllcihwb2x5X2xpbmVfNTgxMWE3Y2RlNjE1NDhjYjg3MzkzZTNlYzlmZTk1MDIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L3NjcmlwdD4KICAgICAgICA=" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>
[Full Size]({{ site.baseurl }}/images/optimize_stops_2_people_walk.html)



I also run the function on the same set of stops twice more, specifying bike transportation and then car transportation. As you can see the routes are slightly different, favoring roads that are better for biking or for driving. The times are also much shorter although biking and driving times are actually quite similar. Given how difficult it is to find parking in SF, biking is definitely the way to go here!


```python
opt_2_people_bike = optimize_stops_mult(home, stops, num_travelers = 2, stop_labels = stop_labels, costing = 'bicycle')
print opt_2_people_bike['time']
```

    [11, 18]
    


```python
points = [[opt_2_people_bike['home_point']]] + opt_2_people_bike['points']
labels = [['Home']]+[[' - '.join((str(i), x)) for i, x in enumerate(l, 1)] for l in opt_2_people_bike['order']]

m2 = plot_stops(points, zoom_level = 14, tiles = 'Stamen Watercolor', labels = labels, line_coords = opt_2_people_bike['lines'])
m2
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwXzViZjhhM2E4ZDQ3MTRmODc5ODI0NjkyNDE4NmFkNmQ4IHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF81YmY4YTNhOGQ0NzE0Zjg3OTgyNDY5MjQxODZhZDZkOCIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF81YmY4YTNhOGQ0NzE0Zjg3OTgyNDY5MjQxODZhZDZkOCA9IEwubWFwKCdtYXBfNWJmOGEzYThkNDcxNGY4Nzk4MjQ2OTI0MTg2YWQ2ZDgnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfMWRmNzI5Njk3MmQwNDVlOGIyOWYxNTRkNzgwZjM3NjIgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF81YmY4YTNhOGQ0NzE0Zjg3OTgyNDY5MjQxODZhZDZkOCk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfZjg1NmNkYjhjMjNmNDEyNjgwOTEzZjc5NTI4YjE1NjggPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNWJmOGEzYThkNDcxNGY4Nzk4MjQ2OTI0MTg2YWQ2ZDgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYWJlNzE1ZDEwMDY2NGM1ZjhmOTM4ODEwZGEzZTY3NDcgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2Y4NTZjZGI4YzIzZjQxMjY4MDkxM2Y3OTUyOGIxNTY4LnNldEljb24oaWNvbl9hYmU3MTVkMTAwNjY0YzVmOGY5Mzg4MTBkYTNlNjc0Nyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2E2MzZiNTAzMjEwNTQ3MzFiODgxOWQ0YTBjYTdjODMwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzM0ZjJjZGUyYzM2YTQ1OWU5ZTQ2MGIzYmRjNDBhY2IyID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8zNGYyY2RlMmMzNmE0NTllOWU0NjBiM2JkYzQwYWNiMiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hNjM2YjUwMzIxMDU0NzMxYjg4MTlkNGEwY2E3YzgzMC5zZXRDb250ZW50KGh0bWxfMzRmMmNkZTJjMzZhNDU5ZTllNDYwYjNiZGM0MGFjYjIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9mODU2Y2RiOGMyM2Y0MTI2ODA5MTNmNzk1MjhiMTU2OC5iaW5kUG9wdXAocG9wdXBfYTYzNmI1MDMyMTA1NDczMWI4ODE5ZDRhMGNhN2M4MzApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl81ODI1NzcwNzE3MDE0MDBhOTk4OTY0ZWNlNDVjYjllNCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTEzLC0xMjIuNDY5OTVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF81YmY4YTNhOGQ0NzE0Zjg3OTgyNDY5MjQxODZhZDZkOCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9mMTI0ZDk2YTY2ODM0ZTc0YjAzMDE3MTRkMmQ0ZDI0MSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl81ODI1NzcwNzE3MDE0MDBhOTk4OTY0ZWNlNDVjYjllNC5zZXRJY29uKGljb25fZjEyNGQ5NmE2NjgzNGU3NGIwMzAxNzE0ZDJkNGQyNDEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wMTYzOTY3ZGQ5OTg0YjllOTRkM2FhODFjN2JkYjMwYiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zMjEyZGRmOWE4ZjY0ZDgyOTRhMjZmZGFkODNkZjhmOSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMzIxMmRkZjlhOGY2NGQ4Mjk0YTI2ZmRhZDgzZGY4ZjkiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDEgLSBMYW1wcyBQbHVzPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzAxNjM5NjdkZDk5ODRiOWU5NGQzYWE4MWM3YmRiMzBiLnNldENvbnRlbnQoaHRtbF8zMjEyZGRmOWE4ZjY0ZDgyOTRhMjZmZGFkODNkZjhmOSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzU4MjU3NzA3MTcwMTQwMGE5OTg5NjRlY2U0NWNiOWU0LmJpbmRQb3B1cChwb3B1cF8wMTYzOTY3ZGQ5OTg0YjllOTRkM2FhODFjN2JkYjMwYik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2E3OGUwMTVjNzA3ZTQ1MDdhNGU2M2Q0MWRiMTViNDU1ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgzNzEsLTEyMi40ODNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF81YmY4YTNhOGQ0NzE0Zjg3OTgyNDY5MjQxODZhZDZkOCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8yYWViMGMwMDkzMzY0ZDY5YTBlMGVlMWQxYjhmZGIzMiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9hNzhlMDE1YzcwN2U0NTA3YTRlNjNkNDFkYjE1YjQ1NS5zZXRJY29uKGljb25fMmFlYjBjMDA5MzM2NGQ2OWEwZTBlZTFkMWI4ZmRiMzIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83ZjVhNjBlNGJiNDg0OGNhODczYWExZjM2ZTdiMDg2MyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lNTk0NmUwYmE0MWI0OWVkYmZlMzVlNGM2OWI4MTQ1ZSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfZTU5NDZlMGJhNDFiNDllZGJmZTM1ZTRjNjliODE0NWUiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDIgLSBQaXp6ZXR0YTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83ZjVhNjBlNGJiNDg0OGNhODczYWExZjM2ZTdiMDg2My5zZXRDb250ZW50KGh0bWxfZTU5NDZlMGJhNDFiNDllZGJmZTM1ZTRjNjliODE0NWUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9hNzhlMDE1YzcwN2U0NTA3YTRlNjNkNDFkYjE1YjQ1NS5iaW5kUG9wdXAocG9wdXBfN2Y1YTYwZTRiYjQ4NDhjYTg3M2FhMWYzNmU3YjA4NjMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9lMGFiY2YyYWQ5MmI0NTgxYmRhNGE5YzQ1YTk4YWJkMSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4Mjc4LC0xMjIuNDYzNTFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF81YmY4YTNhOGQ0NzE0Zjg3OTgyNDY5MjQxODZhZDZkOCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9kNjgxN2FiYWUyYWY0N2M2YTA5MzU2YmEzN2RlN2E3YSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2UwYWJjZjJhZDkyYjQ1ODFiZGE0YTljNDVhOThhYmQxLnNldEljb24oaWNvbl9kNjgxN2FiYWUyYWY0N2M2YTA5MzU2YmEzN2RlN2E3YSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzc0YmUxNzM4NDNhZTRhZTVhODU4OGRhZDVjMGZiYmFjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzE3YmQ0N2U4OGFkMjRkMzY4MDY2ZDBjYmZlZTIxOTYzID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8xN2JkNDdlODhhZDI0ZDM2ODA2NmQwY2JmZWUyMTk2MyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMSAtIFRveSBCb2F0PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzc0YmUxNzM4NDNhZTRhZTVhODU4OGRhZDVjMGZiYmFjLnNldENvbnRlbnQoaHRtbF8xN2JkNDdlODhhZDI0ZDM2ODA2NmQwY2JmZWUyMTk2Myk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2UwYWJjZjJhZDkyYjQ1ODFiZGE0YTljNDVhOThhYmQxLmJpbmRQb3B1cChwb3B1cF83NGJlMTczODQzYWU0YWU1YTg1ODhkYWQ1YzBmYmJhYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzAzYTgxNDdkODk1ZDQyZTVhYTNlMTlmMzIyZGU0ODJmID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzg2MjEsLTEyMi40NTE4NF0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzViZjhhM2E4ZDQ3MTRmODc5ODI0NjkyNDE4NmFkNmQ4KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2RmYWE3NzJkODFlNDRlOTc4MmYwZjFiNjNjNWJjYzEwID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfMDNhODE0N2Q4OTVkNDJlNWFhM2UxOWYzMjJkZTQ4MmYuc2V0SWNvbihpY29uX2RmYWE3NzJkODFlNDRlOTc4MmYwZjFiNjNjNWJjYzEwKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDc5ODIzMGFkZmFhNDhiOTgwZDExYmI5ZDc1ZWVlNzkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOTBlNzE1Nzc0ZTk5NDgxOWFhZDA2NTkzOWVjMjc5MzYgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzkwZTcxNTc3NGU5OTQ4MTlhYWQwNjU5MzllYzI3OTM2IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAyIC0gTm9haCYjMzk7cyBCYWdlbHM8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDc5ODIzMGFkZmFhNDhiOTgwZDExYmI5ZDc1ZWVlNzkuc2V0Q29udGVudChodG1sXzkwZTcxNTc3NGU5OTQ4MTlhYWQwNjU5MzllYzI3OTM2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMDNhODE0N2Q4OTVkNDJlNWFhM2UxOWYzMjJkZTQ4MmYuYmluZFBvcHVwKHBvcHVwXzQ3OTgyMzBhZGZhYTQ4Yjk4MGQxMWJiOWQ3NWVlZTc5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNjE5ZTEyY2RiZDNkNDY1NWFhZmIwNTUzYTMzZDg4OGMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzU1OCwtMTIyLjQ1ODMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNWJmOGEzYThkNDcxNGY4Nzk4MjQ2OTI0MTg2YWQ2ZDgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNGRmODI3NjllMmFjNDMyYWJjYzhiMDk5MTRiYWI5NjEgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl82MTllMTJjZGJkM2Q0NjU1YWFmYjA1NTNhMzNkODg4Yy5zZXRJY29uKGljb25fNGRmODI3NjllMmFjNDMyYWJjYzhiMDk5MTRiYWI5NjEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85NmIxNmI5ODVlMDk0NGE2OGY4MDFlNGUxZTM3YzRlYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85ODliMDA0OWExZGY0YTY5YjdiZjgwYmJjZDY2OGJiNyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOTg5YjAwNDlhMWRmNGE2OWI3YmY4MGJiY2Q2NjhiYjciICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDMgLSBBcmd1ZWxsbyBNYXJrZXQ8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOTZiMTZiOTg1ZTA5NDRhNjhmODAxZTRlMWUzN2M0ZWMuc2V0Q29udGVudChodG1sXzk4OWIwMDQ5YTFkZjRhNjliN2JmODBiYmNkNjY4YmI3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNjE5ZTEyY2RiZDNkNDY1NWFhZmIwNTUzYTMzZDg4OGMuYmluZFBvcHVwKHBvcHVwXzk2YjE2Yjk4NWUwOTQ0YTY4ZjgwMWU0ZTFlMzdjNGVjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNDdkODczYmQxZWU2NGNlMDk3MGFmNDU5ODQ5MTVkNTcgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzAwMiwtMTIyLjQ2NTYxXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNWJmOGEzYThkNDcxNGY4Nzk4MjQ2OTI0MTg2YWQ2ZDgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fM2E0ODEyODQ4MzAwNDYwZGE3MGMxOTE3MjYxNDE4NjQgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl80N2Q4NzNiZDFlZTY0Y2UwOTcwYWY0NTk4NDkxNWQ1Ny5zZXRJY29uKGljb25fM2E0ODEyODQ4MzAwNDYwZGE3MGMxOTE3MjYxNDE4NjQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iNzkzZDgzNTIyZjA0MzY4YjY2ZjZmOTNmMmIzYTUyZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hOTQyM2JiNzRhOWU0MWRlOGEzNzY4ZDJlYTAxOWVjZiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYTk0MjNiYjc0YTllNDFkZThhMzc2OGQyZWEwMTllY2YiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDQgLSBkZSBZb3VuZyBNdXNldW08L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjc5M2Q4MzUyMmYwNDM2OGI2NmY2ZjkzZjJiM2E1MmUuc2V0Q29udGVudChodG1sX2E5NDIzYmI3NGE5ZTQxZGU4YTM3NjhkMmVhMDE5ZWNmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNDdkODczYmQxZWU2NGNlMDk3MGFmNDU5ODQ5MTVkNTcuYmluZFBvcHVwKHBvcHVwX2I3OTNkODM1MjJmMDQzNjhiNjZmNmY5M2YyYjNhNTJlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBwb2x5X2xpbmVfNTUyYTQwOTExNzc1NDg2NTk5ZThhZGU2Y2ViNGZhNTggPSBMLnBvbHlsaW5lKAogICAgICAgICAgICAgICAgICAgIFtbMzcuNzc5MTA2LCAtMTIyLjQ2NDE1OF0sIFszNy43NzkwNTYsIC0xMjIuNDY1MjMzXSwgWzM3Ljc3OTAwNiwgLTEyMi40NjYzMDFdLCBbMzcuNzc4OTU3LCAtMTIyLjQ2NzM3N10sIFszNy43Nzg5MDcsIC0xMjIuNDY4NDQ1XSwgWzM3Ljc3ODg2MSwgLTEyMi40Njk1MTNdLCBbMzcuNzgwNzIzLCAtMTIyLjQ2OTY1MV0sIFszNy43ODA4NDUsIC0xMjIuNDY5NjU4XSwgWzM3Ljc4MTE1LCAtMTIyLjQ2OTcwNF0sIFszNy43ODExNSwgLTEyMi40Njk3MDRdLCBbMzcuNzgwODQ1LCAtMTIyLjQ2OTY1OF0sIFszNy43ODA4MTUsIC0xMjIuNDcwMzgzXSwgWzM3Ljc4MDc5NiwgLTEyMi40NzA3MjddLCBbMzcuNzgwNzUsIC0xMjIuNDcxODAyXSwgWzM3Ljc4MDczOCwgLTEyMi40NzE5OTNdLCBbMzcuNzgwNzMxLCAtMTIyLjQ3MjE3Nl0sIFszNy43ODA3MjcsIC0xMjIuNDcyMjY4XSwgWzM3Ljc4MDcxOSwgLTEyMi40NzI0MDVdLCBbMzcuNzgwNzE5LCAtMTIyLjQ3MjQ4OV0sIFszNy43ODA3LCAtMTIyLjQ3Mjg3XSwgWzM3Ljc4MDY3LCAtMTIyLjQ3MzUwNF0sIFszNy43ODA2NTEsIC0xMjIuNDczOTkyXSwgWzM3Ljc4MDU5NywgLTEyMi40NzUxMTNdLCBbMzcuNzgwNTUxLCAtMTIyLjQ3NjE4OV0sIFszNy43ODA1MTMsIC0xMjIuNDc2OTM3XSwgWzM3Ljc4MDUwMiwgLTEyMi40NzcyNTddLCBbMzcuNzgwNDY3LCAtMTIyLjQ3Nzk3NF0sIFszNy43ODA0NTIsIC0xMjIuNDc4MzMzXSwgWzM3Ljc4MDQwMywgLTEyMi40Nzk0MDFdLCBbMzcuNzgwMzU3LCAtMTIyLjQ4MDQ3N10sIFszNy43ODAzMjYsIC0xMjIuNDgxMTMzXSwgWzM3Ljc4MDMwNywgLTEyMi40ODE1NDVdLCBbMzcuNzgwMjc3LCAtMTIyLjQ4MjIzOV0sIFszNy43ODAyNTgsIC0xMjIuNDgyNjEzXSwgWzM3Ljc4MTczOCwgLTEyMi40ODI3Ml0sIFszNy43ODIxMTksIC0xMjIuNDgyNzVdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODM3MTgsIC0xMjIuNDgyOTAzXSwgWzM3Ljc4MjExOSwgLTEyMi40ODI3NV0sIFszNy43ODE3MzgsIC0xMjIuNDgyNzJdLCBbMzcuNzgwMjU4LCAtMTIyLjQ4MjYxM10sIFszNy43ODAxMzIsIC0xMjIuNDgyNjA1XSwgWzM3Ljc3ODI3LCAtMTIyLjQ4MjQ2OF0sIFszNy43NzgzMiwgLTEyMi40ODE0XSwgWzM3Ljc3ODM2OSwgLTEyMi40ODAzMzJdLCBbMzcuNzc4NDE1LCAtMTIyLjQ3OTI1Nl0sIFszNy43Nzg0NjUsIC0xMjIuNDc4MTg4XSwgWzM3Ljc3ODUxNCwgLTEyMi40NzcxMTJdLCBbMzcuNzc4NTY0LCAtMTIyLjQ3NjA0NF0sIFszNy43Nzg2MSwgLTEyMi40NzQ5NzZdLCBbMzcuNzc4NjYzLCAtMTIyLjQ3Mzg0N10sIFszNy43Nzg3MTMsIC0xMjIuNDcyNzI1XSwgWzM3Ljc3ODczNiwgLTEyMi40NzIyNl0sIFszNy43Nzg3NDMsIC0xMjIuNDcyMTIzXSwgWzM3Ljc3ODc1NSwgLTEyMi40NzE4NF0sIFszNy43Nzg3NjIsIC0xMjIuNDcxNjU3XSwgWzM3Ljc3ODc4MSwgLTEyMi40NzEyM10sIFszNy43Nzg4MTIsIC0xMjIuNDcwNTg5XSwgWzM3Ljc3ODg2MSwgLTEyMi40Njk1MTNdLCBbMzcuNzc4OTA3LCAtMTIyLjQ2ODQ0NV0sIFszNy43Nzg5NTcsIC0xMjIuNDY3Mzc3XSwgWzM3Ljc3OTAwNiwgLTEyMi40NjYzMDFdLCBbMzcuNzc5MDU2LCAtMTIyLjQ2NTIzM10sIFszNy43NzkxMDYsIC0xMjIuNDY0MTU4XV0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFwXzViZjhhM2E4ZDQ3MTRmODc5ODI0NjkyNDE4NmFkNmQ4LmFkZExheWVyKHBvbHlfbGluZV81NTJhNDA5MTE3NzU0ODY1OTllOGFkZTZjZWI0ZmE1OCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBwb2x5X2xpbmVfZWY2NTJkYWE5MTgxNGVlNThmZjFkZDZjNWRiNzZiMzkgPSBMLnBvbHlsaW5lKAogICAgICAgICAgICAgICAgICAgIFtbMzcuNzc5MTA5LCAtMTIyLjQ2NDIwM10sIFszNy43NzkxNTEsIC0xMjIuNDYzMDk3XSwgWzM3Ljc4MTAxNywgLTEyMi40NjMyMjddLCBbMzcuNzgxMTM5LCAtMTIyLjQ2MzIzNF0sIFszNy43ODE1MzksIC0xMjIuNDYzMjY1XSwgWzM3Ljc4Mjc5MSwgLTEyMi40NjM0MDJdLCBbMzcuNzgyNzkxLCAtMTIyLjQ2MzQwMl0sIFszNy43ODMsIC0xMjIuNDYzMzcyXSwgWzM3Ljc4MzA1LCAtMTIyLjQ2MjI5Nl0sIFszNy43ODMwOTYsIC0xMjIuNDYxMjI4XSwgWzM3Ljc4MzE0NSwgLTEyMi40NjAxNTJdLCBbMzcuNzgzMTk1LCAtMTIyLjQ1OTAzMV0sIFszNy43ODM2MTUsIC0xMjIuNDU5MDYxXSwgWzM3Ljc4MzgyNCwgLTEyMi40NTkwNzZdLCBbMzcuNzgzODc4LCAtMTIyLjQ1Nzk0XSwgWzM3Ljc4MzkyNywgLTEyMi40NTY4MzNdLCBbMzcuNzgzOTc3LCAtMTIyLjQ1NTczNV0sIFszNy43ODQwMywgLTEyMi40NTQ2MjhdLCBbMzcuNzg0MDM4LCAtMTIyLjQ1NDQxNV0sIFszNy43ODQwNDksIC0xMjIuNDU0MjI0XSwgWzM3Ljc4NDA1MywgLTEyMi40NTQwMzNdLCBbMzcuNzg0MDU3LCAtMTIyLjQ1Mzg0M10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4NDE2OCwgLTEyMi40NTM2NjddLCBbMzcuNzg0MjY3LCAtMTIyLjQ1MzY4Ml0sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDQ5NiwgLTEyMi40NTM3MTNdLCBbMzcuNzg0NjE0LCAtMTIyLjQ1MzcyOF0sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDg1MSwgLTEyMi40NTM3NDNdLCBbMzcuNzg0OTc2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NTIzNiwgLTEyMi40NTM3NTldLCBbMzcuNzg1MzU4LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTUxMSwgLTEyMi40NTM3NTldLCBbMzcuNzg1NTU2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTYzMywgLTEyMi40NTM2OThdLCBbMzcuNzg1NjU5LCAtMTIyLjQ1MzY2XSwgWzM3Ljc4NTY4MiwgLTEyMi40NTM2MTRdLCBbMzcuNzg1Njk0LCAtMTIyLjQ1MzU2XSwgWzM3Ljc4NTcwNSwgLTEyMi40NTM0OTldLCBbMzcuNzg1NzEzLCAtMTIyLjQ1MzQzMV0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcyNCwgLTEyMi40NTMyNzhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1ODc3LCAtMTIyLjQ1MjA4XSwgWzM3Ljc4NTkxMSwgLTEyMi40NTE3OThdLCBbMzcuNzg1OTExLCAtMTIyLjQ1MTc5OF0sIFszNy43ODU4NzcsIC0xMjIuNDUyMDhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1NzI0LCAtMTIyLjQ1MzI3OF0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcxMywgLTEyMi40NTM0MzFdLCBbMzcuNzg1NzA1LCAtMTIyLjQ1MzQ5OV0sIFszNy43ODU2OTQsIC0xMjIuNDUzNTZdLCBbMzcuNzg1NjgyLCAtMTIyLjQ1MzYxNF0sIFszNy43ODU2NTksIC0xMjIuNDUzNjZdLCBbMzcuNzg1NjMzLCAtMTIyLjQ1MzY5OF0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTU1NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg1NTExLCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTM1OCwgLTEyMi40NTM3NTldLCBbMzcuNzg1MjM2LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NDk3NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg0ODUxLCAtMTIyLjQ1Mzc0M10sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDYxNCwgLTEyMi40NTM3MjhdLCBbMzcuNzg0NDk2LCAtMTIyLjQ1MzcxM10sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDI2NywgLTEyMi40NTM2ODJdLCBbMzcuNzg0MTY4LCAtMTIyLjQ1MzY2N10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4NDA1NywgLTEyMi40NTM4NDNdLCBbMzcuNzg0MDUzLCAtMTIyLjQ1NDAzM10sIFszNy43ODQwNDksIC0xMjIuNDU0MjI0XSwgWzM3Ljc4NDAzOCwgLTEyMi40NTQ0MTVdLCBbMzcuNzg0MDMsIC0xMjIuNDU0NjI4XSwgWzM3Ljc4Mzk3NywgLTEyMi40NTU3MzVdLCBbMzcuNzgzOTI3LCAtMTIyLjQ1NjgzM10sIFszNy43ODM4NzgsIC0xMjIuNDU3OTRdLCBbMzcuNzgzODI0LCAtMTIyLjQ1OTA3Nl0sIFszNy43ODM2MTUsIC0xMjIuNDU5MDYxXSwgWzM3Ljc4MzE5NSwgLTEyMi40NTkwMzFdLCBbMzcuNzgyNzk4LCAtMTIyLjQ1OTAwOF0sIFszNy43ODI3NiwgLTEyMi40NTldLCBbMzcuNzgxODQ4LCAtMTIyLjQ1ODkzOV0sIFszNy43ODEzMzMsIC0xMjIuNDU4OTAxXSwgWzM3Ljc4MTIxMSwgLTEyMi40NTg4OTNdLCBbMzcuNzgwNTc0LCAtMTIyLjQ1ODg0OF0sIFszNy43Nzk3MzEsIC0xMjIuNDU4Nzg3XSwgWzM3Ljc3OTM1NywgLTEyMi40NTg3NTZdLCBbMzcuNzc4ODU4LCAtMTIyLjQ1ODcxOF0sIFszNy43Nzg3NzQsIC0xMjIuNDU4NzE4XSwgWzM3Ljc3ODAxMSwgLTEyMi40NTg2NTddLCBbMzcuNzc3NzM2LCAtMTIyLjQ1ODY0Ml0sIFszNy43Nzc1OTUsIC0xMjIuNDU4NjM0XSwgWzM3Ljc3NzI4NiwgLTEyMi40NTg2MTFdLCBbMzcuNzc3MTI2LCAtMTIyLjQ1ODU5Nl0sIFszNy43NzY4NDQsIC0xMjIuNDU4NTczXSwgWzM3Ljc3NjE4NywgLTEyMi40NTg1MjddLCBbMzcuNzc2MTE5LCAtMTIyLjQ1ODUyN10sIFszNy43NzU2MTUsIC0xMjIuNDU4NDg5XSwgWzM3Ljc3NTU2OSwgLTEyMi40NTg1MDRdLCBbMzcuNzc1NTY5LCAtMTIyLjQ1ODUwNF0sIFszNy43NzUyNDUsIC0xMjIuNDU4NDU4XSwgWzM3Ljc3NDk4MiwgLTEyMi40NTg0NDNdLCBbMzcuNzc0NzAzLCAtMTIyLjQ1ODQyXSwgWzM3Ljc3NDQxLCAtMTIyLjQ1ODQwNV0sIFszNy43NzQyOTksIC0xMjIuNDU4MzldLCBbMzcuNzc0MjE1LCAtMTIyLjQ1ODM4Ml0sIFszNy43NzQxNzMsIC0xMjIuNDU4Mzc1XSwgWzM3Ljc3NDExNiwgLTEyMi40NTgzODJdLCBbMzcuNzc0MDY2LCAtMTIyLjQ1ODM5XSwgWzM3Ljc3NDAxNywgLTEyMi40NTg0MDVdLCBbMzcuNzczOTYzLCAtMTIyLjQ1ODQyOF0sIFszNy43NzM5MDIsIC0xMjIuNDU4NDY2XSwgWzM3Ljc3Mzg0MSwgLTEyMi40NTg1MTJdLCBbMzcuNzczNzg4LCAtMTIyLjQ1ODU1OF0sIFszNy43NzM2NDMsIC0xMjIuNDU4Njk1XSwgWzM3Ljc3MzUzMiwgLTEyMi40NTg4MDJdLCBbMzcuNzczNDQxLCAtMTIyLjQ1ODg4Nl0sIFszNy43NzMzNDksIC0xMjIuNDU4OTc3XSwgWzM3Ljc3MzI5NiwgLTEyMi40NTkwMTVdLCBbMzcuNzczMjYyLCAtMTIyLjQ1OTAzMV0sIFszNy43NzMyMjcsIC0xMjIuNDU5MDM4XSwgWzM3Ljc3MzIwOCwgLTEyMi40NTkxNDVdLCBbMzcuNzczMTkzLCAtMTIyLjQ1OTI2N10sIFszNy43NzMxNDcsIC0xMjIuNDU5NjFdLCBbMzcuNzczMTE3LCAtMTIyLjQ1OTgyNF0sIFszNy43NzMwMzYsIC0xMjIuNDYwMzk2XSwgWzM3Ljc3MzAxNCwgLTEyMi40NjA1MTFdLCBbMzcuNzcyOTg3LCAtMTIyLjQ2MDYxOF0sIFszNy43NzI5NTMsIC0xMjIuNDYwNzE3XSwgWzM3Ljc3MjkxOCwgLTEyMi40NjA3OTNdLCBbMzcuNzcyODcyLCAtMTIyLjQ2MDg3N10sIFszNy43NzI4MTksIC0xMjIuNDYwOTQ2XSwgWzM3Ljc3Mjc2NiwgLTEyMi40NjA5OTldLCBbMzcuNzcyNzIsIC0xMjIuNDYxMDM3XSwgWzM3Ljc3MjY1OSwgLTEyMi40NjEwODNdLCBbMzcuNzcyNTk4LCAtMTIyLjQ2MTEyMV0sIFszNy43NzI1MzcsIC0xMjIuNDYxMTU5XSwgWzM3Ljc3MjQ2NCwgLTEyMi40NjEyMTNdLCBbMzcuNzcyNDAzLCAtMTIyLjQ2MTI2Nl0sIFszNy43NzIzNDYsIC0xMjIuNDYxMzE5XSwgWzM3Ljc3MjI4NSwgLTEyMi40NjEzODhdLCBbMzcuNzcyMjI4LCAtMTIyLjQ2MTQ3Ml0sIFszNy43NzIxNzEsIC0xMjIuNDYxNTY0XSwgWzM3Ljc3MjEyMSwgLTEyMi40NjE2NjNdLCBbMzcuNzcyMDM3LCAtMTIyLjQ2MTgzMV0sIFszNy43NzIwMDMsIC0xMjIuNDYxODkyXSwgWzM3Ljc3MTk2OCwgLTEyMi40NjE5MzddLCBbMzcuNzcxOTE1LCAtMTIyLjQ2MTk4M10sIFszNy43NzE4NzMsIC0xMjIuNDYyMDA2XSwgWzM3Ljc3MTgzMSwgLTEyMi40NjIwMjldLCBbMzcuNzcxNzc4LCAtMTIyLjQ2MjA1Ml0sIFszNy43NzE3NTUsIC0xMjIuNDYxOTIyXSwgWzM3Ljc3MTcyNCwgLTEyMi40NjE3MzldLCBbMzcuNzcxNTc1LCAtMTIyLjQ2MDgzMV0sIFszNy43NzE1NDUsIC0xMjIuNDYwNjMzXSwgWzM3Ljc3MTQ0MiwgLTEyMi40NTk5NTRdLCBbMzcuNzcxNDE5LCAtMTIyLjQ1OTgyNF0sIFszNy43NzEzMzksIC0xMjIuNDU5MzQzXSwgWzM3Ljc3MTMxNiwgLTEyMi40NTkxNzZdLCBbMzcuNzcxMjgyLCAtMTIyLjQ1OTE4M10sIFszNy43NzEyNTEsIC0xMjIuNDU5MTk4XSwgWzM3Ljc3MTIyNCwgLTEyMi40NTkyMDZdLCBbMzcuNzcxMTI1LCAtMTIyLjQ1OTI0NF0sIFszNy43NzEwNDEsIC0xMjIuNDU5MjgyXSwgWzM3Ljc3MDk2OSwgLTEyMi40NTkzMjFdLCBbMzcuNzcwODk2LCAtMTIyLjQ1OTM1OV0sIFszNy43NzA4MjgsIC0xMjIuNDU5NDA0XSwgWzM3Ljc3MDc2NywgLTEyMi40NTk0NV0sIFszNy43NzA3MDYsIC0xMjIuNDU5NTExXSwgWzM3Ljc3MDY1MiwgLTEyMi40NTk1NzJdLCBbMzcuNzcwNjI2LCAtMTIyLjQ1OTYwM10sIFszNy43NzA1OTksIC0xMjIuNDU5NjQxXSwgWzM3Ljc3MDU1MywgLTEyMi40NTk3MV0sIFszNy43NzA1MTEsIC0xMjIuNDU5Nzk0XSwgWzM3Ljc3MDQ3MywgLTEyMi40NTk4ODVdLCBbMzcuNzcwNDM5LCAtMTIyLjQ1OTk4NF0sIFszNy43NzA0MTYsIC0xMjIuNDYwMDc2XSwgWzM3Ljc3MDM5NywgLTEyMi40NjAxOV0sIFszNy43NzAzNzgsIC0xMjIuNDYwMzA1XSwgWzM3Ljc3MDM2MiwgLTEyMi40NjA0NV0sIFszNy43NzAzNTEsIC0xMjIuNDYwNTk1XSwgWzM3Ljc3MDMzOSwgLTEyMi40NjA3NF0sIFszNy43NzAzMzIsIC0xMjIuNDYwODc3XSwgWzM3Ljc3MDMzNiwgLTEyMi40NjEwMTRdLCBbMzcuNzcwMzQzLCAtMTIyLjQ2MTE1Ml0sIFszNy43NzAzNDMsIC0xMjIuNDYxMjg5XSwgWzM3Ljc3MDMzOSwgLTEyMi40NjE0MTldLCBbMzcuNzcwMzI4LCAtMTIyLjQ2MTU0MV0sIFszNy43NzAzMTMsIC0xMjIuNDYxNjc4XSwgWzM3Ljc3MDI5LCAtMTIyLjQ2MThdLCBbMzcuNzcwMjYzLCAtMTIyLjQ2MTkzN10sIFszNy43NzAyMzYsIC0xMjIuNDYyMDUyXSwgWzM3Ljc2OTk5NiwgLTEyMi40NjMwNTldLCBbMzcuNzY5OTc3LCAtMTIyLjQ2MzE0M10sIFszNy43Njk3MTgsIC0xMjIuNDY0MjY0XSwgWzM3Ljc2OTY4LCAtMTIyLjQ2NDQwMl0sIFszNy43Njk2NjgsIC0xMjIuNDY0NDQ4XSwgWzM3Ljc2OTYzOCwgLTEyMi40NjQ1MjRdLCBbMzcuNzY5Njk1LCAtMTIyLjQ2NDU3XSwgWzM3Ljc2OTc2LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk3OTgsIC0xMjIuNDY0NjY5XSwgWzM3Ljc2OTgzMiwgLTEyMi40NjQ3OThdLCBbMzcuNzY5ODYzLCAtMTIyLjQ2NDg4Ml0sIFszNy43Njk5NTgsIC0xMjIuNDY1MDEyXSwgWzM3Ljc2OTk1OCwgLTEyMi40NjUwMTJdLCBbMzcuNzY5ODYzLCAtMTIyLjQ2NDg4Ml0sIFszNy43Njk4MzIsIC0xMjIuNDY0Nzk4XSwgWzM3Ljc2OTc5OCwgLTEyMi40NjQ2NjldLCBbMzcuNzY5NzYsIC0xMjIuNDY0NjA4XSwgWzM3Ljc2OTY5NSwgLTEyMi40NjQ1N10sIFszNy43Njk2MzgsIC0xMjIuNDY0NTI0XSwgWzM3Ljc2OTY2OCwgLTEyMi40NjQ0NDhdLCBbMzcuNzY5NjgsIC0xMjIuNDY0NDAyXSwgWzM3Ljc2OTcxOCwgLTEyMi40NjQyNjRdLCBbMzcuNzY5OTc3LCAtMTIyLjQ2MzE0M10sIFszNy43Njk5OTYsIC0xMjIuNDYzMDU5XSwgWzM3Ljc3MDIzNiwgLTEyMi40NjIwNTJdLCBbMzcuNzcwMjYzLCAtMTIyLjQ2MTkzN10sIFszNy43NzAyOSwgLTEyMi40NjE4XSwgWzM3Ljc3MDMxMywgLTEyMi40NjE2NzhdLCBbMzcuNzcwMzI4LCAtMTIyLjQ2MTU0MV0sIFszNy43NzAzMzksIC0xMjIuNDYxNDE5XSwgWzM3Ljc3MDM0MywgLTEyMi40NjEyODldLCBbMzcuNzcwMzQzLCAtMTIyLjQ2MTE1Ml0sIFszNy43NzAzMzYsIC0xMjIuNDYxMDE0XSwgWzM3Ljc3MDMzMiwgLTEyMi40NjA4NzddLCBbMzcuNzcwMzM5LCAtMTIyLjQ2MDc0XSwgWzM3Ljc3MDM1MSwgLTEyMi40NjA1OTVdLCBbMzcuNzcwMzYyLCAtMTIyLjQ2MDQ1XSwgWzM3Ljc3MDM3OCwgLTEyMi40NjAzMDVdLCBbMzcuNzcwMzk3LCAtMTIyLjQ2MDE5XSwgWzM3Ljc3MDQxNiwgLTEyMi40NjAwNzZdLCBbMzcuNzcwNDM5LCAtMTIyLjQ1OTk4NF0sIFszNy43NzA0NzMsIC0xMjIuNDU5ODg1XSwgWzM3Ljc3MDUxMSwgLTEyMi40NTk3OTRdLCBbMzcuNzcwNTUzLCAtMTIyLjQ1OTcxXSwgWzM3Ljc3MDU5OSwgLTEyMi40NTk2NDFdLCBbMzcuNzcwNjI2LCAtMTIyLjQ1OTYwM10sIFszNy43NzA2NTIsIC0xMjIuNDU5NTcyXSwgWzM3Ljc3MDcwNiwgLTEyMi40NTk1MTFdLCBbMzcuNzcwNzY3LCAtMTIyLjQ1OTQ1XSwgWzM3Ljc3MDgyOCwgLTEyMi40NTk0MDRdLCBbMzcuNzcwODk2LCAtMTIyLjQ1OTM1OV0sIFszNy43NzA5NjksIC0xMjIuNDU5MzIxXSwgWzM3Ljc3MTA0MSwgLTEyMi40NTkyODJdLCBbMzcuNzcxMTI1LCAtMTIyLjQ1OTI0NF0sIFszNy43NzEyMjQsIC0xMjIuNDU5MjA2XSwgWzM3Ljc3MTI1MSwgLTEyMi40NTkxOThdLCBbMzcuNzcxMjgyLCAtMTIyLjQ1OTE4M10sIFszNy43NzEzMTYsIC0xMjIuNDU5MTc2XSwgWzM3Ljc3MTMzOSwgLTEyMi40NTkzNDNdLCBbMzcuNzcxNDE5LCAtMTIyLjQ1OTgyNF0sIFszNy43NzE0NDIsIC0xMjIuNDU5OTU0XSwgWzM3Ljc3MTU0NSwgLTEyMi40NjA2MzNdLCBbMzcuNzcxNTc1LCAtMTIyLjQ2MDgzMV0sIFszNy43NzE3MjQsIC0xMjIuNDYxNzM5XSwgWzM3Ljc3MTc1NSwgLTEyMi40NjE5MjJdLCBbMzcuNzcxNzc4LCAtMTIyLjQ2MjA1Ml0sIFszNy43NzE4MDgsIC0xMjIuNDYyMTgyXSwgWzM3Ljc3MTgzNSwgLTEyMi40NjIzMDRdLCBbMzcuNzcxOTc2LCAtMTIyLjQ2Mjg1M10sIFszNy43NzIwMjksIC0xMjIuNDYzMDUxXSwgWzM3Ljc3MjA4MywgLTEyMi40NjMyNV0sIFszNy43NzIxNDgsIC0xMjIuNDYzNDk0XSwgWzM3Ljc3MjI2NiwgLTEyMi40NjM5MTNdLCBbMzcuNzcyMzA4LCAtMTIyLjQ2NDA3NF0sIFszNy43NzIzNjUsIC0xMjIuNDY0MjcyXSwgWzM3Ljc3MjM5OSwgLTEyMi40NjQ0MDJdLCBbMzcuNzcyNDMsIC0xMjIuNDY0NTI0XSwgWzM3Ljc3MjQ2LCAtMTIyLjQ2NDY1NF0sIFszNy43NzI0ODcsIC0xMjIuNDY0NzkxXSwgWzM3Ljc3MjUxLCAtMTIyLjQ2NDkyMV0sIFszNy43NzI1MzMsIC0xMjIuNDY1MDVdLCBbMzcuNzcyNTU2LCAtMTIyLjQ2NTE4XSwgWzM3Ljc3MjU2MywgLTEyMi40NjUyMjZdLCBbMzcuNzcyNTc1LCAtMTIyLjQ2NTMxXSwgWzM3Ljc3MjU5LCAtMTIyLjQ2NTQyNF0sIFszNy43NzI2MDIsIC0xMjIuNDY1NTM5XSwgWzM3Ljc3MjYwOSwgLTEyMi40NjU2NTNdLCBbMzcuNzcyNjEzLCAtMTIyLjQ2NTc0NV0sIFszNy43NzI2MTMsIC0xMjIuNDY1ODQ0XSwgWzM3Ljc3MjcxMiwgLTEyMi40NjU4NTFdLCBbMzcuNzcyNzg1LCAtMTIyLjQ2NTg1OV0sIFszNy43NzI5NTMsIC0xMjIuNDY1ODY3XSwgWzM3Ljc3MzE3LCAtMTIyLjQ2NTg4Ml0sIFszNy43NzM0MDMsIC0xMjIuNDY1ODk3XSwgWzM3Ljc3NTI3MiwgLTEyMi40NjYwMzRdLCBbMzcuNzc3MTM3LCAtMTIyLjQ2NjE2NF0sIFszNy43Nzg5MTUsIC0xMjIuNDY2Mjk0XSwgWzM3Ljc3OTAwNiwgLTEyMi40NjYzMDFdLCBbMzcuNzc5MDU2LCAtMTIyLjQ2NTIzM10sIFszNy43NzkxMDYsIC0xMjIuNDY0MTU4XV0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXBfNWJmOGEzYThkNDcxNGY4Nzk4MjQ2OTI0MTg2YWQ2ZDguYWRkTGF5ZXIocG9seV9saW5lX2VmNjUyZGFhOTE4MTRlZTU4ZmYxZGQ2YzVkYjc2YjM5KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgPC9zY3JpcHQ+CiAgICAgICAg" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>
[Full Size]({{ site.baseurl }}/images/optimize_stops_2_people_bike.html)




```python
opt_2_people_drive = optimize_stops_mult(home, stops, num_travelers = 2, stop_labels = stop_labels, costing = 'auto')
print opt_2_people_drive['time']
```

    [17, 15]
    


```python
points = [[opt_2_people_drive['home_point']]] + opt_2_people_drive['points']
labels = [['Home']]+[[' - '.join((str(i), x)) for i, x in enumerate(l, 1)] for l in opt_2_people_drive['order']]

m3 = plot_stops(points, zoom_level = 14, tiles = 'Stamen Watercolor', labels = labels, line_coords = opt_2_people_drive['lines'])
m3
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwX2M4YmViNjFmMDMyNDRkZWE4NTk5MzZiYmMwMDg2ZWViIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF9jOGJlYjYxZjAzMjQ0ZGVhODU5OTM2YmJjMDA4NmVlYiIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF9jOGJlYjYxZjAzMjQ0ZGVhODU5OTM2YmJjMDA4NmVlYiA9IEwubWFwKCdtYXBfYzhiZWI2MWYwMzI0NGRlYTg1OTkzNmJiYzAwODZlZWInLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfMjZjN2M1ZThjNTU4NDY3M2EwNzM2NzkxMDdhYTIzNTAgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9jOGJlYjYxZjAzMjQ0ZGVhODU5OTM2YmJjMDA4NmVlYik7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYmI5ODUwYjUyYzc4NDIwNmJlNjdhZWY4N2M1NDkyOGMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzhiZWI2MWYwMzI0NGRlYTg1OTkzNmJiYzAwODZlZWIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYmJiZTM0ZWE0Yjc1NDc3OGIwYzRhMGM2MzUwZTg4ODkgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2JiOTg1MGI1MmM3ODQyMDZiZTY3YWVmODdjNTQ5MjhjLnNldEljb24oaWNvbl9iYmJlMzRlYTRiNzU0Nzc4YjBjNGEwYzYzNTBlODg4OSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzI5ODk2ZGQ3NTFkOTQxYzdiMjY3YTlhZWYyZmM2MDlkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzBlYjFlNmI2MjAzNzQ3MWZhNjkyMDAxOWU3MjE0ZjU4ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8wZWIxZTZiNjIwMzc0NzFmYTY5MjAwMTllNzIxNGY1OCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yOTg5NmRkNzUxZDk0MWM3YjI2N2E5YWVmMmZjNjA5ZC5zZXRDb250ZW50KGh0bWxfMGViMWU2YjYyMDM3NDcxZmE2OTIwMDE5ZTcyMTRmNTgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9iYjk4NTBiNTJjNzg0MjA2YmU2N2FlZjg3YzU0OTI4Yy5iaW5kUG9wdXAocG9wdXBfMjk4OTZkZDc1MWQ5NDFjN2IyNjdhOWFlZjJmYzYwOWQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl83M2MzODJiOGE5Y2Y0Nzg5OGI0ODRkNGQ1MGI2NDM3YyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NjIxLC0xMjIuNDUxODRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jOGJlYjYxZjAzMjQ0ZGVhODU5OTM2YmJjMDA4NmVlYik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl85YmQ4NTVmYmM4ZmQ0ZGQyODY1MDRiNDRmNDgwMDJjYiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl83M2MzODJiOGE5Y2Y0Nzg5OGI0ODRkNGQ1MGI2NDM3Yy5zZXRJY29uKGljb25fOWJkODU1ZmJjOGZkNGRkMjg2NTA0YjQ0ZjQ4MDAyY2IpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mYTczNzViYjZkZDk0YzQzYmQxN2Q0OGEwOWJmMDkxNiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jNjQ4ZGFlZDgyMjI0ZDU4YjhjYWQ0ZmI0ODlmZDgxYyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYzY0OGRhZWQ4MjIyNGQ1OGI4Y2FkNGZiNDg5ZmQ4MWMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDEgLSBOb2FoJiMzOTtzIEJhZ2VsczwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mYTczNzViYjZkZDk0YzQzYmQxN2Q0OGEwOWJmMDkxNi5zZXRDb250ZW50KGh0bWxfYzY0OGRhZWQ4MjIyNGQ1OGI4Y2FkNGZiNDg5ZmQ4MWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl83M2MzODJiOGE5Y2Y0Nzg5OGI0ODRkNGQ1MGI2NDM3Yy5iaW5kUG9wdXAocG9wdXBfZmE3Mzc1YmI2ZGQ5NGM0M2JkMTdkNDhhMDliZjA5MTYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl84ZmE0OTJiMzZkZWQ0YWUwYWM3M2Y5YTUyMGZiYTE1ZCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3MDAyLC0xMjIuNDY1NjFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jOGJlYjYxZjAzMjQ0ZGVhODU5OTM2YmJjMDA4NmVlYik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl80MTRhNjU5NTBhMGY0NTQyODk3NjljZmI0YTFmYWY3ZCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl84ZmE0OTJiMzZkZWQ0YWUwYWM3M2Y5YTUyMGZiYTE1ZC5zZXRJY29uKGljb25fNDE0YTY1OTUwYTBmNDU0Mjg5NzY5Y2ZiNGExZmFmN2QpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kY2EwMDIwMWZlZDk0NThmYjZkODA0Yjc5YWU5OWY1MiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83MzRjMDZmNDQ2NzU0ZjdlODc5NWU5MmM1MTI3ZDI4NiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNzM0YzA2ZjQ0Njc1NGY3ZTg3OTVlOTJjNTEyN2QyODYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDIgLSBkZSBZb3VuZyBNdXNldW08L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZGNhMDAyMDFmZWQ5NDU4ZmI2ZDgwNGI3OWFlOTlmNTIuc2V0Q29udGVudChodG1sXzczNGMwNmY0NDY3NTRmN2U4Nzk1ZTkyYzUxMjdkMjg2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfOGZhNDkyYjM2ZGVkNGFlMGFjNzNmOWE1MjBmYmExNWQuYmluZFBvcHVwKHBvcHVwX2RjYTAwMjAxZmVkOTQ1OGZiNmQ4MDRiNzlhZTk5ZjUyKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfZGFkMTJhOTY3MTgzNDQ1NjkzOWFjY2NjYWFhOTEzZDcgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43ODI3OCwtMTIyLjQ2MzUxXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzhiZWI2MWYwMzI0NGRlYTg1OTkzNmJiYzAwODZlZWIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYWQyNGIzODc3ZjRjNGExOTg4OWUyYThkZDAxZDFmYTQgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9kYWQxMmE5NjcxODM0NDU2OTM5YWNjY2NhYWE5MTNkNy5zZXRJY29uKGljb25fYWQyNGIzODc3ZjRjNGExOTg4OWUyYThkZDAxZDFmYTQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wNTkzNzhhNjhlOTc0YjAwOGYzZTY2YjdiMGUxNjZmMSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83OTdjNzkzYzFmMTE0YjE5ODM0OWZkZjJmOWU2YmM2NiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNzk3Yzc5M2MxZjExNGIxOTgzNDlmZGYyZjllNmJjNjYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDEgLSBUb3kgQm9hdDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wNTkzNzhhNjhlOTc0YjAwOGYzZTY2YjdiMGUxNjZmMS5zZXRDb250ZW50KGh0bWxfNzk3Yzc5M2MxZjExNGIxOTgzNDlmZGYyZjllNmJjNjYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9kYWQxMmE5NjcxODM0NDU2OTM5YWNjY2NhYWE5MTNkNy5iaW5kUG9wdXAocG9wdXBfMDU5Mzc4YTY4ZTk3NGIwMDhmM2U2NmI3YjBlMTY2ZjEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9iZmU2ZWM1OTllYjM0OTJmODFiY2MwZTZkMTgzYTM2ZSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTEzLC0xMjIuNDY5OTVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jOGJlYjYxZjAzMjQ0ZGVhODU5OTM2YmJjMDA4NmVlYik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl82M2NjMGFmOTQ5MDU0NzEwODMzNmEzZWE0YjdiOGU2YSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2JmZTZlYzU5OWViMzQ5MmY4MWJjYzBlNmQxODNhMzZlLnNldEljb24oaWNvbl82M2NjMGFmOTQ5MDU0NzEwODMzNmEzZWE0YjdiOGU2YSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2U0ZWU1YjY2OTAyMjQ2NDM4MGI2YWU3MmYzODAwMTQ4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2UwMjAxYmRkMWFhNzRjYWJiZmEyMWMwMjY4ZDg2MDJiID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9lMDIwMWJkZDFhYTc0Y2FiYmZhMjFjMDI2OGQ4NjAyYiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMiAtIExhbXBzIFBsdXM8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTRlZTViNjY5MDIyNDY0MzgwYjZhZTcyZjM4MDAxNDguc2V0Q29udGVudChodG1sX2UwMjAxYmRkMWFhNzRjYWJiZmEyMWMwMjY4ZDg2MDJiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfYmZlNmVjNTk5ZWIzNDkyZjgxYmNjMGU2ZDE4M2EzNmUuYmluZFBvcHVwKHBvcHVwX2U0ZWU1YjY2OTAyMjQ2NDM4MGI2YWU3MmYzODAwMTQ4KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMTBmMDZiMmY5Y2Q0NGZlZTgxMWI2ZmI4MjNhNDIwMDMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43ODM3MSwtMTIyLjQ4M10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2M4YmViNjFmMDMyNDRkZWE4NTk5MzZiYmMwMDg2ZWViKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2IxZTc1YmYwY2FiYzQ2NTU4NjJmZjhhMTE4MzEwNzM0ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfMTBmMDZiMmY5Y2Q0NGZlZTgxMWI2ZmI4MjNhNDIwMDMuc2V0SWNvbihpY29uX2IxZTc1YmYwY2FiYzQ2NTU4NjJmZjhhMTE4MzEwNzM0KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOGJjMmNlOGY5YjU5NGE5ZGJlOWIwMTI3MTg1ZDgyNWQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2Y4MjE2OGRlZmVkNGU5MmE0ODg0ZGVmMWVkMWY4MGYgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2NmODIxNjhkZWZlZDRlOTJhNDg4NGRlZjFlZDFmODBmIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAzIC0gUGl6emV0dGE8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOGJjMmNlOGY5YjU5NGE5ZGJlOWIwMTI3MTg1ZDgyNWQuc2V0Q29udGVudChodG1sX2NmODIxNjhkZWZlZDRlOTJhNDg4NGRlZjFlZDFmODBmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMTBmMDZiMmY5Y2Q0NGZlZTgxMWI2ZmI4MjNhNDIwMDMuYmluZFBvcHVwKHBvcHVwXzhiYzJjZThmOWI1OTRhOWRiZTliMDEyNzE4NWQ4MjVkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNzFkMzk0Y2IyNzVjNDU4N2I3Nzc1YTIyZWFhMTFjYWQgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzU1OCwtMTIyLjQ1ODMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzhiZWI2MWYwMzI0NGRlYTg1OTkzNmJiYzAwODZlZWIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYjY0ZDM4Mzc2OThiNGMxMzhkODYxZDcwYmEzOWYzNzUgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl83MWQzOTRjYjI3NWM0NTg3Yjc3NzVhMjJlYWExMWNhZC5zZXRJY29uKGljb25fYjY0ZDM4Mzc2OThiNGMxMzhkODYxZDcwYmEzOWYzNzUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84YjM3ZTA0NzlkNGM0ZjUzODRjOTgxOTQ0NGJiM2NlMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hYjY1MjM0ZTUwNzE0ZWNlOTE2YWYyNDdiZjY2NjJmNiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYWI2NTIzNGU1MDcxNGVjZTkxNmFmMjQ3YmY2NjYyZjYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDQgLSBBcmd1ZWxsbyBNYXJrZXQ8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOGIzN2UwNDc5ZDRjNGY1Mzg0Yzk4MTk0NDRiYjNjZTMuc2V0Q29udGVudChodG1sX2FiNjUyMzRlNTA3MTRlY2U5MTZhZjI0N2JmNjY2MmY2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNzFkMzk0Y2IyNzVjNDU4N2I3Nzc1YTIyZWFhMTFjYWQuYmluZFBvcHVwKHBvcHVwXzhiMzdlMDQ3OWQ0YzRmNTM4NGM5ODE5NDQ0YmIzY2UzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBwb2x5X2xpbmVfYzFkOTExYzM1MTYyNGYzMmE3YWMyZGQ0YTY0OWRmMDcgPSBMLnBvbHlsaW5lKAogICAgICAgICAgICAgICAgICAgIFtbMzcuNzc5MTA2LCAtMTIyLjQ2NDE1OF0sIFszNy43ODA1MjksIC0xMjIuNDY0MjY0XSwgWzM3Ljc4MDk2NywgLTEyMi40NjQyOTVdLCBbMzcuNzgxMDE3LCAtMTIyLjQ2MzIyN10sIFszNy43ODEwNTEsIC0xMjIuNDYyNDg3XSwgWzM3Ljc4MTA2MywgLTEyMi40NjIxNTFdLCBbMzcuNzgxMDk3LCAtMTIyLjQ2MTQyNl0sIFszNy43ODExMTIsIC0xMjIuNDYxMDgzXSwgWzM3Ljc4MTE2MiwgLTEyMi40NjAwMDddLCBbMzcuNzgxMjExLCAtMTIyLjQ1ODg5M10sIFszNy43ODEyNDYsIC0xMjIuNDU4MTUzXSwgWzM3Ljc4MTI2NSwgLTEyMi40NTc3NDldLCBbMzcuNzgxMzMsIC0xMjIuNDU2MzA3XSwgWzM3Ljc4MTM1NiwgLTEyMi40NTU3MTldLCBbMzcuNzgxMzYsIC0xMjIuNDU1NjU4XSwgWzM3Ljc4MTM2OCwgLTEyMi40NTU1NDRdLCBbMzcuNzgxMzg3LCAtMTIyLjQ1NTM4NF0sIFszNy43ODEzOTgsIC0xMjIuNDU1Mjg1XSwgWzM3Ljc4MTU0MywgLTEyMi40NTQxNjNdLCBbMzcuNzgxNjI3LCAtMTIyLjQ1MzUwN10sIFszNy43ODE2NjksIC0xMjIuNDUzMTc5XSwgWzM3Ljc4MTc4NywgLTEyMi40NTMyMDJdLCBbMzcuNzgzOTU0LCAtMTIyLjQ1MzYzN10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4NDE2OCwgLTEyMi40NTM2NjddLCBbMzcuNzg0MjY3LCAtMTIyLjQ1MzY4Ml0sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDQ5NiwgLTEyMi40NTM3MTNdLCBbMzcuNzg0NjE0LCAtMTIyLjQ1MzcyOF0sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDg1MSwgLTEyMi40NTM3NDNdLCBbMzcuNzg0OTc2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NTIzNiwgLTEyMi40NTM3NTldLCBbMzcuNzg1MzU4LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTUxMSwgLTEyMi40NTM3NTldLCBbMzcuNzg1NTU2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTYzMywgLTEyMi40NTM2OThdLCBbMzcuNzg1NjU5LCAtMTIyLjQ1MzY2XSwgWzM3Ljc4NTY4MiwgLTEyMi40NTM2MTRdLCBbMzcuNzg1Njk0LCAtMTIyLjQ1MzU2XSwgWzM3Ljc4NTcwNSwgLTEyMi40NTM0OTldLCBbMzcuNzg1NzEzLCAtMTIyLjQ1MzQzMV0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcyNCwgLTEyMi40NTMyNzhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1ODc3LCAtMTIyLjQ1MjA4XSwgWzM3Ljc4NTkxMSwgLTEyMi40NTE3OThdLCBbMzcuNzg1OTExLCAtMTIyLjQ1MTc5OF0sIFszNy43ODU4NzcsIC0xMjIuNDUyMDhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1NzI0LCAtMTIyLjQ1MzI3OF0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcxMywgLTEyMi40NTM0MzFdLCBbMzcuNzg1NzA1LCAtMTIyLjQ1MzQ5OV0sIFszNy43ODU2OTQsIC0xMjIuNDUzNTZdLCBbMzcuNzg1NjgyLCAtMTIyLjQ1MzYxNF0sIFszNy43ODU2NTksIC0xMjIuNDUzNjZdLCBbMzcuNzg1NjMzLCAtMTIyLjQ1MzY5OF0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTU1NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg1NTExLCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTM1OCwgLTEyMi40NTM3NTldLCBbMzcuNzg1MjM2LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NDk3NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg0ODUxLCAtMTIyLjQ1Mzc0M10sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDYxNCwgLTEyMi40NTM3MjhdLCBbMzcuNzg0NDk2LCAtMTIyLjQ1MzcxM10sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDI2NywgLTEyMi40NTM2ODJdLCBbMzcuNzg0MTY4LCAtMTIyLjQ1MzY2N10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4Mzk1NCwgLTEyMi40NTM2MzddLCBbMzcuNzgxNzg3LCAtMTIyLjQ1MzIwMl0sIFszNy43ODE2NjEsIC0xMjIuNDU0MTk0XSwgWzM3Ljc4MTU1NSwgLTEyMi40NTUwMDJdLCBbMzcuNzgxNTIsIC0xMjIuNDU1MzA4XSwgWzM3Ljc4MTUwNSwgLTEyMi40NTU0MjJdLCBbMzcuNzgxNDk0LCAtMTIyLjQ1NTU1Ml0sIFszNy43ODE0ODIsIC0xMjIuNDU1Njg5XSwgWzM3Ljc4MTQ3NSwgLTEyMi40NTU4MTFdLCBbMzcuNzgxNDY3LCAtMTIyLjQ1NTk0OF0sIFszNy43ODE0NTIsIC0xMjIuNDU2MzQ1XSwgWzM3Ljc4MTMzLCAtMTIyLjQ1NjMwN10sIFszNy43ODEyMzgsIC0xMjIuNDU2Mjg0XSwgWzM3Ljc4MDY2MiwgLTEyMi40NTYxN10sIFszNy43ODAzMjYsIC0xMjIuNDU2MTAxXSwgWzM3Ljc4MDI3MywgLTEyMi40NTYwODZdLCBbMzcuNzgwMjMxLCAtMTIyLjQ1NjA3XSwgWzM3Ljc4MDE4NSwgLTEyMi40NTYwNDhdLCBbMzcuNzgwMTc4LCAtMTIyLjQ1NjA0XSwgWzM3Ljc4MDE0MywgLTEyMi40NTYwMTddLCBbMzcuNzgwMDksIC0xMjIuNDU1OTc5XSwgWzM3Ljc4MDA0LCAtMTIyLjQ1NTk0MV0sIFszNy43Nzk5NDUsIC0xMjIuNDU1ODU3XSwgWzM3Ljc3OTgyMywgLTEyMi40NTU3NThdLCBbMzcuNzc5Nzc3LCAtMTIyLjQ1NTcyN10sIFszNy43Nzk3MjQsIC0xMjIuNDU1Njg5XSwgWzM3Ljc3OTY2NiwgLTEyMi40NTU2NjZdLCBbMzcuNzc5NjEzLCAtMTIyLjQ1NTY0M10sIFszNy43Nzk1NjMsIC0xMjIuNDU1NjJdLCBbMzcuNzc5NTA2LCAtMTIyLjQ1NTYwNV0sIFszNy43Nzk0MzQsIC0xMjIuNDU1NTldLCBbMzcuNzc5MzYxLCAtMTIyLjQ1NTU2N10sIFszNy43Nzg4MjMsIC0xMjIuNDU1NDZdLCBbMzcuNzc3OTUsIC0xMjIuNDU1Mjc3XSwgWzM3Ljc3NzcxMywgLTEyMi40NTUyMzldLCBbMzcuNzc3NjA2LCAtMTIyLjQ1NTIzMV0sIFszNy43Nzc1LCAtMTIyLjQ1NTIzMV0sIFszNy43NzcwMzgsIC0xMjIuNDU1MTRdLCBbMzcuNzc2MzI1LCAtMTIyLjQ1NDk5NV0sIFszNy43NzU3MDMsIC0xMjIuNDU0ODczXSwgWzM3Ljc3NTY1MywgLTEyMi40NTQ4NTddLCBbMzcuNzc1NTg4LCAtMTIyLjQ1NDgzNF0sIFszNy43NzU1MzUsIC0xMjIuNDU0ODA0XSwgWzM3Ljc3NTQ4OSwgLTEyMi40NTQ3ODFdLCBbMzcuNzc1NDQ0LCAtMTIyLjQ1NDc2Nl0sIFszNy43NzUyMDMsIC0xMjIuNDU0NzJdLCBbMzcuNzc1MTMxLCAtMTIyLjQ1NDcwNV0sIFszNy43NzQ4NTYsIC0xMjIuNDU0Njc0XSwgWzM3Ljc3NDc2NSwgLTEyMi40NTQ2NjddLCBbMzcuNzc0Njg4LCAtMTIyLjQ1NDY1OV0sIFszNy43NzQzMTEsIC0xMjIuNDU0NTgzXSwgWzM3Ljc3NDE4OCwgLTEyMi40NTQ1Nl0sIFszNy43NzM3MTksIC0xMjIuNDU0NDY4XSwgWzM3Ljc3Mjk3MiwgLTEyMi40NTQzMTZdLCBbMzcuNzcyOTAzLCAtMTIyLjQ1NDNdLCBbMzcuNzcyODM0LCAtMTIyLjQ1NDI4NV0sIFszNy43NzI1ODYsIC0xMjIuNDU0MjM5XSwgWzM3Ljc3MjQ4LCAtMTIyLjQ1NDIxN10sIFszNy43NzIwNDEsIC0xMjIuNDU0MTI1XSwgWzM3Ljc3MTkzNCwgLTEyMi40NTQxMDJdLCBbMzcuNzcxNjU5LCAtMTIyLjQ1NDA0OV0sIFszNy43NzE1OTUsIC0xMjIuNDU0MDMzXSwgWzM3Ljc3MTU2OCwgLTEyMi40NTQwMzNdLCBbMzcuNzcxNTExLCAtMTIyLjQ1NDAxOF0sIFszNy43NzE0NTcsIC0xMjIuNDU0MTQ4XSwgWzM3Ljc3MTEwMiwgLTEyMi40NTUwMDJdLCBbMzcuNzcxMDkxLCAtMTIyLjQ1NTA3MV0sIFszNy43NzEwNzYsIC0xMjIuNDU1MTRdLCBbMzcuNzcxMDU3LCAtMTIyLjQ1NTIwMV0sIFszNy43NzA5OTYsIC0xMjIuNDU1MzQ2XSwgWzM3Ljc3MDk3NywgLTEyMi40NTUzOTldLCBbMzcuNzcwOTYxLCAtMTIyLjQ1NTQ2XSwgWzM3Ljc3MDk1NCwgLTEyMi40NTU0OThdLCBbMzcuNzcwOTU0LCAtMTIyLjQ1NTUyOV0sIFszNy43NzA5NTQsIC0xMjIuNDU1NTY3XSwgWzM3Ljc3MDk1NCwgLTEyMi40NTU2NjZdLCBbMzcuNzcwOTU0LCAtMTIyLjQ1NTcyN10sIFszNy43NzA5NDIsIC0xMjIuNDU1OTY0XSwgWzM3Ljc3MDkzNSwgLTEyMi40NTYwNjNdLCBbMzcuNzcwOTE5LCAtMTIyLjQ1NjIwOF0sIFszNy43NzA5MzEsIC0xMjIuNDU2MzY4XSwgWzM3Ljc3MDk0NiwgLTEyMi40NTY0OV0sIFszNy43NzA5NTQsIC0xMjIuNDU2NTM2XSwgWzM3Ljc3MDk3MywgLTEyMi40NTY2OTZdLCBbMzcuNzcwOTg0LCAtMTIyLjQ1Njc5NV0sIFszNy43NzA5OTksIC0xMjIuNDU2ODk0XSwgWzM3Ljc3MTAxOCwgLTEyMi40NTY5ODZdLCBbMzcuNzcxMDMsIC0xMjIuNDU3MDc4XSwgWzM3Ljc3MTA2NCwgLTEyMi40NTczNzVdLCBbMzcuNzcxMDk1LCAtMTIyLjQ1NzYwNF0sIFszNy43NzExMjUsIC0xMjIuNDU3ODE4XSwgWzM3Ljc3MTE3NSwgLTEyMi40NTgyMDddLCBbMzcuNzcxMTk0LCAtMTIyLjQ1ODM1OV0sIFszNy43NzEyMDksIC0xMjIuNDU4NDY2XSwgWzM3Ljc3MTI0NCwgLTEyMi40NTg3MDNdLCBbMzcuNzcxMzA1LCAtMTIyLjQ1OTExNV0sIFszNy43NzEzMTYsIC0xMjIuNDU5MTc2XSwgWzM3Ljc3MTI4MiwgLTEyMi40NTkxODNdLCBbMzcuNzcxMjUxLCAtMTIyLjQ1OTE5OF0sIFszNy43NzEyMjQsIC0xMjIuNDU5MjA2XSwgWzM3Ljc3MTEyNSwgLTEyMi40NTkyNDRdLCBbMzcuNzcxMDQxLCAtMTIyLjQ1OTI4Ml0sIFszNy43NzA5NjksIC0xMjIuNDU5MzIxXSwgWzM3Ljc3MDg5NiwgLTEyMi40NTkzNTldLCBbMzcuNzcwODI4LCAtMTIyLjQ1OTQwNF0sIFszNy43NzA3NjcsIC0xMjIuNDU5NDVdLCBbMzcuNzcwNzA2LCAtMTIyLjQ1OTUxMV0sIFszNy43NzA2NTIsIC0xMjIuNDU5NTcyXSwgWzM3Ljc3MDYyNiwgLTEyMi40NTk2MDNdLCBbMzcuNzcwNTk5LCAtMTIyLjQ1OTY0MV0sIFszNy43NzA1NTMsIC0xMjIuNDU5NzFdLCBbMzcuNzcwNTExLCAtMTIyLjQ1OTc5NF0sIFszNy43NzA0NzMsIC0xMjIuNDU5ODg1XSwgWzM3Ljc3MDQzOSwgLTEyMi40NTk5ODRdLCBbMzcuNzcwNDE2LCAtMTIyLjQ2MDA3Nl0sIFszNy43NzAzOTcsIC0xMjIuNDYwMTldLCBbMzcuNzcwMzc4LCAtMTIyLjQ2MDMwNV0sIFszNy43NzAzNjIsIC0xMjIuNDYwNDVdLCBbMzcuNzcwMzUxLCAtMTIyLjQ2MDU5NV0sIFszNy43NzAzMzksIC0xMjIuNDYwNzRdLCBbMzcuNzcwMzMyLCAtMTIyLjQ2MDg3N10sIFszNy43NzAzMzYsIC0xMjIuNDYxMDE0XSwgWzM3Ljc3MDM0MywgLTEyMi40NjExNTJdLCBbMzcuNzcwMzQzLCAtMTIyLjQ2MTI4OV0sIFszNy43NzAzMzksIC0xMjIuNDYxNDE5XSwgWzM3Ljc3MDMyOCwgLTEyMi40NjE1NDFdLCBbMzcuNzcwMzEzLCAtMTIyLjQ2MTY3OF0sIFszNy43NzAyOSwgLTEyMi40NjE4XSwgWzM3Ljc3MDI2MywgLTEyMi40NjE5MzddLCBbMzcuNzcwMjM2LCAtMTIyLjQ2MjA1Ml0sIFszNy43Njk5OTYsIC0xMjIuNDYzMDU5XSwgWzM3Ljc2OTk3NywgLTEyMi40NjMxNDNdLCBbMzcuNzY5NzE4LCAtMTIyLjQ2NDI2NF0sIFszNy43Njk2OCwgLTEyMi40NjQ0MDJdLCBbMzcuNzY5NjY4LCAtMTIyLjQ2NDQ0OF0sIFszNy43Njk2MzgsIC0xMjIuNDY0NTI0XSwgWzM3Ljc2OTY5NSwgLTEyMi40NjQ1N10sIFszNy43Njk3NiwgLTEyMi40NjQ2MDhdLCBbMzcuNzY5Nzk4LCAtMTIyLjQ2NDY2OV0sIFszNy43Njk4MzIsIC0xMjIuNDY0Nzk4XSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5OTU4LCAtMTIyLjQ2NTAxMl0sIFszNy43Njk5NTgsIC0xMjIuNDY1MDEyXSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5ODMyLCAtMTIyLjQ2NDc5OF0sIFszNy43Njk3OTgsIC0xMjIuNDY0NjY5XSwgWzM3Ljc2OTc2LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk2OTUsIC0xMjIuNDY0NTddLCBbMzcuNzY5NjM4LCAtMTIyLjQ2NDUyNF0sIFszNy43Njk2NjgsIC0xMjIuNDY0NDQ4XSwgWzM3Ljc2OTY4LCAtMTIyLjQ2NDQwMl0sIFszNy43Njk3MTgsIC0xMjIuNDY0MjY0XSwgWzM3Ljc2OTk3NywgLTEyMi40NjMxNDNdLCBbMzcuNzY5OTk2LCAtMTIyLjQ2MzA1OV0sIFszNy43NzAyMzYsIC0xMjIuNDYyMDUyXSwgWzM3Ljc3MDI2MywgLTEyMi40NjE5MzddLCBbMzcuNzcwMjksIC0xMjIuNDYxOF0sIFszNy43NzAzMTMsIC0xMjIuNDYxNjc4XSwgWzM3Ljc3MDMyOCwgLTEyMi40NjE1NDFdLCBbMzcuNzcwMzM5LCAtMTIyLjQ2MTQxOV0sIFszNy43NzAzNDMsIC0xMjIuNDYxMjg5XSwgWzM3Ljc3MDM0MywgLTEyMi40NjExNTJdLCBbMzcuNzcwMzM2LCAtMTIyLjQ2MTAxNF0sIFszNy43NzAzMzIsIC0xMjIuNDYwODc3XSwgWzM3Ljc3MDMzOSwgLTEyMi40NjA3NF0sIFszNy43NzAzNTEsIC0xMjIuNDYwNTk1XSwgWzM3Ljc3MDM2MiwgLTEyMi40NjA0NV0sIFszNy43NzAzNzgsIC0xMjIuNDYwMzA1XSwgWzM3Ljc3MDM5NywgLTEyMi40NjAxOV0sIFszNy43NzA0MTYsIC0xMjIuNDYwMDc2XSwgWzM3Ljc3MDQzOSwgLTEyMi40NTk5ODRdLCBbMzcuNzcwNDczLCAtMTIyLjQ1OTg4NV0sIFszNy43NzA1MTEsIC0xMjIuNDU5Nzk0XSwgWzM3Ljc3MDU1MywgLTEyMi40NTk3MV0sIFszNy43NzA1OTksIC0xMjIuNDU5NjQxXSwgWzM3Ljc3MDYyNiwgLTEyMi40NTk2MDNdLCBbMzcuNzcwNjUyLCAtMTIyLjQ1OTU3Ml0sIFszNy43NzA3MDYsIC0xMjIuNDU5NTExXSwgWzM3Ljc3MDc2NywgLTEyMi40NTk0NV0sIFszNy43NzA4MjgsIC0xMjIuNDU5NDA0XSwgWzM3Ljc3MDg5NiwgLTEyMi40NTkzNTldLCBbMzcuNzcwOTY5LCAtMTIyLjQ1OTMyMV0sIFszNy43NzEwNDEsIC0xMjIuNDU5MjgyXSwgWzM3Ljc3MTEyNSwgLTEyMi40NTkyNDRdLCBbMzcuNzcxMjI0LCAtMTIyLjQ1OTIwNl0sIFszNy43NzEyNTEsIC0xMjIuNDU5MTk4XSwgWzM3Ljc3MTI4MiwgLTEyMi40NTkxODNdLCBbMzcuNzcxMzE2LCAtMTIyLjQ1OTE3Nl0sIFszNy43NzEzMzksIC0xMjIuNDU5MzQzXSwgWzM3Ljc3MTQxOSwgLTEyMi40NTk4MjRdLCBbMzcuNzcxNDQyLCAtMTIyLjQ1OTk1NF0sIFszNy43NzE1NDUsIC0xMjIuNDYwNjMzXSwgWzM3Ljc3MTU3NSwgLTEyMi40NjA4MzFdLCBbMzcuNzcxNzI0LCAtMTIyLjQ2MTczOV0sIFszNy43NzE3NTUsIC0xMjIuNDYxOTIyXSwgWzM3Ljc3MTc3OCwgLTEyMi40NjIwNTJdLCBbMzcuNzcxODA4LCAtMTIyLjQ2MjE4Ml0sIFszNy43NzE4MzUsIC0xMjIuNDYyMzA0XSwgWzM3Ljc3MTk3NiwgLTEyMi40NjI4NTNdLCBbMzcuNzcyMDI5LCAtMTIyLjQ2MzA1MV0sIFszNy43NzIwODMsIC0xMjIuNDYzMjVdLCBbMzcuNzcyMTQ4LCAtMTIyLjQ2MzQ5NF0sIFszNy43NzIyNjYsIC0xMjIuNDYzOTEzXSwgWzM3Ljc3MjMwOCwgLTEyMi40NjQwNzRdLCBbMzcuNzcyMzY1LCAtMTIyLjQ2NDI3Ml0sIFszNy43NzIzOTksIC0xMjIuNDY0NDAyXSwgWzM3Ljc3MjQzLCAtMTIyLjQ2NDUyNF0sIFszNy43NzI0NiwgLTEyMi40NjQ2NTRdLCBbMzcuNzcyNDg3LCAtMTIyLjQ2NDc5MV0sIFszNy43NzI1MSwgLTEyMi40NjQ5MjFdLCBbMzcuNzcyNTMzLCAtMTIyLjQ2NTA1XSwgWzM3Ljc3MjU1NiwgLTEyMi40NjUxOF0sIFszNy43NzI1NjMsIC0xMjIuNDY1MjI2XSwgWzM3Ljc3MjU3NSwgLTEyMi40NjUzMV0sIFszNy43NzI1OSwgLTEyMi40NjU0MjRdLCBbMzcuNzcyNjAyLCAtMTIyLjQ2NTUzOV0sIFszNy43NzI2MDksIC0xMjIuNDY1NjUzXSwgWzM3Ljc3MjYxMywgLTEyMi40NjU3NDVdLCBbMzcuNzcyNjEzLCAtMTIyLjQ2NTg0NF0sIFszNy43NzI3MTIsIC0xMjIuNDY1ODUxXSwgWzM3Ljc3Mjc4NSwgLTEyMi40NjU4NTldLCBbMzcuNzcyOTUzLCAtMTIyLjQ2NTg2N10sIFszNy43NzMxNywgLTEyMi40NjU4ODJdLCBbMzcuNzczNDAzLCAtMTIyLjQ2NTg5N10sIFszNy43NzUyNzIsIC0xMjIuNDY2MDM0XSwgWzM3Ljc3NzEzNywgLTEyMi40NjYxNjRdLCBbMzcuNzc3MTgzLCAtMTIyLjQ2NTA5Nl0sIFszNy43NzcyMzMsIC0xMjIuNDY0MDI4XSwgWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdXSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXBfYzhiZWI2MWYwMzI0NGRlYTg1OTkzNmJiYzAwODZlZWIuYWRkTGF5ZXIocG9seV9saW5lX2MxZDkxMWMzNTE2MjRmMzJhN2FjMmRkNGE2NDlkZjA3KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIHBvbHlfbGluZV80ZDc3ODEwYmI4NTI0MjUyOThiODBiYTZhZmU3NGE2ZCA9IEwucG9seWxpbmUoCiAgICAgICAgICAgICAgICAgICAgW1szNy43NzkxMDksIC0xMjIuNDY0MjAzXSwgWzM3Ljc3OTE1MSwgLTEyMi40NjMwOTddLCBbMzcuNzgxMDE3LCAtMTIyLjQ2MzIyN10sIFszNy43ODExMzksIC0xMjIuNDYzMjM0XSwgWzM3Ljc4MTUzOSwgLTEyMi40NjMyNjVdLCBbMzcuNzgyNzkxLCAtMTIyLjQ2MzQwMl0sIFszNy43ODI3OTEsIC0xMjIuNDYzNDAyXSwgWzM3Ljc4MTUzOSwgLTEyMi40NjMyNjVdLCBbMzcuNzgxMTM5LCAtMTIyLjQ2MzIzNF0sIFszNy43ODEwODksIC0xMjIuNDY0MzAzXSwgWzM3Ljc4MTA1NSwgLTEyMi40NjUwMl0sIFszNy43ODEwNCwgLTEyMi40NjUzNzFdLCBbMzcuNzgxMDA5LCAtMTIyLjQ2NjA3M10sIFszNy43ODA5OSwgLTEyMi40NjY0NDZdLCBbMzcuNzgwOTQ0LCAtMTIyLjQ2NzUxNV0sIFszNy43ODA4OTUsIC0xMjIuNDY4NTgzXSwgWzM3Ljc4MDg2NCwgLTEyMi40NjkyNjJdLCBbMzcuNzgwODQ1LCAtMTIyLjQ2OTY1OF0sIFszNy43ODExNSwgLTEyMi40Njk3MDRdLCBbMzcuNzgxMTUsIC0xMjIuNDY5NzA0XSwgWzM3Ljc4MDg0NSwgLTEyMi40Njk2NThdLCBbMzcuNzgwODE1LCAtMTIyLjQ3MDM4M10sIFszNy43ODA3OTYsIC0xMjIuNDcwNzI3XSwgWzM3Ljc4MDc1LCAtMTIyLjQ3MTgwMl0sIFszNy43ODA3MzgsIC0xMjIuNDcxOTkzXSwgWzM3Ljc4MDczMSwgLTEyMi40NzIxNzZdLCBbMzcuNzgwNzI3LCAtMTIyLjQ3MjI2OF0sIFszNy43ODA3MTksIC0xMjIuNDcyNDA1XSwgWzM3Ljc4MDcxOSwgLTEyMi40NzI0ODldLCBbMzcuNzgwNywgLTEyMi40NzI4N10sIFszNy43ODA2NywgLTEyMi40NzM1MDRdLCBbMzcuNzgwNjUxLCAtMTIyLjQ3Mzk5Ml0sIFszNy43ODA1OTcsIC0xMjIuNDc1MTEzXSwgWzM3Ljc4MDU1MSwgLTEyMi40NzYxODldLCBbMzcuNzgwNTEzLCAtMTIyLjQ3NjkzN10sIFszNy43ODA1MDIsIC0xMjIuNDc3MjU3XSwgWzM3Ljc4MDQ2NywgLTEyMi40Nzc5NzRdLCBbMzcuNzgwNDUyLCAtMTIyLjQ3ODMzM10sIFszNy43ODA0MDMsIC0xMjIuNDc5NDAxXSwgWzM3Ljc4MDM1NywgLTEyMi40ODA0NzddLCBbMzcuNzgwMzI2LCAtMTIyLjQ4MTEzM10sIFszNy43ODAzMDcsIC0xMjIuNDgxNTQ1XSwgWzM3Ljc4MDI3NywgLTEyMi40ODIyMzldLCBbMzcuNzgwMjU4LCAtMTIyLjQ4MjYxM10sIFszNy43ODE3MzgsIC0xMjIuNDgyNzJdLCBbMzcuNzgyMTE5LCAtMTIyLjQ4Mjc1XSwgWzM3Ljc4MzcxOCwgLTEyMi40ODI5MDNdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODM5ODgsIC0xMjIuNDgyODg4XSwgWzM3Ljc4MzkzOSwgLTEyMi40ODM5NTZdLCBbMzcuNzgzODg5LCAtMTIyLjQ4NTAyNF0sIFszNy43ODM2NDEsIC0xMjIuNDg1MDA5XSwgWzM3Ljc4MjI5MSwgLTEyMi40ODQ5MV0sIFszNy43ODIwMiwgLTEyMi40ODQ4OTRdLCBbMzcuNzgxNzE1LCAtMTIyLjQ4NDg3MV0sIFszNy43ODE2MzEsIC0xMjIuNDg0ODY0XSwgWzM3Ljc4MDQ5OCwgLTEyMi40ODQ3OF0sIFszNy43ODAxNjIsIC0xMjIuNDg0NzU3XSwgWzM3Ljc4MDAzMywgLTEyMi40ODQ3NDldLCBbMzcuNzc5Nzg1LCAtMTIyLjQ4NDcyNl0sIFszNy43Nzg0MjMsIC0xMjIuNDg0NjM1XSwgWzM3Ljc3ODE3MSwgLTEyMi40ODQ2MTJdLCBbMzcuNzc3OTIzLCAtMTIyLjQ4NDU5N10sIFszNy43NzY1NTQsIC0xMjIuNDg0NDk4XSwgWzM3Ljc3NjMwNiwgLTEyMi40ODQ0NzVdLCBbMzcuNzc2MzU1LCAtMTIyLjQ4MzQwN10sIFszNy43NzY0MDEsIC0xMjIuNDgyMzM4XSwgWzM3Ljc3NjQ1MSwgLTEyMi40ODEyN10sIFszNy43NzY1LCAtMTIyLjQ4MDE5NV0sIFszNy43NzY1NSwgLTEyMi40NzkxMTldLCBbMzcuNzc2NTk2LCAtMTIyLjQ3ODA1MV0sIFszNy43NzY2NDUsIC0xMjIuNDc2OTgzXSwgWzM3Ljc3NjY5NSwgLTEyMi40NzU5MDddLCBbMzcuNzc2NzQ0LCAtMTIyLjQ3NDgzOV0sIFszNy43NzY3OTQsIC0xMjIuNDczNzE3XSwgWzM3Ljc3Njg0NCwgLTEyMi40NzI1OTZdLCBbMzcuNzc2ODUxLCAtMTIyLjQ3MjQ4MV0sIFszNy43NzY4NjYsIC0xMjIuNDcyMTNdLCBbMzcuNzc2ODc0LCAtMTIyLjQ3MTk4NV0sIFszNy43NzY4ODUsIC0xMjIuNDcxNzExXSwgWzM3Ljc3Njg4OSwgLTEyMi40NzE2MjddLCBbMzcuNzc2ODkzLCAtMTIyLjQ3MTUyOF0sIFszNy43NzY5MTIsIC0xMjIuNDcxMDkzXSwgWzM3Ljc3Njk0MywgLTEyMi40NzA0NTJdLCBbMzcuNzc2OTkyLCAtMTIyLjQ2OTM3Nl0sIFszNy43NzcwMzgsIC0xMjIuNDY4MzA4XSwgWzM3Ljc3NzA4OCwgLTEyMi40NjcyNF0sIFszNy43NzcxMzcsIC0xMjIuNDY2MTY0XSwgWzM3Ljc3NzE4MywgLTEyMi40NjUwOTZdLCBbMzcuNzc3MjMzLCAtMTIyLjQ2NDAyOF0sIFszNy43NzcyODIsIC0xMjIuNDYyOTZdLCBbMzcuNzc3MzMyLCAtMTIyLjQ2MTg4NF0sIFszNy43NzczNzgsIC0xMjIuNDYwODA4XSwgWzM3Ljc3NzQyMywgLTEyMi40NTk4MzldLCBbMzcuNzc3NDI3LCAtMTIyLjQ1OTc0XSwgWzM3Ljc3NzQzNSwgLTEyMi40NTk2NDldLCBbMzcuNzc3NDU4LCAtMTIyLjQ1OTE4M10sIFszNy43Nzc0NTQsIC0xMjIuNDU5MTNdLCBbMzcuNzc3NDQ2LCAtMTIyLjQ1OTA3Nl0sIFszNy43Nzc0MzEsIC0xMjIuNDU5MDE1XSwgWzM3Ljc3NzQwOCwgLTEyMi40NTg5NDddLCBbMzcuNzc3MzM2LCAtMTIyLjQ1ODc0MV0sIFszNy43NzcyODYsIC0xMjIuNDU4NjExXSwgWzM3Ljc3NzEyNiwgLTEyMi40NTg1OTZdLCBbMzcuNzc2ODQ0LCAtMTIyLjQ1ODU3M10sIFszNy43NzYxODcsIC0xMjIuNDU4NTI3XSwgWzM3Ljc3NjExOSwgLTEyMi40NTg1MjddLCBbMzcuNzc1NjE1LCAtMTIyLjQ1ODQ4OV0sIFszNy43NzU1NjksIC0xMjIuNDU4NTA0XSwgWzM3Ljc3NTU2OSwgLTEyMi40NTg1MDRdLCBbMzcuNzc1NjE1LCAtMTIyLjQ1ODQ4OV0sIFszNy43NzYxMTksIC0xMjIuNDU4NTI3XSwgWzM3Ljc3NjE4NywgLTEyMi40NTg1MjddLCBbMzcuNzc2ODQ0LCAtMTIyLjQ1ODU3M10sIFszNy43NzcxMjYsIC0xMjIuNDU4NTk2XSwgWzM3Ljc3NzI4NiwgLTEyMi40NTg2MTFdLCBbMzcuNzc3MzM2LCAtMTIyLjQ1ODc0MV0sIFszNy43Nzc0MDgsIC0xMjIuNDU4OTQ3XSwgWzM3Ljc3NzQzMSwgLTEyMi40NTkwMTVdLCBbMzcuNzc3NDQ2LCAtMTIyLjQ1OTA3Nl0sIFszNy43Nzc0NTQsIC0xMjIuNDU5MTNdLCBbMzcuNzc3NDU4LCAtMTIyLjQ1OTE4M10sIFszNy43Nzc0MzUsIC0xMjIuNDU5NjQ5XSwgWzM3Ljc3NzQyNywgLTEyMi40NTk3NF0sIFszNy43Nzc0MjMsIC0xMjIuNDU5ODM5XSwgWzM3Ljc3NzM3OCwgLTEyMi40NjA4MDhdLCBbMzcuNzc3MzMyLCAtMTIyLjQ2MTg4NF0sIFszNy43NzcyODIsIC0xMjIuNDYyOTZdLCBbMzcuNzc3MjMzLCAtMTIyLjQ2NDAyOF0sIFszNy43NzkxMDYsIC0xMjIuNDY0MTU4XV0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXBfYzhiZWI2MWYwMzI0NGRlYTg1OTkzNmJiYzAwODZlZWIuYWRkTGF5ZXIocG9seV9saW5lXzRkNzc4MTBiYjg1MjQyNTI5OGI4MGJhNmFmZTc0YTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgPC9zY3JpcHQ+CiAgICAgICAg" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>
[Full Size]({{ site.baseurl }}/images/optimize_stops_2_people_drive.html)



Now let's say that Celeste and I have a friend who's willing to help us with our errands. I run the optimization function again, now specifying 3 travelers. The results from this indicated that one person should go to Pizzetta, one person should go to Toy Boat and Noah's Bagels, and one person should go to Lamp's Plus, the de Young, and Arguello Market. In this case, the person with the fewest amount of stops has the longest travel time (52 minutes), and the full set of errands will be made 15 minutes faster than it was with only 2 people.


```python
opt_3_people = optimize_stops_mult(home, stops, 3, stop_labels = stop_labels)
```


```python
for i in opt_3_people['order']:
    print i
```

    ["Noah's Bagels"]
    ['Lamps Plus', 'Pizzetta']
    ['de Young Museum', 'Arguello Market', 'Toy Boat']
    


```python
opt_3_people['time']
```




    [44, 53, 48]




```python
points = [[opt_3_people['home_point']]] + opt_3_people['points']
labels = [['Home']] + [[' - '.join((str(i), x)) for i, x in enumerate(l, 1)] for l in opt_3_people['order']]

m4 = plot_stops(points, zoom_level = 14, tiles = 'Stamen Watercolor', labels = labels,line_coords = opt_3_people['lines'])
m4
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwX2RiZjJjMzBhNTcwYzRiYjRhYzMxYTA0ZTc2OTJiYWI1IHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSA9IEwubWFwKCdtYXBfZGJmMmMzMGE1NzBjNGJiNGFjMzFhMDRlNzY5MmJhYjUnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfN2IxMDJmOWExM2FhNDFiMGE0NjkyOWU4Y2IyNzliMTQgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMzc3ZDg5ZTJmZDMzNDYzYmIxZThhYTk2ZDYyYmU5MDcgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZGJmMmMzMGE1NzBjNGJiNGFjMzFhMDRlNzY5MmJhYjUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fOWJkZmMwNGM3ZTE3NGU2MmI1MDMwZmQ3MWMzNTYwZTQgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzM3N2Q4OWUyZmQzMzQ2M2JiMWU4YWE5NmQ2MmJlOTA3LnNldEljb24oaWNvbl85YmRmYzA0YzdlMTc0ZTYyYjUwMzBmZDcxYzM1NjBlNCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBiZTRiMGNkOGFlMTQzMTU5NzVlYjI4YWU0ZWRiYmViID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzlhZDc1MDgyOGQzNTQ5MThhOTQ3NjNhMWI4NzhiMjAzID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF85YWQ3NTA4MjhkMzU0OTE4YTk0NzYzYTFiODc4YjIwMyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wYmU0YjBjZDhhZTE0MzE1OTc1ZWIyOGFlNGVkYmJlYi5zZXRDb250ZW50KGh0bWxfOWFkNzUwODI4ZDM1NDkxOGE5NDc2M2ExYjg3OGIyMDMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8zNzdkODllMmZkMzM0NjNiYjFlOGFhOTZkNjJiZTkwNy5iaW5kUG9wdXAocG9wdXBfMGJlNGIwY2Q4YWUxNDMxNTk3NWViMjhhZTRlZGJiZWIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8xNjU3MDAxNDM4MTI0YzlhYWUyOTg4YTdjZDhmNTExYyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NjIxLC0xMjIuNDUxODRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8xZDMxOTZlZjgyNWM0MjMzOWEyNTAxZTNjM2Y3MDU0YSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8xNjU3MDAxNDM4MTI0YzlhYWUyOTg4YTdjZDhmNTExYy5zZXRJY29uKGljb25fMWQzMTk2ZWY4MjVjNDIzMzlhMjUwMWUzYzNmNzA1NGEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zZTQ3OThjYzcxNjU0MjkxYjdjNTBkODJjODdkZWFmMSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82ZTc4NDcxMThiYTE0MjYwODFkM2Y0MGFkY2M0MmY5YyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNmU3ODQ3MTE4YmExNDI2MDgxZDNmNDBhZGNjNDJmOWMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDEgLSBOb2FoJiMzOTtzIEJhZ2VsczwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zZTQ3OThjYzcxNjU0MjkxYjdjNTBkODJjODdkZWFmMS5zZXRDb250ZW50KGh0bWxfNmU3ODQ3MTE4YmExNDI2MDgxZDNmNDBhZGNjNDJmOWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8xNjU3MDAxNDM4MTI0YzlhYWUyOTg4YTdjZDhmNTExYy5iaW5kUG9wdXAocG9wdXBfM2U0Nzk4Y2M3MTY1NDI5MWI3YzUwZDgyYzg3ZGVhZjEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl83OWRjZDI5NzhhZTg0NTE4YjU3OGFmODQwZjk3NGY3MyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTEzLC0xMjIuNDY5OTVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl85YWRlMDlkYWRhM2M0YzIzYjU1YzcxODk0Y2Y2NWRlOCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzc5ZGNkMjk3OGFlODQ1MThiNTc4YWY4NDBmOTc0ZjczLnNldEljb24oaWNvbl85YWRlMDlkYWRhM2M0YzIzYjU1YzcxODk0Y2Y2NWRlOCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Y1MjE0MjA0OTRiNjRkZDhiMjFhZmNhNzIxMzVjOTNkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzAxNzExNWQyNTgwZDQ2NzVhMWQ2OTA4NDcyODY4MjUwID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8wMTcxMTVkMjU4MGQ0Njc1YTFkNjkwODQ3Mjg2ODI1MCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMSAtIExhbXBzIFBsdXM8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjUyMTQyMDQ5NGI2NGRkOGIyMWFmY2E3MjEzNWM5M2Quc2V0Q29udGVudChodG1sXzAxNzExNWQyNTgwZDQ2NzVhMWQ2OTA4NDcyODY4MjUwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNzlkY2QyOTc4YWU4NDUxOGI1NzhhZjg0MGY5NzRmNzMuYmluZFBvcHVwKHBvcHVwX2Y1MjE0MjA0OTRiNjRkZDhiMjFhZmNhNzIxMzVjOTNkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNzUxNDI5YzgzNjhlNDNjNjk1ZjcxYWMwZTVmOTBmNDYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43ODM3MSwtMTIyLjQ4M10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2RiZjJjMzBhNTcwYzRiYjRhYzMxYTA0ZTc2OTJiYWI1KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzJhY2IxZjYyNzhiYTQ3YTRhNGM3ODFmMGM5OTJkNjVjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNzUxNDI5YzgzNjhlNDNjNjk1ZjcxYWMwZTVmOTBmNDYuc2V0SWNvbihpY29uXzJhY2IxZjYyNzhiYTQ3YTRhNGM3ODFmMGM5OTJkNjVjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTZiYzIyNGM0OTcwNDA0ZDhkOGFiNzQ4Yzc2NGQ1NjAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNjJmZmNjNWFmMzc4NGZhNjliMDNiN2NhMmNkN2RhNjcgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzYyZmZjYzVhZjM3ODRmYTY5YjAzYjdjYTJjZDdkYTY3IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAyIC0gUGl6emV0dGE8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTZiYzIyNGM0OTcwNDA0ZDhkOGFiNzQ4Yzc2NGQ1NjAuc2V0Q29udGVudChodG1sXzYyZmZjYzVhZjM3ODRmYTY5YjAzYjdjYTJjZDdkYTY3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNzUxNDI5YzgzNjhlNDNjNjk1ZjcxYWMwZTVmOTBmNDYuYmluZFBvcHVwKHBvcHVwX2E2YmMyMjRjNDk3MDQwNGQ4ZDhhYjc0OGM3NjRkNTYwKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYjFiODY5YThkZDllNDJjNWEzZWZkZjMyNDUyODRiZGEgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzAwMiwtMTIyLjQ2NTYxXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfZGJmMmMzMGE1NzBjNGJiNGFjMzFhMDRlNzY5MmJhYjUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNTcwMDY5MDEyZDcwNDQyMWFlZmZmNWZiNjExZGViNzIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2dyZWVuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2IxYjg2OWE4ZGQ5ZTQyYzVhM2VmZGYzMjQ1Mjg0YmRhLnNldEljb24oaWNvbl81NzAwNjkwMTJkNzA0NDIxYWVmZmY1ZmI2MTFkZWI3Mik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2RhMmI3OTE5MDEzNjRlODFiNzg0NzI2OWJjY2U4ODUxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzZmYzMwNzFkMWFiODRkYmI5M2U3ZDliMzI5OWUyZjY1ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF82ZmMzMDcxZDFhYjg0ZGJiOTNlN2Q5YjMyOTllMmY2NSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMSAtIGRlIFlvdW5nIE11c2V1bTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kYTJiNzkxOTAxMzY0ZTgxYjc4NDcyNjliY2NlODg1MS5zZXRDb250ZW50KGh0bWxfNmZjMzA3MWQxYWI4NGRiYjkzZTdkOWIzMjk5ZTJmNjUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9iMWI4NjlhOGRkOWU0MmM1YTNlZmRmMzI0NTI4NGJkYS5iaW5kUG9wdXAocG9wdXBfZGEyYjc5MTkwMTM2NGU4MWI3ODQ3MjY5YmNjZTg4NTEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9hYTVhMzdlYmFjODc0ZmJkYjgwNTE2OTMwOTgzMGNmMCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3NTU4LC0xMjIuNDU4MzNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8yNzk0MWUxYmY5N2M0YWU2YWIxM2M2NDU3MTA0ZTBkNiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnZ3JlZW4nLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfYWE1YTM3ZWJhYzg3NGZiZGI4MDUxNjkzMDk4MzBjZjAuc2V0SWNvbihpY29uXzI3OTQxZTFiZjk3YzRhZTZhYjEzYzY0NTcxMDRlMGQ2KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMTA2NmYzODM0NTk5NDQwZDhjMmViMWY1MDNmZjQ1YjAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZmM3OWNlY2RmNTZkNDM1MDhlMjRmZjVjZTk4ZmNlZDEgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2ZjNzljZWNkZjU2ZDQzNTA4ZTI0ZmY1Y2U5OGZjZWQxIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAyIC0gQXJndWVsbG8gTWFya2V0PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzEwNjZmMzgzNDU5OTQ0MGQ4YzJlYjFmNTAzZmY0NWIwLnNldENvbnRlbnQoaHRtbF9mYzc5Y2VjZGY1NmQ0MzUwOGUyNGZmNWNlOThmY2VkMSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2FhNWEzN2ViYWM4NzRmYmRiODA1MTY5MzA5ODMwY2YwLmJpbmRQb3B1cChwb3B1cF8xMDY2ZjM4MzQ1OTk0NDBkOGMyZWIxZjUwM2ZmNDViMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2ZjMTFiNTc5YWIwNzQ2MDc5MjQ2NWM0OWFmMGM3NWVjID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgyNzgsLTEyMi40NjM1MV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2RiZjJjMzBhNTcwYzRiYjRhYzMxYTA0ZTc2OTJiYWI1KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzc0ZThkNWI3NzIzZjRhYjQ5NmFmNWYxZjMxNzZlYzZiID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdncmVlbicsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9mYzExYjU3OWFiMDc0NjA3OTI0NjVjNDlhZjBjNzVlYy5zZXRJY29uKGljb25fNzRlOGQ1Yjc3MjNmNGFiNDk2YWY1ZjFmMzE3NmVjNmIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83OWE4NmEzYTRhMTk0OGUyOTM0OGZiNTczM2I4MGIyYiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yOTZhMDU2OWJhMmM0ZDg2OGRkYWY5MGYyYjEwZjZhZSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMjk2YTA1NjliYTJjNGQ4NjhkZGFmOTBmMmIxMGY2YWUiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDMgLSBUb3kgQm9hdDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83OWE4NmEzYTRhMTk0OGUyOTM0OGZiNTczM2I4MGIyYi5zZXRDb250ZW50KGh0bWxfMjk2YTA1NjliYTJjNGQ4NjhkZGFmOTBmMmIxMGY2YWUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9mYzExYjU3OWFiMDc0NjA3OTI0NjVjNDlhZjBjNzVlYy5iaW5kUG9wdXAocG9wdXBfNzlhODZhM2E0YTE5NDhlMjkzNDhmYjU3MzNiODBiMmIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIHBvbHlfbGluZV9mNmJlZTMxNmQyNTE0MGQ0YTY4ZTk2NjYyNDhjN2QzYiA9IEwucG9seWxpbmUoCiAgICAgICAgICAgICAgICAgICAgW1szNy43NzkxMDYsIC0xMjIuNDY0MTU4XSwgWzM3Ljc4MDUyOSwgLTEyMi40NjQyNjRdLCBbMzcuNzgwOTY3LCAtMTIyLjQ2NDI5NV0sIFszNy43ODEwODksIC0xMjIuNDY0MzAzXSwgWzM3Ljc4MTUxMywgLTEyMi40NjQzMzNdLCBbMzcuNzgyMDkzLCAtMTIyLjQ2NDM3OV0sIFszNy43ODIyMzgsIC0xMjIuNDY0Mzg2XSwgWzM3Ljc4MjU0NiwgLTEyMi40NjQ0MDldLCBbMzcuNzgyOTUxLCAtMTIyLjQ2NDQ0XSwgWzM3Ljc4NDc5LCAtMTIyLjQ2NDU3XSwgWzM3Ljc4NTAwMywgLTEyMi40NjQ1ODVdLCBbMzcuNzg1MTM3LCAtMTIyLjQ2MzUyNF0sIFszNy43ODUyNzQsIC0xMjIuNDYyNDU2XSwgWzM3Ljc4NTQwOCwgLTEyMi40NjEzOTZdLCBbMzcuNzg1NTQ1LCAtMTIyLjQ2MDMyOF0sIFszNy43ODU2ODYsIC0xMjIuNDU5MjE0XSwgWzM3Ljc4NTgzMSwgLTEyMi40NTgwNjldLCBbMzcuNzg1OTcyLCAtMTIyLjQ1Njk3OF0sIFszNy43ODYwMDMsIC0xMjIuNDU2NzExXSwgWzM3Ljc4NjEwOSwgLTEyMi40NTU4ODddLCBbMzcuNzg2MjEyLCAtMTIyLjQ1NTA2M10sIFszNy43ODYyNTEsIC0xMjIuNDU0Nzg5XSwgWzM3Ljc4NjMxMiwgLTEyMi40NTQzXSwgWzM3Ljc4NjM4OCwgLTEyMi40NTM2OThdLCBbMzcuNzg2NDE4LCAtMTIyLjQ1MzQyM10sIFszNy43ODY0MywgLTEyMi40NTMzMjRdLCBbMzcuNzg2NjI0LCAtMTIyLjQ1MTc3NV0sIFszNy43ODY0NzYsIC0xMjIuNDUxNzQ1XSwgWzM3Ljc4NjIzOSwgLTEyMi40NTE2OTldLCBbMzcuNzg2MjM5LCAtMTIyLjQ1MTY5OV0sIFszNy43ODU5MzQsIC0xMjIuNDUxNjNdLCBbMzcuNzg1OTM0LCAtMTIyLjQ1MTYzOF0sIFszNy43ODU4NzcsIC0xMjIuNDUyMDhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1NzI0LCAtMTIyLjQ1MzI3OF0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcxMywgLTEyMi40NTM0MzFdLCBbMzcuNzg1NzA1LCAtMTIyLjQ1MzQ5OV0sIFszNy43ODU2OTQsIC0xMjIuNDUzNTZdLCBbMzcuNzg1NjgyLCAtMTIyLjQ1MzYxNF0sIFszNy43ODU2NTksIC0xMjIuNDUzNjZdLCBbMzcuNzg1NjMzLCAtMTIyLjQ1MzY5OF0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTU1NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg1NTExLCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTM1OCwgLTEyMi40NTM3NTldLCBbMzcuNzg1MjM2LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NDk3NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg0ODUxLCAtMTIyLjQ1Mzc0M10sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDYxNCwgLTEyMi40NTM3MjhdLCBbMzcuNzg0NDk2LCAtMTIyLjQ1MzcxM10sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDI2NywgLTEyMi40NTM2ODJdLCBbMzcuNzg0MTY4LCAtMTIyLjQ1MzY2N10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4Mzk1NCwgLTEyMi40NTM2MzddLCBbMzcuNzgxNzg3LCAtMTIyLjQ1MzIwMl0sIFszNy43ODE2NjksIC0xMjIuNDUzMTc5XSwgWzM3Ljc4MDM2NCwgLTEyMi40NTI5Ml0sIFszNy43ODAyNDIsIC0xMjIuNDUzODk2XSwgWzM3Ljc4MDEyLCAtMTIyLjQ1NDgzNF0sIFszNy43ODAwOTcsIC0xMjIuNDU1MDE4XSwgWzM3Ljc4MDAzNiwgLTEyMi40NTU0OTFdLCBbMzcuNzgwMDI5LCAtMTIyLjQ1NTU1OV0sIFszNy43ODAwMTcsIC0xMjIuNDU1NjJdLCBbMzcuNzgwMDA2LCAtMTIyLjQ1NTY4MV0sIFszNy43Nzk5OTEsIC0xMjIuNDU1NzM1XSwgWzM3Ljc3OTk0NSwgLTEyMi40NTU4NTddLCBbMzcuNzc5ODk5LCAtMTIyLjQ1NTk4N10sIFszNy43Nzk4MDgsIC0xMjIuNDU2MjM4XSwgWzM3Ljc3OTcwOCwgLTEyMi40NTY1MTNdLCBbMzcuNzc5NjcsIC0xMjIuNDU2NjEyXSwgWzM3Ljc3OTY0NCwgLTEyMi40NTY2ODhdLCBbMzcuNzc5NjIxLCAtMTIyLjQ1Njc1N10sIFszNy43Nzk2MDUsIC0xMjIuNDU2ODMzXSwgWzM3Ljc3OTU5NCwgLTEyMi40NTY5MDJdLCBbMzcuNzc5NTc5LCAtMTIyLjQ1NzAwMV0sIFszNy43Nzk0ODMsIC0xMjIuNDU3NzY0XSwgWzM3Ljc3OTQ3MiwgLTEyMi40NTc4NF0sIFszNy43NzkzNzMsIC0xMjIuNDU4NjE5XSwgWzM3Ljc3OTM1NywgLTEyMi40NTg3NTZdLCBbMzcuNzc5MzUsIC0xMjIuNDU4ODI1XSwgWzM3Ljc3OTM0MiwgLTEyMi40NTg4OTNdLCBbMzcuNzc5MywgLTEyMi40NTk4NzhdLCBbMzcuNzc5MjUxLCAtMTIyLjQ2MDk0Nl0sIFszNy43NzkyMDEsIC0xMjIuNDYyMDIxXSwgWzM3Ljc3OTE1MSwgLTEyMi40NjMwOTddLCBbMzcuNzc5MTA5LCAtMTIyLjQ2NDIwM11dLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNS5hZGRMYXllcihwb2x5X2xpbmVfZjZiZWUzMTZkMjUxNDBkNGE2OGU5NjY2MjQ4YzdkM2IpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lX2U2OTA2ZTkxMjM5MzQ4OGRhMDA4ZTgxMGVjODE1Mzc4ID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdLCBbMzcuNzgwNTI5LCAtMTIyLjQ2NDI2NF0sIFszNy43ODA5NjcsIC0xMjIuNDY0Mjk1XSwgWzM3Ljc4MDkxOCwgLTEyMi40NjUzNjNdLCBbMzcuNzgwOTAyLCAtMTIyLjQ2NTcxNF0sIFszNy43ODA4NjgsIC0xMjIuNDY2NDM5XSwgWzM3Ljc4MDg1MywgLTEyMi40NjY3OV0sIFszNy43ODA4MjIsIC0xMjIuNDY3NTA3XSwgWzM3Ljc4MDc3MywgLTEyMi40Njg1NzVdLCBbMzcuNzgwNzIzLCAtMTIyLjQ2OTY1MV0sIFszNy43ODA4NDUsIC0xMjIuNDY5NjU4XSwgWzM3Ljc4MTE1LCAtMTIyLjQ2OTcwNF0sIFszNy43ODExNSwgLTEyMi40Njk3MDRdLCBbMzcuNzgyMzgyLCAtMTIyLjQ2OTc2NV0sIFszNy43ODI3MDcsIC0xMjIuNDY5Nzg4XSwgWzM3Ljc4MjY2MSwgLTEyMi40NzA4NjRdLCBbMzcuNzgyNjExLCAtMTIyLjQ3MTkzMl0sIFszNy43ODI2MDQsIC0xMjIuNDcyMV0sIFszNy43ODI1OTIsIC0xMjIuNDcyMzk3XSwgWzM3Ljc4MjU4NSwgLTEyMi40NzI1NDJdLCBbMzcuNzgyNTY2LCAtMTIyLjQ3MzAwOF0sIFszNy43ODI1MTIsIC0xMjIuNDc0MTI5XSwgWzM3Ljc4MjQ1OSwgLTEyMi40NzUyNTFdLCBbMzcuNzgyNDA5LCAtMTIyLjQ3NjMxOV0sIFszNy43ODIzNjMsIC0xMjIuNDc3Mzk1XSwgWzM3Ljc4MjMxNCwgLTEyMi40Nzg0NjNdLCBbMzcuNzgyMjY0LCAtMTIyLjQ3OTUzMV0sIFszNy43ODIyMTUsIC0xMjIuNDgwNjA3XSwgWzM3Ljc4MjE2OSwgLTEyMi40ODE2NzVdLCBbMzcuNzgyMTE5LCAtMTIyLjQ4Mjc1XSwgWzM3Ljc4MzcxOCwgLTEyMi40ODI5MDNdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODIxMTksIC0xMjIuNDgyNzVdLCBbMzcuNzgxNzM4LCAtMTIyLjQ4MjcyXSwgWzM3Ljc4MDI1OCwgLTEyMi40ODI2MTNdLCBbMzcuNzgwMjc3LCAtMTIyLjQ4MjIzOV0sIFszNy43ODAzMDcsIC0xMjIuNDgxNTQ1XSwgWzM3Ljc4MDMyNiwgLTEyMi40ODExMzNdLCBbMzcuNzgwMzU3LCAtMTIyLjQ4MDQ3N10sIFszNy43ODA0MDMsIC0xMjIuNDc5NDAxXSwgWzM3Ljc4MDQ1MiwgLTEyMi40NzgzMzNdLCBbMzcuNzgwNDY3LCAtMTIyLjQ3Nzk3NF0sIFszNy43ODA1MDIsIC0xMjIuNDc3MjU3XSwgWzM3Ljc4MDUxMywgLTEyMi40NzY5MzddLCBbMzcuNzgwNTUxLCAtMTIyLjQ3NjE4OV0sIFszNy43ODA1OTcsIC0xMjIuNDc1MTEzXSwgWzM3Ljc4MDY1MSwgLTEyMi40NzM5OTJdLCBbMzcuNzgwNjcsIC0xMjIuNDczNTA0XSwgWzM3Ljc4MDcsIC0xMjIuNDcyODddLCBbMzcuNzgwNzE5LCAtMTIyLjQ3MjQ4OV0sIFszNy43ODA3MTksIC0xMjIuNDcyNDA1XSwgWzM3Ljc4MDU5NywgLTEyMi40NzIzOTddLCBbMzcuNzgwNjA1LCAtMTIyLjQ3MjI1Ml0sIFszNy43ODA2MDksIC0xMjIuNDcyMTc2XSwgWzM3Ljc4MDYxNiwgLTEyMi40NzE5ODVdLCBbMzcuNzgwNjI4LCAtMTIyLjQ3MTc5NV0sIFszNy43ODA2NTgsIC0xMjIuNDcxMDkzXSwgWzM3Ljc4MDY3MywgLTEyMi40NzA3MTldLCBbMzcuNzgwNzA4LCAtMTIyLjQ3MDAyNV0sIFszNy43ODA3MjMsIC0xMjIuNDY5NjUxXSwgWzM3Ljc4MDc3MywgLTEyMi40Njg1NzVdLCBbMzcuNzgwODIyLCAtMTIyLjQ2NzUwN10sIFszNy43ODA4NTMsIC0xMjIuNDY2NzldLCBbMzcuNzgwODY4LCAtMTIyLjQ2NjQzOV0sIFszNy43ODA5MDIsIC0xMjIuNDY1NzE0XSwgWzM3Ljc4MDkxOCwgLTEyMi40NjUzNjNdLCBbMzcuNzgwOTY3LCAtMTIyLjQ2NDI5NV0sIFszNy43ODA1MjksIC0xMjIuNDY0MjY0XSwgWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdXSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcF9kYmYyYzMwYTU3MGM0YmI0YWMzMWEwNGU3NjkyYmFiNS5hZGRMYXllcihwb2x5X2xpbmVfZTY5MDZlOTEyMzkzNDg4ZGEwMDhlODEwZWM4MTUzNzgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lXzVlMGMzZmVlNTQ3NDQ3NTg5MzI5ZjA4MTliNDcxZjRjID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdLCBbMzcuNzc3MjMzLCAtMTIyLjQ2NDAyOF0sIFszNy43NzU0NTksIC0xMjIuNDYzODk4XSwgWzM3Ljc3NTM3MSwgLTEyMi40NjM4OTFdLCBbMzcuNzc0MiwgLTEyMi40NjM4MDddLCBbMzcuNzczNjM1LCAtMTIyLjQ2Mzc2OV0sIFszNy43NzM2NTEsIC0xMjIuNDYzNjYyXSwgWzM3Ljc3MzUzNiwgLTEyMi40NjM2NjldLCBbMzcuNzczNDksIC0xMjIuNDYzNjY5XSwgWzM3Ljc3MzQ0OCwgLTEyMi40NjM2NjldLCBbMzcuNzczNDE0LCAtMTIyLjQ2MzcyM10sIFszNy43NzM0MDYsIC0xMjIuNDYzNzY5XSwgWzM3Ljc3MzI4MSwgLTEyMi40NjM3MzhdLCBbMzcuNzczMTg5LCAtMTIyLjQ2MzczOF0sIFszNy43NzMxMDUsIC0xMjIuNDYzNzQ2XSwgWzM3Ljc3Mjk5MSwgLTEyMi40NjM4MTRdLCBbMzcuNzcyOTMsIC0xMjIuNDYzODZdLCBbMzcuNzcyODcyLCAtMTIyLjQ2Mzg5OF0sIFszNy43NzI2MDksIC0xMjIuNDYzOTk3XSwgWzM3Ljc3MjUyOSwgLTEyMi40NjQwMjhdLCBbMzcuNzcyNDMsIC0xMjIuNDY0MDEzXSwgWzM3Ljc3MjM2OSwgLTEyMi40NjQwNDNdLCBbMzcuNzcyMzA4LCAtMTIyLjQ2NDA3NF0sIFszNy43NzIzNjUsIC0xMjIuNDY0MjcyXSwgWzM3Ljc3MjM5OSwgLTEyMi40NjQ0MDJdLCBbMzcuNzcyNDMsIC0xMjIuNDY0NTI0XSwgWzM3Ljc3MjQ2LCAtMTIyLjQ2NDY1NF0sIFszNy43NzIzODQsIC0xMjIuNDY0Njg0XSwgWzM3Ljc3MjMzMSwgLTEyMi40NjQ2OTldLCBbMzcuNzcyMjcsIC0xMjIuNDY0NzE1XSwgWzM3Ljc3MjE4MiwgLTEyMi40NjQ4MjldLCBbMzcuNzcyMTU5LCAtMTIyLjQ2NDk3NF0sIFszNy43NzIxMTMsIC0xMjIuNDY1MDY2XSwgWzM3Ljc3MTk2NSwgLTEyMi40NjUzMV0sIFszNy43NzE3NjYsIC0xMjIuNDY1Mjc5XSwgWzM3Ljc3MTU3NSwgLTEyMi40NjUyNjRdLCBbMzcuNzcxMzY2LCAtMTIyLjQ2NTE5NV0sIFszNy43NzEyMjQsIC0xMjIuNDY1MTg4XSwgWzM3Ljc3MTA2LCAtMTIyLjQ2NTE4OF0sIFszNy43NzA5NDYsIC0xMjIuNDY1MTk1XSwgWzM3Ljc3MDc5NywgLTEyMi40NjUxMzRdLCBbMzcuNzcwNjI2LCAtMTIyLjQ2NTA1XSwgWzM3Ljc3MDQyMywgLTEyMi40NjUxMDRdLCBbMzcuNzcwMzEzLCAtMTIyLjQ2NTA5Nl0sIFszNy43NzAyMzYsIC0xMjIuNDY0OTUxXSwgWzM3Ljc3MDA5MiwgLTEyMi40NjQ3NzZdLCBbMzcuNzY5OTUsIC0xMjIuNDY0NjA4XSwgWzM3Ljc2OTgwMiwgLTEyMi40NjQ0ODZdLCBbMzcuNzY5NzI1LCAtMTIyLjQ2NDQ3XSwgWzM3Ljc2OTY5NSwgLTEyMi40NjQ1N10sIFszNy43Njk3NiwgLTEyMi40NjQ2MDhdLCBbMzcuNzY5Nzk4LCAtMTIyLjQ2NDY2OV0sIFszNy43Njk4MzIsIC0xMjIuNDY0Nzk4XSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5OTU4LCAtMTIyLjQ2NTAxMl0sIFszNy43Njk5NTgsIC0xMjIuNDY1MDEyXSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5ODMyLCAtMTIyLjQ2NDc5OF0sIFszNy43Njk3OTgsIC0xMjIuNDY0NjY5XSwgWzM3Ljc2OTc2LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk2OTUsIC0xMjIuNDY0NTddLCBbMzcuNzY5NzI1LCAtMTIyLjQ2NDQ3XSwgWzM3Ljc2OTgwMiwgLTEyMi40NjQ0ODZdLCBbMzcuNzY5OTUsIC0xMjIuNDY0NjA4XSwgWzM3Ljc3MDA5MiwgLTEyMi40NjQ3NzZdLCBbMzcuNzcwMjM2LCAtMTIyLjQ2NDk1MV0sIFszNy43NzAzMTMsIC0xMjIuNDY1MDk2XSwgWzM3Ljc3MDQyMywgLTEyMi40NjUxMDRdLCBbMzcuNzcwNjI2LCAtMTIyLjQ2NTA1XSwgWzM3Ljc3MDkzMSwgLTEyMi40NjQ1NzddLCBbMzcuNzcxMDE4LCAtMTIyLjQ2NDMxOF0sIFszNy43NzExMTQsIC0xMjIuNDY0MTI3XSwgWzM3Ljc3MTE1NiwgLTEyMi40NjM5NTldLCBbMzcuNzcxMTcxLCAtMTIyLjQ2MzczOF0sIFszNy43NzExNzUsIC0xMjIuNDYzNTA5XSwgWzM3Ljc3MTIwOSwgLTEyMi40NjMyNV0sIFszNy43NzEyODYsIC0xMjIuNDYzMTJdLCBbMzcuNzcxNDI3LCAtMTIyLjQ2MzA3NF0sIFszNy43NzE0NDIsIC0xMjIuNDYyODUzXSwgWzM3Ljc3MTQ1NywgLTEyMi40NjI3XSwgWzM3Ljc3MTQ4LCAtMTIyLjQ2MjY1NV0sIFszNy43NzE2NTIsIC0xMjIuNDYyNTcxXSwgWzM3Ljc3MTczOSwgLTEyMi40NjI1MV0sIFszNy43NzE2ODYsIC0xMjIuNDYyMzU3XSwgWzM3Ljc3MTc1OSwgLTEyMi40NjIzNDJdLCBbMzcuNzcxODM1LCAtMTIyLjQ2MjMwNF0sIFszNy43NzE5MzQsIC0xMjIuNDYyMjY2XSwgWzM3Ljc3MTkxNSwgLTEyMi40NjIxODJdLCBbMzcuNzcxOTAzLCAtMTIyLjQ2MjE0M10sIFszNy43NzE5NjUsIC0xMjIuNDYyMDldLCBbMzcuNzcyMDgzLCAtMTIyLjQ2MTkzXSwgWzM3Ljc3MjE3OCwgLTEyMi40NjE3MTZdLCBbMzcuNzcyMjc0LCAtMTIyLjQ2MTUxXSwgWzM3Ljc3MjQwNywgLTEyMi40NjEzMzVdLCBbMzcuNzcyNTQ4LCAtMTIyLjQ2MTIyOF0sIFszNy43NzI1NzksIC0xMjIuNDYxMjEzXSwgWzM3Ljc3MjY1NSwgLTEyMi40NjExNzVdLCBbMzcuNzcyNzA4LCAtMTIyLjQ2MTE0NF0sIFszNy43NzI2NTksIC0xMjIuNDYxMDgzXSwgWzM3Ljc3MjcyLCAtMTIyLjQ2MTAzN10sIFszNy43NzI3NjYsIC0xMjIuNDYwOTk5XSwgWzM3Ljc3MjgxOSwgLTEyMi40NjA5NDZdLCBbMzcuNzcyODcyLCAtMTIyLjQ2MDg3N10sIFszNy43NzI5MTgsIC0xMjIuNDYwNzkzXSwgWzM3Ljc3Mjk1MywgLTEyMi40NjA3MTddLCBbMzcuNzcyOTg3LCAtMTIyLjQ2MDYxOF0sIFszNy43NzMwMTQsIC0xMjIuNDYwNTExXSwgWzM3Ljc3MzAzNiwgLTEyMi40NjAzOTZdLCBbMzcuNzczMTE3LCAtMTIyLjQ1OTgyNF0sIFszNy43NzMxNDcsIC0xMjIuNDU5NjFdLCBbMzcuNzczMTkzLCAtMTIyLjQ1OTI2N10sIFszNy43NzMyMDgsIC0xMjIuNDU5MTQ1XSwgWzM3Ljc3MzI3MywgLTEyMi40NTkxNTNdLCBbMzcuNzczNTcxLCAtMTIyLjQ1ODg5M10sIFszNy43NzM4NDUsIC0xMjIuNDU4NjI2XSwgWzM3Ljc3NDAwMiwgLTEyMi40NTg1MjddLCBbMzcuNzc0MTM5LCAtMTIyLjQ1ODQ5N10sIFszNy43NzQyOTksIC0xMjIuNDU4NTEyXSwgWzM3Ljc3NDI5OSwgLTEyMi40NTg0NThdLCBbMzcuNzc0Mjk5LCAtMTIyLjQ1ODM5XSwgWzM3Ljc3NDQxLCAtMTIyLjQ1ODQwNV0sIFszNy43NzQ3MDMsIC0xMjIuNDU4NDJdLCBbMzcuNzc0OTgyLCAtMTIyLjQ1ODQ0M10sIFszNy43NzUyNDUsIC0xMjIuNDU4NDU4XSwgWzM3Ljc3NTU2OSwgLTEyMi40NTg1MDRdLCBbMzcuNzc1NTY5LCAtMTIyLjQ1ODUwNF0sIFszNy43NzU2MTUsIC0xMjIuNDU4NDg5XSwgWzM3Ljc3NjExOSwgLTEyMi40NTg1MjddLCBbMzcuNzc2MTg3LCAtMTIyLjQ1ODUyN10sIFszNy43NzY4NDQsIC0xMjIuNDU4NTczXSwgWzM3Ljc3NzEyNiwgLTEyMi40NTg1OTZdLCBbMzcuNzc3Mjg2LCAtMTIyLjQ1ODYxMV0sIFszNy43NzczMzYsIC0xMjIuNDU4NzQxXSwgWzM3Ljc3NzQwOCwgLTEyMi40NTg5NDddLCBbMzcuNzc3NDMxLCAtMTIyLjQ1OTAxNV0sIFszNy43Nzc0NDYsIC0xMjIuNDU5MDc2XSwgWzM3Ljc3NzQ1NCwgLTEyMi40NTkxM10sIFszNy43Nzc0NTgsIC0xMjIuNDU5MTgzXSwgWzM3Ljc3NzQzNSwgLTEyMi40NTk2NDldLCBbMzcuNzc3NDI3LCAtMTIyLjQ1OTc0XSwgWzM3Ljc3NzQyMywgLTEyMi40NTk4MzldLCBbMzcuNzc3Mzc4LCAtMTIyLjQ2MDgwOF0sIFszNy43NzczMzIsIC0xMjIuNDYxODg0XSwgWzM3Ljc3NzI4MiwgLTEyMi40NjI5Nl0sIFszNy43NzkxNTEsIC0xMjIuNDYzMDk3XSwgWzM3Ljc4MTAxNywgLTEyMi40NjMyMjddLCBbMzcuNzgxMTM5LCAtMTIyLjQ2MzIzNF0sIFszNy43ODE1MzksIC0xMjIuNDYzMjY1XSwgWzM3Ljc4Mjc5MSwgLTEyMi40NjM0MDJdLCBbMzcuNzgyNzkxLCAtMTIyLjQ2MzQwMl0sIFszNy43ODE1MzksIC0xMjIuNDYzMjY1XSwgWzM3Ljc4MTEzOSwgLTEyMi40NjMyMzRdLCBbMzcuNzgxMDg5LCAtMTIyLjQ2NDMwM10sIFszNy43ODA5NjcsIC0xMjIuNDY0Mjk1XSwgWzM3Ljc4MDUyOSwgLTEyMi40NjQyNjRdLCBbMzcuNzc5MTA2LCAtMTIyLjQ2NDE1OF1dLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdncmVlbicsCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXBfZGJmMmMzMGE1NzBjNGJiNGFjMzFhMDRlNzY5MmJhYjUuYWRkTGF5ZXIocG9seV9saW5lXzVlMGMzZmVlNTQ3NDQ3NTg5MzI5ZjA4MTliNDcxZjRjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgPC9zY3JpcHQ+CiAgICAgICAg" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>
[Full Size]({{ site.baseurl }}/images/optimize_stops_3_people_drive.html)


## Conclusion
I found working with these Mapzen services in Python to be really interesting and enjoyable. As I mentioned, this exercise was done mainly as a way to become familiar with some of their routing and geocoding tools, as well as to develop a way to map the geospatial outputs from these tools. My “extension” to the service was done as a quick and dirty way to obtain and visualize an answer for the vehicle routing problem that works for a small number of stops. A next step would be to look into the optimization algorithm that Mapzen uses on the time-distance matrix, so that it can be adapted to work more generally for multiple salesman. This would address the problem further upstream and require many fewer calls to the API.
